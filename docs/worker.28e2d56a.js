!function(){function t(t,e,s,i){Object.defineProperty(t,e,{get:s,set:i,enumerable:!0,configurable:!0})}var e="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof global?global:{},s={},i={},r=e.parcelRequire95bc;null==r&&((r=function(t){if(t in s)return s[t].exports;if(t in i){var e=i[t];delete i[t];var r={id:t,exports:{}};return s[t]=r,e.call(r.exports,r,r.exports),r.exports}var n=Error("Cannot find module '"+t+"'");throw n.code="MODULE_NOT_FOUND",n}).register=function(t,e){i[t]=e},e.parcelRequire95bc=r);var n=r.register;n("1chkU",function(e,s){t(e.exports,"Problem",function(){return r("fCl7l").Problem}),t(e.exports,"CrispProblem",function(){return r("2Ga1d").CrispProblem}),t(e.exports,"ObservableVariable",function(){return r("4MQ09").ObservableVariable}),t(e.exports,"SolverFactory",function(){return r("eGXYL").SolverFactory}),r("fCl7l"),r("2Ga1d"),r("5DFt4"),r("clQW1"),r("4MQ09"),r("jdsjF"),r("aAWof"),r("gJahW"),r("kRZEB"),r("8w9WX"),r("16DJK"),r("kENyF"),r("93XCD"),r("1mRgO"),r("5KOoE"),r("eGXYL"),r("9C8yW"),r("abo2u"),r("bvrdB"),r("aVUiT"),r("iSBsL"),r("fPF5Z"),r("7Pq8R"),r("47GBg"),r("ixf1l"),r("1SbA9"),r("1A6pb"),r("88AL2"),r("i7ZDw"),r("2YaWk"),r("24w7i"),r("9sqlb"),r("lbFyh"),r("7VBER"),r("aUUqy"),r("6zOUP"),r("3Ow8n"),r("hbhRl"),r("iClid")}),n("fCl7l",function(e,s){t(e.exports,"Problem",function(){return c});var i=r("clQW1"),n=r("gJahW"),o=r("aAWof"),a=r("kRZEB"),l=r("8w9WX"),h=r("16DJK"),u=r("kENyF"),f=r("93XCD");class c{#t=(t,e)=>new i.Variable(t,e);#e=(t,e)=>1===e.length?new l.Constraint1(t,e[0]):2===e.length?new h.Constraint2(t,e[0],e[1]):3===e.length?new u.Constraint3(t,e[0],e[1],e[2]):new f.ConstraintN(t,...e);#s=!1;#i=[];#r=[];setVariableFactory(t){this.#t=t}setConstraintFactory(t){this.#e=t}addVariable(t){t.setIndex(this.#i.length),this.#i.push(t)}createDomain(t){return"values"in t?new o.DomainArbitrary(t.values):"min"in t&&"max"in t?new n.DomainRanged(t.min,t.max):null}createVariable(t){if("variable"in t){let e=this.#t(this,t.variable.domain());return this.addVariable(e),e.setName(e.name()),e.assign(e.value()),e}{if(void 0!==t.value&&!t.domain.contains(t.value))throw Error();let e=this.#t(this,t.domain);return this.addVariable(e),t.name&&e.setName(t.name),t.value&&e.assign(t.value),e}}createConstraint(t){for(let e of t.variables)if(e.owner()!==this)return null;let e=this.#e(t.relation,t.variables);for(let s of(e.setIndex(this.#r.length),this.#r.push(e),t.variables))s.connect(e);return e.isFuzzy()&&(this.#s=!0),"name"in t&&e.setName(t.name),e}removeConstraint(t){let e=this.#r.indexOf(t);this.#r.splice(e,1);for(let t=e;t<this.#r.length;++t)this.#r[t].setIndex(t);for(let e of t)e.disconnect(t);for(let t of(this.#s=!1,this.#r))if(t.isFuzzy()){this.#s=!0;break}}clearAllVariables(){for(let t of this.#i)t.clear()}reverseVariables(){this.#i.reverse();for(let t=0;t<this.#i.length;++t)this.#i[t].setIndex(t)}sortVariables(t){this.#i.sort(t);for(let t=0;t<this.#i.length;++t)this.#i[t].setIndex(t)}variableSize(){return this.#i.length}variableAt(t){return this.#i[t]}variableOf(t){for(let e of this.#i)if(e.name()===t)return e;return null}hasVariable(t){return this.#i.includes(t)}variables(){return this.#i}constraintSize(){return this.#r.length}constraintAt(t){return this.#r[t]}constraintOf(t){for(let e of this.#r)if(e.name()===t)return e;return null}hasConstraint(t){return this.#r.includes(t)}constraints(){return this.#r}constraintsBetween(t,e){let s=[];for(let i of t)i.has(e)&&s.push(i);return s}constraintsWithWorstSatisfactionDegree(){let t=[],e=1;for(let s of this.#r){let i=s.satisfactionDegree();i<e?(e=i,t.length=0,t.push(s)):i-e<10*Number.MIN_VALUE&&t.push(s)}return[t,e]}worstSatisfactionDegree(){let t=1;for(let e of this.#r){let s=e.satisfactionDegree();if(s===a.Constraint.UNDEFINED)return a.Constraint.UNDEFINED;s<t&&(t=s)}return t}averageSatisfactionDegree(){let t=0;for(let e of this.#r)t+=e.satisfactionDegree();return t/this.#r.length}emptyVariableSize(){let t=0;for(let e of this.#i)e.isEmpty()&&t++;return t}constraintDensity(){return this.constraintSize()/this.variableSize()}hasEmptyDomain(){for(let t of this.#i)if(0===t.domain().size())return!0;return!1}isFuzzy(){return this.#s}}}),n("clQW1",function(e,s){t(e.exports,"Variable",function(){return n});var i=r("5DFt4");class n extends i.Element{static #n=Number.MIN_VALUE;#o;#a;#l=n.#n;#r=[];constructor(t,e){super(),this.#o=t,this.#a=e}toString(){let t=this.name(),e=t?`(${t})`:"",s=this.isEmpty()?"<empty>":""+this.value();return`x${this.index()}${e} = ${s}`}size(){return this.#r.length}at(t){return this.#r.at(t)}has(t){return this.#r.includes(t)}indexOf(t){return this.#r.indexOf(t)}neighbors(){let t=[];for(let e of this.#r)for(let s of e)s!==this&&t.push(s);return t}[Symbol.iterator](){return this.#r[Symbol.iterator]()}owner(){return this.#o}connect(t){if(this.#r.includes(t))throw RangeError();this.#r.push(t)}disconnect(t){if(!this.#r.includes(t))throw RangeError();this.#r=this.#r.filter(e=>e!==t)}domain(t){if(void 0===t)return this.#a;this.#a=t,this.clear()}assign(t){this.#l=t}clear(){this.assign(n.#n)}value(){return this.#l}isEmpty(){return this.value()===n.#n}}}),n("5DFt4",function(e,s){t(e.exports,"Element",function(){return i});class i{#h=-1;#u="";userObject=null;solverObject=null;setIndex(t){this.#h=t}setName(t){this.#u=t}index(){return this.#h}name(){return this.#u}}}),n("gJahW",function(e,s){t(e.exports,"DomainRanged",function(){return n});var i=r("jdsjF");class n extends i.Domain{#f;#c;constructor(t,e){super(),this.#f=0|t,this.#c=0|e}contains(t){return this.#f<=t&&t<=this.#c}indexOf(t){return this.#f<=t&&t<=this.#c?t-this.#f:-1}size(){return this.#c-this.#f+1}at(t){return this.#f+t}[Symbol.iterator](){let t=this.#f,e=this.#c;return{next:()=>t<=e?{value:t++,done:!1}:{value:null,done:!0}}}}}),n("jdsjF",function(e,s){t(e.exports,"Domain",function(){return i});class i{random(){return this.at(Math.floor(Math.random()*this.size()))}}}),n("aAWof",function(e,s){t(e.exports,"DomainArbitrary",function(){return n});var i=r("jdsjF");class n extends i.Domain{#d;constructor(t){super(),this.#d=[...t]}contains(t){return this.#d.includes(t)}indexOf(t){return this.#d.indexOf(t)}size(){return this.#d.length}at(t){return this.#d[t]}[Symbol.iterator](){return this.#d[Symbol.iterator]()}}}),n("kRZEB",function(e,s){t(e.exports,"Constraint",function(){return n});var i=r("5DFt4");class n extends i.Element{static UNDEFINED=-1;rel;constructor(t){super(),this.rel=t}crispRelation(){return this.rel}fuzzyRelation(){return this.rel}isFuzzy(){return"satisfactionDegree"in this.rel}toString(){let t=this.name(),e=t?`(${t})`:"",s=this.satisfactionDegree(),i=s===n.UNDEFINED?"UNDEFINED":""+s;return`c${this.index()}${e} = ${i}`}}}),n("8w9WX",function(e,s){t(e.exports,"Constraint1",function(){return n});var i=r("kRZEB");class n extends i.Constraint{#i=[];constructor(t,e){super(t),this.#i=[e]}size(){return 1}at(t){return this.#i.at(t)}has(t){return t===this.#i[0]}indexOf(t){return t===this.#i[0]?0:-1}neighbors(){let t=[];for(let e of this.#i[0])e!==this&&t.push(e);return t}[Symbol.iterator](){return this.#i[Symbol.iterator]()}emptyVariableSize(){return this.#i[0].isEmpty()?1:0}isDefined(){return!this.#i[0].isEmpty()}isSatisfied(){return this.#i[0].isEmpty()?i.Constraint.UNDEFINED:this.crispRelation().isSatisfied(this.#i[0].value())?1:0}satisfactionDegree(){return this.#i[0].isEmpty()?i.Constraint.UNDEFINED:this.fuzzyRelation().satisfactionDegree(this.#i[0].value())}highestConsistencyDegree(){let t=this.satisfactionDegree();if(t!==i.Constraint.UNDEFINED)return t;let e=0;for(let t of this.#i[0].domain()){let s=this.fuzzyRelation().satisfactionDegree(t);if(s>e&&(e=s),1===e)break}return e}lowestConsistencyDegree(){let t=this.satisfactionDegree();if(t!==i.Constraint.UNDEFINED)return t;let e=1;for(let t of this.#i[0].domain()){let s=this.fuzzyRelation().satisfactionDegree(t);if(s<e&&(e=s),0===e)break}return e}}}),n("16DJK",function(e,s){t(e.exports,"Constraint2",function(){return n});var i=r("kRZEB");class n extends i.Constraint{#i=[];constructor(t,e,s){super(t),this.#i=[e,s]}size(){return 2}at(t){return this.#i.at(t)}has(t){return this.#i[0]===t||this.#i[1]===t}indexOf(t){return t===this.#i[0]?0:t===this.#i[1]?1:-1}neighbors(){let t=[];for(let e of this.#i[0])e!==this&&t.push(e);for(let e of this.#i[1])e!==this&&t.push(e);return t}[Symbol.iterator](){return this.#i[Symbol.iterator]()}emptyVariableSize(){let t=0;return this.#i[0].isEmpty()&&++t,this.#i[1].isEmpty()&&++t,t}isDefined(){return!this.#i[0].isEmpty()&&!this.#i[1].isEmpty()}isSatisfied(){return this.#i[0].isEmpty()||this.#i[1].isEmpty()?i.Constraint.UNDEFINED:this.crispRelation().isSatisfied(this.#i[0].value(),this.#i[1].value())?1:0}satisfactionDegree(){return this.#i[0].isEmpty()||this.#i[1].isEmpty()?i.Constraint.UNDEFINED:this.fuzzyRelation().satisfactionDegree(this.#i[0].value(),this.#i[1].value())}highestConsistencyDegree(){let t=this.satisfactionDegree();if(t!==i.Constraint.UNDEFINED)return t;let e=0,s=this.#i[0].value(),r=this.#i[1].value(),n=this.#i[0].domain(),o=this.#i[1].domain();if(this.#i[0].isEmpty()&&!this.#i[1].isEmpty())for(let t of n){let s=this.fuzzyRelation().satisfactionDegree(t,r);if(s>e&&(e=s),1===e)break}else if(!this.#i[0].isEmpty()&&this.#i[1].isEmpty())for(let t of o){let i=this.fuzzyRelation().satisfactionDegree(s,t);if(i>e&&(e=i),1===e)break}else for(let t of n)for(let s of o){let i=this.fuzzyRelation().satisfactionDegree(t,s);if(i>e&&(e=i),1===e)break}return e}lowestConsistencyDegree(){let t=this.satisfactionDegree();if(t!==i.Constraint.UNDEFINED)return t;let e=1,s=this.#i[0].value(),r=this.#i[1].value(),n=this.#i[0].domain(),o=this.#i[1].domain();if(this.#i[0].isEmpty()&&!this.#i[1].isEmpty())for(let t of n){let s=this.fuzzyRelation().satisfactionDegree(t,r);if(s<e&&(e=s),0===e)break}else if(!this.#i[0].isEmpty()&&this.#i[1].isEmpty())for(let t of o){let i=this.fuzzyRelation().satisfactionDegree(s,t);if(i<e&&(e=i),0===e)break}else for(let t of n)for(let s of o){let i=this.fuzzyRelation().satisfactionDegree(t,s);if(i<e&&(e=i),0===e)break}return e}}}),n("kENyF",function(e,s){t(e.exports,"Constraint3",function(){return n});var i=r("kRZEB");class n extends i.Constraint{#i=[];constructor(t,e,s,i){super(t),this.#i=[e,s,i]}size(){return 3}at(t){return this.#i.at(t)}has(t){return this.#i[0]===t||this.#i[1]===t||this.#i[2]===t}indexOf(t){return t===this.#i[0]?0:t===this.#i[1]?1:t===this.#i[2]?2:-1}neighbors(){let t=[];for(let e of this.#i[0])e!==this&&t.push(e);for(let e of this.#i[1])e!==this&&t.push(e);for(let e of this.#i[2])e!==this&&t.push(e);return t}[Symbol.iterator](){return this.#i[Symbol.iterator]()}emptyVariableSize(){let t=0;return this.#i[0].isEmpty()&&++t,this.#i[1].isEmpty()&&++t,this.#i[2].isEmpty()&&++t,t}isDefined(){return!this.#i[0].isEmpty()&&!this.#i[1].isEmpty()&&!this.#i[2].isEmpty()}isSatisfied(){return this.#i[0].isEmpty()||this.#i[1].isEmpty()||this.#i[2].isEmpty()?i.Constraint.UNDEFINED:this.crispRelation().isSatisfied(this.#i[0].value(),this.#i[1].value(),this.#i[2].value())?1:0}satisfactionDegree(){return this.#i[0].isEmpty()||this.#i[1].isEmpty()||this.#i[2].isEmpty()?i.Constraint.UNDEFINED:this.fuzzyRelation().satisfactionDegree(this.#i[0].value(),this.#i[1].value(),this.#i[2].value())}highestConsistencyDegree(){let t=this.satisfactionDegree();if(t!==i.Constraint.UNDEFINED)return t;let e=1,s=this.#i[0].value(),r=this.#i[1].value(),n=this.#i[2].value(),o=this.#i[0].domain(),a=this.#i[1].domain(),l=this.#i[2].domain();if(!this.#i[0].isEmpty()||this.#i[1].isEmpty()||this.#i[2].isEmpty()){if(!this.#i[0].isEmpty()&&this.#i[1].isEmpty()&&!this.#i[2].isEmpty())for(let t of a){let i=this.fuzzyRelation().satisfactionDegree(s,t,n);if(i>e&&(e=i),1===e)break}else if(!this.#i[0].isEmpty()&&!this.#i[1].isEmpty()&&this.#i[2].isEmpty())for(let t of l){let i=this.fuzzyRelation().satisfactionDegree(s,r,t);if(i>e&&(e=i),1===e)break}else if(this.#i[0].isEmpty()&&this.#i[1].isEmpty()&&!this.#i[2].isEmpty())for(let t of o)for(let s of a){let i=this.fuzzyRelation().satisfactionDegree(t,s,n);if(i>e&&(e=i),1===e)break}else if(this.#i[0].isEmpty()&&!this.#i[1].isEmpty()&&this.#i[2].isEmpty())for(let t of o)for(let s of l){let i=this.fuzzyRelation().satisfactionDegree(t,r,s);if(i>e&&(e=i),1===e)break}else if(!this.#i[0].isEmpty()&&this.#i[1].isEmpty()&&this.#i[2].isEmpty())for(let t of a)for(let i of l){let r=this.fuzzyRelation().satisfactionDegree(s,t,i);if(r>e&&(e=r),1===e)break}else for(let t of o)for(let s of a)for(let i of l){let r=this.fuzzyRelation().satisfactionDegree(t,s,i);if(r>e&&(e=r),1===e)break}}else for(let t of o){let s=this.fuzzyRelation().satisfactionDegree(t,r,n);if(s>e&&(e=s),1===e)break}return e}lowestConsistencyDegree(){let t=this.satisfactionDegree();if(t!==i.Constraint.UNDEFINED)return t;let e=1,s=this.#i[0].value(),r=this.#i[1].value(),n=this.#i[2].value(),o=this.#i[0].domain(),a=this.#i[1].domain(),l=this.#i[2].domain();if(!this.#i[0].isEmpty()||this.#i[1].isEmpty()||this.#i[2].isEmpty()){if(!this.#i[0].isEmpty()&&this.#i[1].isEmpty()&&!this.#i[2].isEmpty())for(let t of a){let i=this.fuzzyRelation().satisfactionDegree(s,t,n);if(i<e&&(e=i),0===e)break}else if(!this.#i[0].isEmpty()&&!this.#i[1].isEmpty()&&this.#i[2].isEmpty())for(let t of l){let i=this.fuzzyRelation().satisfactionDegree(s,r,t);if(i<e&&(e=i),0===e)break}else if(this.#i[0].isEmpty()&&this.#i[1].isEmpty()&&!this.#i[2].isEmpty())for(let t of o)for(let s of a){let i=this.fuzzyRelation().satisfactionDegree(t,s,n);if(i<e&&(e=i),0===e)break}else if(this.#i[0].isEmpty()&&!this.#i[1].isEmpty()&&this.#i[2].isEmpty())for(let t of o)for(let s of l){let i=this.fuzzyRelation().satisfactionDegree(t,r,s);if(i<e&&(e=i),0===e)break}else if(!this.#i[0].isEmpty()&&this.#i[1].isEmpty()&&this.#i[2].isEmpty())for(let t of a)for(let i of l){let r=this.fuzzyRelation().satisfactionDegree(s,t,i);if(r<e&&(e=r),0===e)break}else for(let t of o)for(let s of a)for(let i of l){let r=this.fuzzyRelation().satisfactionDegree(t,s,i);if(r<e&&(e=r),0===e)break}}else for(let t of o){let s=this.fuzzyRelation().satisfactionDegree(t,r,n);if(s<e&&(e=s),0===e)break}return e}}}),n("93XCD",function(e,s){t(e.exports,"ConstraintN",function(){return n});var i=r("kRZEB");class n extends i.Constraint{#i;#d;constructor(t,...e){super(t),this.#i=[...e],this.#d=Array(this.#i.length)}size(){return this.#i.length}at(t){return this.#i.at(t)}has(t){return this.#i.includes(t)}indexOf(t){return this.#i.indexOf(t)}neighbors(){let t=[];for(let e of this.#i)for(let s of e)s!==this&&t.push(s);return t}[Symbol.iterator](){return this.#i[Symbol.iterator]()}emptyVariableSize(){let t=0;for(let e of this.#i)e.isEmpty()&&++t;return t}isDefined(){for(let t of this.#i)if(t.isEmpty())return!1;return!0}isSatisfied(){for(let t=0;t<this.#i.length;++t){let e=this.#i[t];if(e.isEmpty())return -1;this.#d[t]=e.value()}return this.crispRelation().isSatisfied(...this.#d)?1:0}satisfactionDegree(){for(let t=0;t<this.#i.length;++t){let e=this.#i[t];if(e.isEmpty())return i.Constraint.UNDEFINED;this.#d[t]=e.value()}return this.fuzzyRelation().satisfactionDegree(...this.#d)}highestConsistencyDegree(){let t=this.satisfactionDegree();if(t!==i.Constraint.UNDEFINED)return t;let e=Array(this.emptyVariableSize()),s=0;for(let t=0;t<this.#i.length;++t){let i=this.#i[t];i.isEmpty()?e[s++]=t:this.#d[t]=i.value()}return this.checkHCD(e,0,0)}lowestConsistencyDegree(){let t=this.satisfactionDegree();if(t!==i.Constraint.UNDEFINED)return t;let e=Array(this.emptyVariableSize()),s=0;for(let t=0;t<this.#i.length;++t){let i=this.#i[t];i.isEmpty()?e[s++]=t:this.#d[t]=i.value()}return this.checkLCD(e,0,1)}checkHCD(t,e,s){let i=t[e],r=this.#i[i].domain();if(e===t.length-1)for(let t of r){this.#d[i]=t;let e=this.fuzzyRelation().satisfactionDegree(...this.#d);if(e>s&&(s=e),1===s)break}else for(let n of r)this.#d[i]=n,s=this.checkLCD(t,e+1,s);return s}checkLCD(t,e,s){let i=t[e],r=this.#i[i].domain();if(e===t.length-1)for(let t of r){this.#d[i]=t;let e=this.fuzzyRelation().satisfactionDegree(...this.#d);if(e<s&&(s=e),0===s)break}else for(let n of r)this.#d[i]=n,s=this.checkLCD(t,e+1,s);return s}}}),n("2Ga1d",function(e,s){t(e.exports,"CrispProblem",function(){return n});var i=r("fCl7l");class n extends i.Problem{createConstraint(t){if("satisfactionDegree"in t.relation)throw Error();return super.createConstraint(t)}isFuzzy(){return!1}satisfiedConstraintRate(){return this.satisfiedConstraintSize()/this.constraintSize()}satisfiedConstraintSize(){let t=0;for(let e of this.constraints())1===e.isSatisfied()&&++t;return t}violatingConstraints(){let t=[];for(let e of this.constraints())0===e.isSatisfied()&&t.push(e);return t}violatingConstraintSize(){let t=0;for(let e of this.constraints())0===e.isSatisfied()&&++t;return t}}}),n("4MQ09",function(e,s){t(e.exports,"ObservableVariable",function(){return n}),t(e.exports,"ImaginaryVariable",function(){return o});var i=r("clQW1");class n extends i.Variable{#g;constructor(t,e,s){super(t,e),this.#g=s}assign(t){super.assign(t),this.#g&&this.#g(this,t)}}class o extends i.Variable{#m;constructor(t){super(t.owner(),t.domain()),this.#m=t,this.setName(t.name()),this.assign(t.value())}assign(t){this.#m.assign(t)}domain(t){if(void 0===t)return this.#m.domain();this.#m.domain(t)}value(){return this.#m.value()}}}),n("1mRgO",function(t,e){}),n("5KOoE",function(e,s){t(e.exports,"Solver",function(){return i});class i{_debug=!0;#p=t=>console.log(t);_pro;_iterLimit=null;_timeLimit=null;_targetDeg=.8;#b=[];constructor(t){this._pro=t}name(){return""}exec(){return!1}setIterationLimit(t=null){this._iterLimit=t}setTimeLimit(t=null){this._timeLimit=t}setTargetRate(t=null){this._targetDeg=t}solve(){return this.exec()}addListener(t){this.#b.push(t)}removeListener(t){this.#b.splice(this.#b.indexOf(t),1)}foundSolution(t,e){let s=!1;for(let i of this.#b)i.foundSolution(t,e)&&(s=!0);return s}setDebugMode(t){this._debug=t}setDebugOutput(t){this.#p=t}_debugOutput(t){this._debug&&this.#p(t)}}}),n("eGXYL",function(e,s){t(e.exports,"SolverFactory",function(){return _});var i=r("1A6pb"),n=r("24w7i"),o=r("i7ZDw"),a=r("2YaWk"),l=r("ixf1l"),h=r("88AL2"),u=r("1SbA9"),f=r("aVUiT"),c=r("iSBsL"),d=r("9C8yW"),g=r("abo2u"),m=r("bvrdB"),p=r("fPF5Z"),b=r("7Pq8R"),x=r("47GBg");class _{static crispSolverNames(){return["Forward Checking","Max Forward Checking","Local Changes","Local Changes Ex","Breakout","GENET","Crisp SRS 3"]}static fuzzySolverNames(){return["Fuzzy Forward Checking","Fuzzy Forward Checking Bc","Flexible Local Changes","Flexible Local Changes Ex","Fuzzy Breakout","Fuzzy GENET","SRS 3","SRS 3 PF"]}static async createSolver(t,e){let s=await _.createCrispSolver(t,e);return s?s:await _.createFuzzySolver(t,e)||null}static async createCrispSolver(t,e){switch(t.replaceAll(" ","")){case"ForwardChecking":case"forward-checking":return new i.ForwardChecking(e);case"MaxForwardChecking":case"max-forward-checking":return new n.MaxForwardChecking(e);case"LocalChanges":case"local-changes":return new o.LocalChanges(e);case"LocalChangesEx":case"local-changes-ex":return new a.LocalChangesEx(e);case"Breakout":case"breakout":return new l.Breakout(e);case"GENET":case"genet":return new h.GENET(e);case"CrispSRS3":case"crisp-srs3":return new u.CrispSRS3(e)}return null}static async createFuzzySolver(t,e){switch(t.replaceAll(" ","")){case"FuzzyForwardChecking":case"fuzzy-forward-checking":return new f.FuzzyForwardChecking(e);case"FuzzyForwardCheckingBc":case"fuzzy-forward-checking-bc":return new c.FuzzyForwardCheckingBc(e);case"FlexibleLocalChanges":case"flexible-local-changes":return new d.FlexibleLocalChanges(e);case"FlexibleLocalChangesEx":case"flexible-local-changes-ex":return new g.FlexibleLocalChangesEx(e);case"FuzzyBreakout":case"fuzzy-breakout":return new m.FuzzyBreakout(e);case"FuzzyGENET":case"fuzzy-genet":return new p.FuzzyGENET(e);case"SRS3":case"srs3":return new b.SRS3(e);case"SRS3PF":case"SRS3_PF":case"srs3-pf":return new x.SRS3_PF(e)}return null}}}),n("1A6pb",function(e,s){t(e.exports,"ForwardChecking",function(){return a});var i=r("3Ow8n"),n=r("hbhRl"),o=r("5KOoE");class a extends o.Solver{#i;#x=new i.AssignmentList;#_=[];#v=!1;#D=0;#w=0;constructor(t){for(let e of(super(t),this.#i=[...this._pro.variables()],this.#i))e.solverObject=new n.DomainPruner(e.domain().size());this.#y()}name(){return"Forward Checking"}setTargetRate(){}setUsingMinimumRemainingValuesHeuristics(t){this.#v=t}#y(){this.#_=[];for(let t=0;t<this.#i.length;++t){this.#_.push(Array(this.#i.length));for(let e=0;e<this.#i.length;++e)e<t&&(this.#_[t][e]=this._pro.constraintsBetween(this.#i[e],this.#i[t]))}}#E(t,e){return t<e?this.#_[e][t]:this.#_[t][e]}#C(t,e){for(let s of this.#i){if(!s.isEmpty())continue;let i=s.domain(),r=s.solverObject;for(let n of this.#E(e,s.index()))if(1===n.emptyVariableSize()){for(let e=0,o=i.size();e<o;++e)r.isValueHidden(e)||(s.assign(i.at(e)),0===n.isSatisfied()&&r.hide(e,t));if(s.clear(),r.isEmpty())return!1}}return!0}#z(){let t=0,e=Number.MAX_VALUE;for(let s=0;s<this.#i.length;++s){let i=this.#i[s];if(!i.isEmpty())continue;let r=i.domain().size()-i.solverObject.hiddenSize();r<e&&(e=r,t=s)}return t}#S(t){if(this._iterLimit&&this._iterLimit<this.#D++||this.#w<Date.now())return!1;if(t===this._pro.variableSize())return this.#x.setProblem(this._pro),!0;let e=this.#v?this.#z():t,s=this.#i[e],i=s.domain(),r=s.solverObject;for(let n=0,o=i.size();n<o;++n)if(!r.isValueHidden(n)){if(s.assign(i.at(n)),this.#C(t,e)&&this.#S(t+1))return!0;for(let e of this.#i)e.solverObject.reveal(t)}return s.clear(),!1}exec(){this.#w=null===this._timeLimit?Number.MAX_VALUE:Date.now()+this._timeLimit,this.#D=0,this._pro.clearAllVariables();let t=this.#S(0);for(let e of(t||(this._iterLimit&&this._iterLimit<this.#D&&this._debugOutput("stop: number of iterations has reached the limit"),this.#w<Date.now()&&this._debugOutput("stop: time limit has been reached")),this.#x))e.apply(),e.variable().solverObject.revealAll();return t}}}),n("3Ow8n",function(e,s){t(e.exports,"AssignmentList",function(){return n});var i=r("6zOUP");class n{static fromVariables(t){let e=new n;return e.setVariables(t),e}#L=[];constructor(){}setProblem(t){for(let e of(this.#L.length=0,t.variables()))this.#L.push(new i.Assignment({variable:e,value:e.value()}))}setAssignmentList(t){for(let e of(this.#L.length=0,t))this.#L.push(new i.Assignment({variable:e.variable(),value:e.value()}))}setVariables(t){for(let e of(this.#L.length=0,t))this.#L.push(new i.Assignment({variable:e,value:e.value()}))}addVariable(t,e=null){this.#L.push(new i.Assignment({variable:t,value:e}))}apply(){for(let t of this.#L)t.apply()}clear(){this.#L.length=0}isEmpty(){return 0===this.#L.length}size(){return this.#L.length}differenceSize(){let t=0;for(let e of this.#L)e.variable().value()!==e.value()&&++t;return t}at(t){return this.#L[t]}[Symbol.iterator](){return this.#L[Symbol.iterator]()}random(){return this.#L[Math.floor(Math.random()*this.#L.length)]}}}),n("6zOUP",function(e,s){t(e.exports,"Assignment",function(){return i});class i{#O;#l;constructor(t){if("assignment"in t)this.#O=t.assignment.variable(),this.#l=t.assignment.value();else if("variable"in t)this.#O=t.variable,this.#l=t.value??t.variable.value();else throw RangeError()}apply(){this.#O.assign(this.#l)}toString(){return`v${this.#O.index()} <- ${this.#l}`}value(){return this.#l}variable(){return this.#O}}}),n("hbhRl",function(e,s){t(e.exports,"DomainPruner",function(){return i});class i{static #V=-1;#R;#N=0;constructor(t){this.#R=Array(t),this.#R.fill(i.#V)}hiddenSize(){return this.#N}hide(t,e){this.#R[t]===i.#V&&++this.#N,this.#R[t]=e}isEmpty(){return this.#R.length===this.#N}isValueHidden(t){return this.#R[t]!==i.#V}reveal(t){for(let e=0;e<this.#R.length;++e)this.#R[e]===t&&(this.#R[e]=i.#V,--this.#N)}revealAll(){this.#R.fill(i.#V),this.#N=0}}}),n("24w7i",function(e,s){t(e.exports,"MaxForwardChecking",function(){return a});var i=r("3Ow8n"),n=r("hbhRl"),o=r("5KOoE");class a extends o.Solver{#i;#x=new i.AssignmentList;#k;#A=0;#F=new Set;#r=[];#D=0;#w=0;constructor(t){for(let e of(super(t),this.#i=[...this._pro.variables()],this.#i))e.solverObject=new n.DomainPruner(e.domain().size());this.#k=this._pro.constraintSize()}name(){return"Forward Checking for Max CSPs"}#S(t,e){if(this._iterLimit&&this._iterLimit<this.#D++||this.#w<Date.now())return!1;let s=this._pro;if(t===s.variableSize()){let t=s.violatingConstraintSize();return!!(t<this.#k&&(this.#k=t,this.#x.setProblem(this._pro),this._debugOutput(`   refreshed ${this.#k}`),(this._targetDeg??1)<=s.satisfiedConstraintRate()))}let i=this.#i[t],r=i.domain(),n=i.solverObject;for(let s=0,o=r.size();s<o;++s)if(!n.isValueHidden(s)&&(i.assign(r.at(s)),this.#A=e+this.#I(t,i),!(this.#A>this.#k))){if(this.#C(t)&&this.#S(t+1,this.#A))return!0;for(let e of this.#i)e.solverObject.reveal(t)}return i.clear(),!1}#C(t){let e=this.#i[t];for(let s=t+1;s<this.#i.length;++s){let i=this.#i[s];for(let s of(this.#r=this._pro.constraintsBetween(e,i),this.#r))if(1===s.emptyVariableSize()&&this.#T(i,s,t)&&i.solverObject.isEmpty())return!1}return!0}#I(t,e){let s=0;this.#F.clear();for(let i=0;i<t;++i)for(let t of(this.#r=this._pro.constraintsBetween(e,this.#i[i]),this.#r))this.#F.has(t)||(0===t.isSatisfied()&&++s,this.#F.add(t));return s}#T(t,e,s){let i=!1,r=t.domain(),n=t.solverObject;for(let o=0,a=r.size();o<a;++o)!n.isValueHidden(o)&&(t.assign(r.at(o)),0===e.isSatisfied()&&this.#A+1>this.#k&&(n.hide(o,s),i=!0));return i}exec(){this.#w=null===this._timeLimit?Number.MAX_VALUE:Date.now()+this._timeLimit,this.#D=0,this._pro.clearAllVariables();let t=this.#S(0,0);for(let e of(t?this._debugOutput("stop: current degree is above the target"):(this._iterLimit&&this._iterLimit<this.#D&&this._debugOutput("stop: number of iterations has reached the limit"),this.#w<Date.now()&&this._debugOutput("stop: time limit has been reached")),this.#x))e.apply(),e.variable().solverObject.revealAll();return t}}}),n("i7ZDw",function(e,s){t(e.exports,"LocalChanges",function(){return o});var i=r("3Ow8n"),n=r("5KOoE");class o extends n.Solver{static #M(t,e){return new Set(t).add(e)}static #U(t,e){let s=new Set(t);return s.delete(e),s}#D=0;#w=0;#W=!1;constructor(t,e=!1){super(t),e&&this._pro.clearAllVariables()}name(){return"Local Changes"}#j(t,e,s){let i=new Set,r=new Set;for(let s of t)for(let t of this._pro.constraintsBetween(e,s))r.add(t);let n=e.value();for(let t of(e.assign(s),r))if(0===t.isSatisfied())for(let e of t)i.add(e);return e.assign(n),i.delete(e),i}#B(t,e,s){let i=new Set;for(let s of t)for(let t of this._pro.constraintsBetween(e,s))i.add(t);let r=e.value();for(let t of(e.assign(s),i))if(0===t.isSatisfied())return e.assign(r),!1;return e.assign(r),!0}#P(t,e,s,i){if(!this.#B(t,s,i))return!1;let r=t.union(e);if(this.#B(r,s,i))return!0;let n=this.#j(r,s,i),a=r.difference(n);for(let t of(this.#B(a,s,i)||this._debugOutput("bug"),n))t.clear();return t=o.#M(t,s),e=e.difference(n),this.#X(t,e,n)}#H(t,e,s,r){if(0===r.size)return!1;let n=r.values().next().value,a=(0,i.AssignmentList).fromVariables(e);s.assign(n);let l=this.#P(t,e,s,n);return l||this.#W?l:(s.clear(),a.apply(),this.#H(t,e,s,o.#U(r,n)))}#X(t,e,s){if(this._debugOutput(`X1 ${t.size}, X2' ${e.size}, X3' ${s.size}`),(this._targetDeg??1)<=this._pro.satisfiedConstraintRate())return this._debugOutput("stop: current degree is above the target"),this.#W=!0,!0;if(this._iterLimit&&this._iterLimit<this.#D++)return this._debugOutput("stop: number of iterations has reached the limit"),this.#W=!0,!1;if(this.#w<Date.now())return this._debugOutput("stop: time limit has been reached"),this.#W=!0,!1;if(0===s.size)return!0;let i=s.values().next().value,r=new Set;for(let t of i.domain())r.add(t);let n=this.#H(t,e,i,r);return!n||this.#W?n:(e=o.#M(e,i),s=o.#U(s,i),this.#X(t,e,s))}exec(){this.#w=null===this._timeLimit?Number.MAX_VALUE:Date.now()+this._timeLimit,this.#D=0,this.#W=!1,0===this._pro.emptyVariableSize()&&this._pro.clearAllVariables();let t=new Set,e=new Set;for(let s of this._pro.variables())(s.isEmpty()?e:t).add(s);return this.#X(new Set,t,e)}}}),n("2YaWk",function(e,s){t(e.exports,"LocalChangesEx",function(){return o});var i=r("3Ow8n"),n=r("5KOoE");class o extends n.Solver{static #M(t,e){return new Set(t).add(e)}#D=0;#w=0;#W=!1;constructor(t,e=!1){super(t),e&&this._pro.clearAllVariables()}name(){return"Local Changes Ex"}#j(t,e,s){let i=new Set,r=new Set;for(let s of t)for(let t of this._pro.constraintsBetween(e,s))r.add(t);let n=e.value();for(let t of(e.assign(s),r))if(0===t.isSatisfied())for(let e of t)i.add(e);return e.assign(n),i.delete(e),i}#B(t,e,s){let i=new Set;for(let s of t)for(let t of this._pro.constraintsBetween(e,s))i.add(t);let r=e.value();for(let t of(e.assign(s),i))if(0===t.isSatisfied())return e.assign(r),!1;return e.assign(r),!0}#P(t,e,s){if(!this.#B(t,s,s.value()))return!1;let i=t.union(e);if(this.#B(i,s,s.value()))return!0;let r=this.#j(i,s,s.value());return t=o.#M(t,s),e=e.difference(r),this.#X(t,e,r)}#H(t,e,s){for(let r of s.domain()){let n=(0,i.AssignmentList).fromVariables(e);s.assign(r);let o=this.#P(t,e,s);if(o||this.#W)return o;s.clear(),n.apply()}return!1}#X(t,e,s){for(e=new Set(e),s=new Set(s);;){if(this._debugOutput(`X1 ${t.size}, X2' ${e.size}, X3' ${s.size}`),(this._targetDeg??1)<=this._pro.satisfiedConstraintRate())return this._debugOutput("stop: current degree is above the target"),this.#W=!0,!0;if(this._iterLimit&&this._iterLimit<this.#D++)return this._debugOutput("stop: number of iterations has reached the limit"),this.#W=!0,!1;if(this.#w<Date.now())return this._debugOutput("stop: time limit has been reached"),this.#W=!0,!1;if(0===s.size)return!0;let i=s.values().next().value,r=this.#H(t,e,i);if(!r||this.#W)return r;e.add(i),s.delete(i)}}exec(){this.#w=null===this._timeLimit?Number.MAX_VALUE:Date.now()+this._timeLimit,this.#D=0,this.#W=!1,0===this._pro.emptyVariableSize()&&this._pro.clearAllVariables();let t=new Set,e=new Set;for(let s of this._pro.variables())(s.isEmpty()?e:t).add(s);return this.#X(new Set,t,e)}}}),n("ixf1l",function(e,s){t(e.exports,"Breakout",function(){return o});var i=r("3Ow8n"),n=r("5KOoE");class o extends n.Solver{#$=!0;#G;constructor(t){super(t),this.#G=Array(this._pro.constraintSize()),this.#G.fill(1)}name(){return"Breakout"}setRandomness(t){this.#$=t}#K(t,e){let s=0;for(let i of t){let t=i.value(),r=0;for(let t of i)r+=(1-t.isSatisfied())*this.#G[t.index()];t:for(let n of i.domain()){if(t===n)continue;i.assign(n);let o=r;for(let t of i)if((o-=(1-t.isSatisfied())*this.#G[t.index()])<s)continue t;o>s?(s=o,e.clear(),e.addVariable(i,n)):0!==s&&e.addVariable(i,n)}i.assign(t)}}#q(t){let e=new Set;for(let s of t)for(let t of s)e.add(t);return Array.from(e)}exec(){let t=null===this._timeLimit?Number.MAX_VALUE:Date.now()+this._timeLimit,e=0;for(let t of this._pro.variables())t.isEmpty()&&t.assign(t.domain().at(0));let s=new i.AssignmentList,r=this._pro;for(;;){let i=r.violatingConstraints();if((this._targetDeg??1)<=r.satisfiedConstraintRate())return this._debugOutput("stop: current degree is above the target"),!0;if(this._iterLimit&&this._iterLimit<e++)return this._debugOutput("stop: number of iterations has reached the limit"),!1;if(t<Date.now())return this._debugOutput("stop: time limit has been reached"),!1;if(this._debugOutput(i.length+" violations"),this.#K(this.#q(i),s),0<s.size()){let t=this.#$?s.random():s.at(0);t.apply(),s.clear(),this._debugOutput("	"+t)}else{for(let t of i)this.#G[t.index()]+=1;this._debugOutput("breakout")}}}}}),n("88AL2",function(e,s){t(e.exports,"GENET",function(){return o});var i=r("3Ow8n"),n=r("5KOoE");class o extends n.Solver{static nextInt(t){return Math.floor(Math.random()*Math.floor(t))}#Z=[];#Q=[];constructor(t){super(t)}name(){return"GENET"}#Y(){this._debugOutput("network creation start");let t=[];for(let t of this._pro.variables()){if(0===t.domain().size())return!1;this.#Z.push(new a(t))}for(let e of this._pro.constraints())if(1===e.size()){let s=e.at(0),i=this.#Z[s.index()];for(let r=0;r<i.size();++r){let n=s.value();s.assign(i.get(r)._value),0===e.isSatisfied()&&t.push(new l(i.get(r))),s.assign(n)}}else{let s=e.at(0),i=e.at(1),r=this.#Z[s.index()],n=this.#Z[i.index()];for(let o=0;o<r.size();++o){let a=s.value();s.assign(r.get(o)._value);for(let s=0;s<n.size();++s){let a=i.value();i.assign(n.get(s)._value),0===e.isSatisfied()&&t.push(new l(r.get(o),n.get(s))),i.assign(a)}s.assign(a)}}for(let t of this.#Z)for(let e of t._neurons)e.lockConnections();return this.#Q=t,this._debugOutput("network creation complete"),!0}#J(t){for(let e=t.length;e>1;--e){let s=o.nextInt(e),i=t[e-1];t[e-1]=t[s],t[s]=i}return t}exec(){if(!this.#Y())throw Error();let t=null===this._timeLimit?Number.MAX_VALUE:Date.now()+this._timeLimit,e=0,s=new i.AssignmentList,r=[];for(let t=0;t<this.#Z.length;++t)r.push(t);let n=this._pro,o=n.satisfiedConstraintRate(),a=!1;for(;;){if(this._iterLimit&&this._iterLimit<e++){this._debugOutput("stop: number of iterations has reached the limit");break}if(t<Date.now()){this._debugOutput("stop: time limit has been reached");break}let i=!1;for(let t of this.#J(r))this.#Z[t].setActivityMaximumInput()&&(i=!0);if(i){for(let t of this.#Z)t.applyToVariable();let t=n.satisfiedConstraintRate();if(o<t){if(o=t,this._debugOutput(`satisfied constraint rate: ${t}`),s.setProblem(this._pro),this.foundSolution(s,t)){a=!0;break}if(this._targetDeg??1<=o){this._debugOutput("stop: current degree is above the target"),a=!0;break}}}else for(let t of this.#Q)t.refreshWeight()}return s.apply(),a}}class a{static nextInt(t){return Math.floor(Math.random()*Math.floor(t))}#O;#h=0;#tt=[];_neurons=[];constructor(t){for(let e of(this.#O=t,t.domain()))this._neurons.push(new h(e));this.#te(a.nextInt(this._neurons.length))}#te(t){for(let t of this._neurons)t._isActive=!1;this._neurons[t]._isActive=!0,this.#h=t}applyToVariable(){this.#O.assign(this._neurons[this.#h]._value)}get(t){return this._neurons[t]}neurons(){return this._neurons}setActivityMaximumInput(){this.#tt.length=0;let t=Number.NEGATIVE_INFINITY,e=!1;for(let s=0;s<this._neurons.length;++s){let i=this._neurons[s].getInput();t<=i&&(t<i&&(t=i,this.#tt.length=0,e=!1),this.#tt.push(s),this.#h===s&&(e=!0))}return!e&&0!==this.#tt.length&&(this.#te(this.#tt[a.nextInt(this.#tt.length)]),!0)}size(){return this._neurons.length}}class l{#ts;#ti;_weight;constructor(t,e=null){this._weight=-1,this.#ts=t,this.#ts.addConnection(this),this.#ti=e,this.#ti&&this.#ti.addConnection(this)}getNeuron(t){return t===this.#ts?this.#ti:t===this.#ti?this.#ts:null}refreshWeight(){this.#ts._isActive&&(null===this.#ti||this.#ti._isActive)&&(this._weight+=-1)}}class h{#tr=[];#Q=[];_value;_isActive=!1;constructor(t){this._value=t}addConnection(t){this.#tr.push(t)}lockConnections(){this.#Q=[...this.#tr],this.#tr=null}getInput(){let t=0;for(let e of this.#Q){let s=e.getNeuron(this);t+=e._weight*(null===s||s._isActive?1:0)}return t}}}),n("1SbA9",function(e,s){t(e.exports,"CrispSRS3",function(){return o});var i=r("3Ow8n"),n=r("5KOoE");class o extends n.Solver{#$=!0;#tn=new Set;#to=new Set;#ta=[];#tl=[];constructor(t){for(let e of(super(t),this._pro.constraints()))this.#ta.push(new a(e)),this.#tl.push(null)}name(){return"SRS 3 for Crisp CSPs"}setRandomness(t){this.#$=t}#th(t){let e=t.index();return null===this.#tl[e]&&(this.#tl[e]=t.neighbors()),this.#tl[e]}#tu(t){this._debugOutput("repair");let e=new i.AssignmentList,s=0;for(let i of t){let r=i.value(),n=0;for(let t of i)n+=1-t.isSatisfied();t:for(let o of i.domain()){if(r===o||(i.assign(o),1!==t.isSatisfied()))continue;let a=n;for(let t of i)if((a-=1-t.isSatisfied())<s)continue t;a>s?(s=a,e.clear(),e.addVariable(i,o)):0!==s&&e.addVariable(i,o)}i.assign(r)}if(e.size()>0){let t=this.#$?e.random():e.at(0);return t.apply(),this._debugOutput("	"+t),!0}return!1}#tf(t,e){let s=[],i=t;for(;;){for(let t of(i=i.parent(),s.length=0,i.getDescendants(s),i.clear(),e))this.#to.delete(t),this.#tn.delete(t);if(e.delete(i)||(this.#to.add(i),null!==i.parent()&&!this.#tu(i.parent().getObject())))break}}#tc(t){for(let e of(this._debugOutput("spread"),this.#tn.add(t),this.#th(t.getObject()))){let s=this.#ta[e.index()];this.#tn.has(s)||this.#to.has(s)||(s.clear(),t.add(s),this.#to.add(s))}}#td(t){this._debugOutput("srs");let e=null===this._timeLimit?Number.MAX_VALUE:Date.now()+this._timeLimit,s=0;for(let e of(this.#tn.clear(),this.#to.clear(),t))this.#to.add(e);let i=this._pro;for(;t.size&&this.#to.size;){if((this._targetDeg??1)<=i.satisfiedConstraintRate())return this._debugOutput("stop: current degree is above the target"),!0;if(this._iterLimit&&this._iterLimit<s++){this._debugOutput("stop: number of iterations has reached the limit");break}if(e<Date.now()){this._debugOutput("stop: time limit has been reached");break}let r=this.#to.values().next().value;this.#to.delete(r),this.#tu(r.getObject())?t.delete(r)||(null!==r.parent()&&this.#tu(r.parent().getObject())?this.#tf(r,t):this.#tc(r)):this.#tc(r)}return!1}exec(){let t=this._pro.violatingConstraints(),e=new Set;for(let s of t){let t=this.#ta[s.index()];e.add(t)}return!!this.#td(e)||0===e.size}}class a{#tg=[];#tm;#tp;constructor(t){this.#tm=null,this.#tp=t}add(t){t.#tm=this,this.#tg.push(t)}clear(){for(let t of this.#tg)t.#tm=null;this.#tg.length=0}getDescendants(t){for(let e of(t.push(this),this.#tg))e.getDescendants(t)}getObject(){return this.#tp}parent(){return this.#tm}}}),n("aVUiT",function(e,s){t(e.exports,"FuzzyForwardChecking",function(){return l});var i=r("kRZEB"),n=r("3Ow8n"),o=r("hbhRl"),a=r("5KOoE");class l extends a.Solver{static CONTINUE=0;static TERMINATE=1;#i;#x=new n.AssignmentList;#tb=[];#tx=0;#D=0;#w=0;#v=!1;#t_=0;#tv;#tD;#tw;#ty=!1;constructor(t,e=null){super(t),this.#i=[...this._pro.variables()],this.#tv=Array(this._pro.variableSize()),this.#y(),this.#tw=Array(this._pro.constraintSize());let s=[];for(let t of this._pro.constraints())1===t.size()&&s.push(t);this.#tD=[...s],e&&(this.#tx=e)}name(){return"Forward Checking for Fuzzy CSPs"}setUsingMinimumRemainingValuesHeuristics(t){this.#v=t}setIncrementStepOfWorstSatisfactionDegree(t){this.#t_=t}setIntensivePruning(t){this.#ty=t}setTargetRate(t=null){if(this._targetDeg=t,null===this._targetDeg)this.#tx=0;else{let t=Number.MIN_VALUE;for(this.#tx=this._targetDeg-t;this.#tx>=this._targetDeg;)t*=10,this.#tx=this._targetDeg-t}}#y(){this.#tb=[];for(let t=0;t<this.#i.length;++t){this.#tb.push(Array(this.#i.length));for(let e=0;e<this.#i.length;++e)e<t&&(this.#tb[t][e]=this._pro.constraintsBetween(this.#i[e],this.#i[t]))}}#E(t,e){return t<e?this.#tb[e][t]:this.#tb[t][e]}#tE(){for(let t of this.#tD){let e=t.at(0),s=e.value(),i=e.domain(),r=e.solverObject;for(let s=0,n=i.size();s<n;++s)e.assign(i.at(s)),t.satisfactionDegree()<=this.#tx&&r.hide(s,-1);if(e.assign(s),r.isEmpty())return!1}return!0}#tC(t,e,s){let i=e.domain(),r=e.solverObject;for(let n=0,o=i.size();n<o;++n)!r.isValueHidden(n)&&(e.assign(i.at(n)),s.satisfactionDegree()<=this.#tx&&r.hide(n,t));return e.clear(),!r.isEmpty()}#tz(t,e,s){let i=e.domain(),r=e.solverObject,n=null;for(let t of s)if(t.isEmpty()&&t!==e){n=t;break}let o=n.domain(),a=n.solverObject;e:for(let l=0,h=i.size();l<h;++l)if(!r.isValueHidden(l)){e.assign(i.at(l));for(let t=0,e=o.size();t<e;++t)if(!a.isValueHidden(t)&&(n.assign(o.at(t)),s.satisfactionDegree()>this.#tx))continue e;r.hide(l,t)}return n.clear(),e.clear(),!r.isEmpty()}#tS(t,e,s){let i=e.domain(),r=e.solverObject,n=null,o=null;for(let t of s)if(t.isEmpty()&&t!==e){if(null===n)n=t;else{o=t;break}}let a=n.domain(),l=o.domain(),h=n.solverObject,u=o.solverObject;e:for(let f=0,c=i.size();f<c;++f)if(!r.isValueHidden(f)){e.assign(i.at(f));for(let t=0,e=a.size();t<e;++t)if(!h.isValueHidden(t)){n.assign(a.at(t));for(let t=0,e=l.size();t<e;++t)if(!u.isValueHidden(t)&&(o.assign(l.at(t)),s.satisfactionDegree()>this.#tx))continue e}r.hide(f,t)}return o.clear(),n.clear(),e.clear(),!r.isEmpty()}#tL(t,e,s,i){let r=e.domain(),n=e.solverObject,o=Array(i-1),a=0;for(let t of s)t.isEmpty()&&t!==e&&(o[a++]=t);let l=Array(o.length);e:for(let i=0,a=r.size();i<a;++i)if(!n.isValueHidden(i)){e.assign(r.at(i)),l.fill(0);s:for(;;){let t=!1;for(let e=0;e<o.length;++e){let s=o[e].domain();if(o[e].solverObject.isValueHidden(l[e])){t=!0;break}o[e].assign(s.at(l[e]))}if(!t&&s.satisfactionDegree()>this.#tx)continue e;for(let t=0;t<o.length&&(l[t]+=1,!(l[t]<o[t].domain().size()));++t)if(l[t]=0,t===o.length-1)break s}n.hide(i,t)}for(let t of o)t.clear();return e.clear(),!n.isEmpty()}#C(t,e){for(let s of this.#i)if(s.isEmpty())for(let i of this.#E(e,s.index())){let e=i.emptyVariableSize();if(1===e){if(!this.#tC(t,s,i))return!1}else if(this.#ty){if(2===e){if(!this.#tz(t,s,i))return!1}else if(3===e){if(!this.#tS(t,s,i))return!1}else if(e>3&&!this.#tL(t,s,i,e))return!1}}return!0}#tO(t){this.#tw.fill(!1);for(let e=0;e<this.#i.length;++e){let s=this.#i[e];if(!(s===t||s.isEmpty()))for(let s of this.#E(t.index(),e)){if(this.#tw[s.index()])continue;let t=s.satisfactionDegree();if(t!==i.Constraint.UNDEFINED&&t<=this.#tx)return!1;this.#tw[s.index()]=!0}}return!0}#tV(){for(let t=0;t<this.#tv.length;++t){let e=this.#tv[t].index();for(let s=t+1;s<this.#tv.length;++s){let i=this.#tv[s];for(let s of this.#E(e,i.index())){let e=i.value(),r=i.domain(),n=i.solverObject;for(let e=0,o=r.size();e<o;++e)!n.isValueHidden(e)&&(i.assign(r.at(e)),s.satisfactionDegree()<=this.#tx&&n.hide(e,t));i.assign(e)}}}}#z(){let t=0,e=Number.MAX_VALUE;for(let s=0;s<this.#i.length;++s){let i=this.#i[s];if(!i.isEmpty())continue;let r=i.domain().size()-i.solverObject.hiddenSize();r<e&&(e=r,t=s)}return t}#S(t){let e=l.CONTINUE,s=this.#v?this.#z():t,i=this.#i[s],r=i.domain(),n=i.solverObject;this.#tv[t]=i;for(let o=0,a=r.size();o<a;++o){if(n.isValueHidden(o))continue;if(this._iterLimit&&this._iterLimit<this.#D++||this.#w<Date.now()){e=l.TERMINATE;break}for(let e of(i.assign(r.at(o)),this.#i))e.solverObject.reveal(t);if(!this.#tO(i)||!this.#C(t,s))continue;let a=t+1;if((e=a===this.#i.length-1?this.#tR(a):this.#S(a))===l.TERMINATE)break}if(e===l.CONTINUE)for(let e of this.#i)e.solverObject.reveal(t);return i.clear(),e}#tR(t){let e=l.CONTINUE,s=this.#i[this.#v?this.#z():t],i=s.domain(),r=s.solverObject;this.#tv[t]=s;for(let t=0,n=i.size();t<n;++t){if(r.isValueHidden(t))continue;if(this._iterLimit&&this._iterLimit<this.#D++||this.#w<Date.now()){e=l.TERMINATE;break}s.assign(i.at(t));let n=this._pro.worstSatisfactionDegree();if(n>this.#tx){if(this.#tx=n,this.#x.setProblem(this._pro),e=l.TERMINATE,null!==this._targetDeg&&this._targetDeg<=this.#tx)break;this.#tE(),this.#tV()}}return s.clear(),e}exec(){for(let t of(this.#w=null===this._timeLimit?Number.MAX_VALUE:Date.now()+this._timeLimit,this.#D=0,this.#i))t.solverObject=new o.DomainPruner(t.domain().size());if(this._pro.clearAllVariables(),!this.#tE())return!1;let t=!1;for(;;){if(this.#S(0)===l.TERMINATE){if(this._iterLimit&&this._iterLimit<this.#D++){this._debugOutput("stop: number of iterations has reached the limit");break}if(this.#w<Date.now()){this._debugOutput("stop: time limit has been reached");break}}if(this.#x.isEmpty())break;if(this._debugOutput(`	found a solution: ${this.#tx}`),this.foundSolution(this.#x,this.#tx)){t=!0;break}if(null===this._targetDeg)t=!0,this.#tx+=this.#t_;else if(this._targetDeg<=this.#tx){this._debugOutput("stop: current degree is above the target"),t=!0;break}for(let t of this.#i)t.solverObject.revealAll()}for(let t of(this.#x.apply(),this.#i))t.solverObject=null;return t}}}),n("iSBsL",function(e,s){t(e.exports,"FuzzyForwardCheckingBc",function(){return a});var i=r("3Ow8n"),n=r("hbhRl"),o=r("5KOoE");class a extends o.Solver{static CONTINUE=0;static TERMINATE=1;#i;#x=new i.AssignmentList;#tb=[];#tx=0;#D=0;#w=0;#v=!1;#t_=0;constructor(t,e=null){super(t),this.#i=[...this._pro.variables()],this.#y(),this.#tx=Math.max(0,t.worstSatisfactionDegree()),e&&(this.#tx=e)}name(){return"Forward Checking for Fuzzy CSPs of Binary Constraints"}setUsingMinimumRemainingValuesHeuristics(t){this.#v=t}setIncrementStepOfWorstSatisfactionDegree(t){this.#t_=t}setTargetRate(t=null){if(this._targetDeg=t,null===this._targetDeg)this.#tx=0;else{let t=Number.MIN_VALUE;for(this.#tx=this._targetDeg-t;this.#tx>=this._targetDeg;)t*=10,this.#tx=this._targetDeg-t}}#y(){this.#tb=[];for(let t=0;t<this.#i.length;++t){this.#tb.push(Array(this.#i.length));for(let e=0;e<this.#i.length;++e)e<t&&(this.#tb[t][e]=this._pro.constraintsBetween(this.#i[e],this.#i[t]))}}#E(t,e){return t<e?this.#tb[e][t]:this.#tb[t][e]}#tC(t,e,s){let i=e.domain(),r=e.solverObject;for(let n=0,o=i.size();n<o;++n)!r.isValueHidden(n)&&(e.assign(i.at(n)),s.satisfactionDegree()<=this.#tx&&r.hide(n,t));return e.clear(),!r.isEmpty()}#C(t,e){for(let s of this.#i)if(s.isEmpty()){for(let i of this.#E(e,s.index()))if(2===i.size()&&!this.#tC(t,s,i))return!1}return!0}#z(){let t=0,e=Number.MAX_VALUE;for(let s=0;s<this.#i.length;++s){let i=this.#i[s];if(!i.isEmpty())continue;let r=i.domain().size()-i.solverObject.hiddenSize();r<e&&(e=r,t=s)}return t}#S(t){let e=a.CONTINUE,s=this.#v?this.#z():t,i=this.#i[s],r=i.domain(),n=i.solverObject;for(let o=0,l=r.size();o<l;++o){if(n.isValueHidden(o))continue;if(this._iterLimit&&this._iterLimit<this.#D++||this.#w<Date.now()){e=a.TERMINATE;break}for(let e of(i.assign(r.at(o)),this.#i))e.solverObject.reveal(t);if(!this.#C(t,s))continue;let l=t+1;if((e=l===this.#i.length-1?this.#tR(l):this.#S(l))===a.TERMINATE)break}if(e===a.CONTINUE)for(let e of this.#i)e.solverObject.reveal(t);return i.clear(),e}#tR(t){let e=a.CONTINUE,s=this.#i[this.#v?this.#z():t],i=s.domain(),r=s.solverObject;for(let t=0,n=i.size();t<n;++t){if(r.isValueHidden(t))continue;if(this._iterLimit&&this._iterLimit<this.#D++||this.#w<Date.now()){e=a.TERMINATE;break}s.assign(i.at(t));let n=this._pro.worstSatisfactionDegree();if(n>this.#tx&&(this.#tx=n,this.#x.setProblem(this._pro),e=a.TERMINATE,null!==this._targetDeg&&this._targetDeg<=this.#tx))break}return s.clear(),e}exec(){for(let t of(this.#w=null===this._timeLimit?Number.MAX_VALUE:Date.now()+this._timeLimit,this.#D=0,this.#i))t.solverObject=new n.DomainPruner(t.domain().size());this._pro.clearAllVariables();let t=new i.AssignmentList,e=!1;for(;;){if(this.#S(0)===a.TERMINATE){if(this._iterLimit&&this._iterLimit<this.#D++){this._debugOutput("stop: number of iterations has reached the limit");break}if(this.#w<Date.now()){this._debugOutput("stop: time limit has been reached");break}}if(this.#x.isEmpty())break;if(t.setAssignmentList(this.#x),this.#x.clear(),this._debugOutput(`	found a solution: ${this.#tx}`),this.foundSolution(t,this.#tx)){e=!0;break}if(null===this._targetDeg){if(e=!0,this.#tx+this.#t_>1)break;this.#tx+=this.#tx+this.#t_>1?0:this.#t_}else if(this._targetDeg<=this.#tx){this._debugOutput("stop: current degree is above the target"),e=!0;break}for(let t of this.#i)t.solverObject.revealAll()}for(let e of(t.apply(),this.#i))e.solverObject=null;return e}}}),n("9C8yW",function(e,s){t(e.exports,"FlexibleLocalChanges",function(){return a});var i=r("kRZEB"),n=r("3Ow8n"),o=r("5KOoE");class a extends o.Solver{static #M(t,e){let s=new Set(t);return s.add(e),s}static #U(t,e){let s=new Set(t);return s.delete(e),s}#tN=0;#tk=0;#D=0;#w=0;#W=0;constructor(t){super(t),this.#tA()}name(){return"Flexible Local Changes"}#tF(t,e){let s=new Map;for(let t of e)if(t.isDefined())for(let e of t)s.has(e)?s.set(e,(s.get(e)??0)+1):s.set(e,1);let i=[...t];i.sort((t,e)=>{let i=0,r=0;return(s.has(t)&&(i=s.get(t)??0),s.has(e)&&(r=s.get(e)??0),i<r)?1:i>r?-1:0});let r=new Set;for(let t of i){let s=!1;for(let t of e)if(t.isDefined()){s=!0;break}if(!s)break;t.clear(),r.add(t)}return r}#tA(){let t=1,e=0;for(let s of this._pro.variables())for(let i of s){let s=i.lowestConsistencyDegree(),r=i.highestConsistencyDegree();s<t&&(t=s),r>e&&(e=r)}this.#tk=t,this.#tN=e}#tI(t,e,s,i,r,n,o){let l=this.#tF(e,n),h=a.#M(t,s),u=e.difference(l);return this.#tT(h,u,l,i,Math.min(r,i),o)}#tM(t,e,s,i,r,o){let a=this.#tk;if(0===s.domain().size())return a;let l=(0,n.AssignmentList).fromVariables(e),h=s.domain().at(0),u=(0,n.AssignmentList).fromVariables(e);for(let f=0;f<s.domain().size()&&a<r;++f){let c=s.domain().at(f);s.assign(c);let d=Math.min(i,this.#tU(t,s,a,o));if(d>Math.max(a,o)){let i=new Set,f=Math.min(Math.min(d,r),this.#tW(t,e,s,d,r,i));if(f>a&&(a=f,h=c,l=(0,n.AssignmentList).fromVariables(e)),i.size){let f=this.#tI(t,e,s,d,r,i,Math.max(o,a));if(-1!==this.#W)return a;f>a&&(a=f,h=c,l=(0,n.AssignmentList).fromVariables(e)),u.apply()}}}return l.apply(),s.assign(h),a}#tT(t,e,s,i,r,n){if(this._debugOutput(`X1 ${t.size}, X2' ${e.size}, X3' ${s.size}`),null!==this._targetDeg&&this._targetDeg<=this._pro.worstSatisfactionDegree())return this._debugOutput("stop: current degree is above the target"),this.#W=1,r;if(this._iterLimit&&this._iterLimit<this.#D++)return this._debugOutput("stop: number of iterations has reached the limit"),this.#W=0,r;if(this.#w<Date.now())return this._debugOutput("stop: time limit has been reached"),this.#W=0,r;if(0===s.size)return r;let o=s.values().next().value,l=this.#tM(t,e,o,i,r,n);return -1!==this.#W?r:l<n?this.#tk:(e=a.#M(e,o),s=a.#U(s,o),this.#tT(t,e,s,i,l,n))}#tj(t,e){let s=new Set;for(let e of t)for(let t of e)s.add(t);let r=1;for(let t of s){let e=t.satisfactionDegree();e!==i.Constraint.UNDEFINED&&e<r&&(r=e)}for(let t of this._pro.constraints())t.lowestConsistencyDegree()<this.#tN&&e.add(t);return r}#tU(t,e,s,r){let n=1,o=new Set;for(let s of t)for(let t of this._pro.constraintsBetween(s,e))o.add(t);for(let t of o){let e=t.satisfactionDegree();if(e!==i.Constraint.UNDEFINED&&(e<n&&(n=e),n<=s||n<=r))break}return n}#tW(t,e,s,r,n,o){let a=1,l=new Set;for(let e of t)for(let t of this._pro.constraintsBetween(e,s))l.add(t);for(let t of e)for(let e of this._pro.constraintsBetween(t,s))l.add(e);for(let t of l){let e=t.satisfactionDegree();e!==i.Constraint.UNDEFINED&&e<a&&(a=e)}for(let t of l){let e=t.satisfactionDegree();e!==i.Constraint.UNDEFINED&&(e<r||e<n)&&o.add(t)}return a}exec(){let t;this.#w=null===this._timeLimit?Number.MAX_VALUE:Date.now()+this._timeLimit,this.#D=0,this.#W=-1;let e=this._pro.worstSatisfactionDegree();0===this._pro.emptyVariableSize()&&this._pro.clearAllVariables();let s=new Set,i=new Set,r=new Set;for(let t of this._pro.variables())(t.isEmpty()?r:i).add(t);let o=new Set,a=this.#tj(i,o),l=null;0===r.size?(t=a,l=(0,n.AssignmentList).fromVariables(i)):t=this.#tk;let h=this.#tF(i,o).union(r),u=i.difference(h),f=this.#tT(s,u,h,this.#tN,this.#tN,t);return f<t&&null!==l&&l.apply(),(f=this._pro.worstSatisfactionDegree())>e&&f>0&&(0!==this.#W||null===this._targetDeg)}}}),n("abo2u",function(e,s){t(e.exports,"FlexibleLocalChangesEx",function(){return a});var i=r("kRZEB"),n=r("3Ow8n"),o=r("5KOoE");class a extends o.Solver{static #M(t,e){let s=new Set(t);return s.add(e),s}#tN=0;#tk=0;#D=0;#w=0;#W=0;constructor(t){super(t),this.#tA()}name(){return"Flexible Local Changes Ex"}#tF(t,e){let s=new Map;for(let t of e)if(t.isDefined())for(let e of t)s.has(e)?s.set(e,(s.get(e)??0)+1):s.set(e,1);let i=[...t];i.sort((t,e)=>{let i=0,r=0;return(s.has(t)&&(i=s.get(t)??0),s.has(e)&&(r=s.get(e)??0),i<r)?1:i>r?-1:0});let r=new Set;for(let t of i){let s=!1;for(let t of e)if(t.isDefined()){s=!0;break}if(!s)break;t.clear(),r.add(t)}return r}#tA(){let t=1,e=0;for(let s of this._pro.variables())for(let i of s){let s=i.lowestConsistencyDegree(),r=i.highestConsistencyDegree();s<t&&(t=s),r>e&&(e=r)}this.#tk=t,this.#tN=e}#tI(t,e,s,i,r,n,o){let l=this.#tF(e,n),h=a.#M(t,s),u=e.difference(l);return this.#tT(h,u,l,i,Math.min(r,i),o)}#tM(t,e,s,i,r,o){let a=this.#tk;if(0===s.domain().size())return a;let l=(0,n.AssignmentList).fromVariables(e),h=s.domain().at(0),u=(0,n.AssignmentList).fromVariables(e);for(let f=0;f<s.domain().size()&&a<r;++f){let c=s.domain().at(f);s.assign(c);let d=Math.min(i,this.#tU(t,s,a,o));if(d>Math.max(a,o)){let i=new Set,f=Math.min(Math.min(d,r),this.#tW(t,e,s,d,r,i));if(f>a&&(a=f,h=c,l=(0,n.AssignmentList).fromVariables(e)),i.size){let f=this.#tI(t,e,s,d,r,i,Math.max(o,a));if(-1!==this.#W)return a;f>a&&(a=f,h=c,l=(0,n.AssignmentList).fromVariables(e)),u.apply()}}}return l.apply(),s.assign(h),a}#tT(t,e,s,i,r,n){for(e=new Set(e),s=new Set(s);;){if(this._debugOutput(`X1 ${t.size}, X2' ${e.size}, X3' ${s.size}`),null!==this._targetDeg&&this._targetDeg<=this._pro.worstSatisfactionDegree())return this._debugOutput("stop: current degree is above the target"),this.#W=1,r;if(this._iterLimit&&this._iterLimit<this.#D++)return this._debugOutput("stop: number of iterations has reached the limit"),this.#W=0,r;if(this.#w<Date.now())return this._debugOutput("stop: time limit has been reached"),this.#W=0,r;if(0===s.size)return r;let o=s.values().next().value,a=this.#tM(t,e,o,i,r,n);if(-1!==this.#W)return r;if(a<n)return this.#tk;e.add(o),s.delete(o),r=a}}#tj(t,e){let s=new Set;for(let e of t)for(let t of e)s.add(t);let r=1;for(let t of s){let e=t.satisfactionDegree();e!==i.Constraint.UNDEFINED&&e<r&&(r=e)}for(let t of this._pro.constraints())t.lowestConsistencyDegree()<this.#tN&&e.add(t);return r}#tU(t,e,s,r){let n=1,o=new Set;for(let s of t)for(let t of this._pro.constraintsBetween(s,e))o.add(t);for(let t of o){let e=t.satisfactionDegree();if(e!==i.Constraint.UNDEFINED&&(e<n&&(n=e),n<=s||n<=r))break}return n}#tW(t,e,s,r,n,o){let a=1,l=new Set;for(let e of t)for(let t of this._pro.constraintsBetween(e,s))l.add(t);for(let t of e)for(let e of this._pro.constraintsBetween(t,s))l.add(e);for(let t of l){let e=t.satisfactionDegree();e!==i.Constraint.UNDEFINED&&e<a&&(a=e)}for(let t of l){let e=t.satisfactionDegree();e!==i.Constraint.UNDEFINED&&(e<r||e<n)&&o.add(t)}return a}exec(){let t;this.#w=null===this._timeLimit?Number.MAX_VALUE:Date.now()+this._timeLimit,this.#D=0,this.#W=-1;let e=this._pro.worstSatisfactionDegree();0===this._pro.emptyVariableSize()&&this._pro.clearAllVariables();let s=new Set,i=new Set,r=new Set;for(let t of this._pro.variables())(t.isEmpty()?r:i).add(t);let o=new Set,a=this.#tj(i,o),l=null;0===r.size?(t=a,l=(0,n.AssignmentList).fromVariables(i)):t=this.#tk;let h=this.#tF(i,o).union(r),u=i.difference(h),f=this.#tT(s,u,h,this.#tN,this.#tN,t);return f<t&&null!==l&&l.apply(),(f=this._pro.worstSatisfactionDegree())>e&&f>0&&(0!==this.#W||null===this._targetDeg)}}}),n("bvrdB",function(e,s){t(e.exports,"FuzzyBreakout",function(){return o});var i=r("3Ow8n"),n=r("5KOoE");class o extends n.Solver{#$=!0;#G;#tB=0;constructor(t){super(t),this.#G=Array(this._pro.constraintSize()),this.#G.fill(1)}name(){return"Fuzzy Breakout"}setRandomness(t){this.#$=t}#K(t,e){let s=0;for(let i of t){let t=i.value(),r=0;for(let t of i)r+=(1-t.satisfactionDegree())*this.#G[t.index()];t:for(let n of i.domain()){if(t===n)continue;i.assign(n);let o=r;for(let t of i)if((o-=(1-t.satisfactionDegree())*this.#G[t.index()])<s)continue t;o>s?(s=o,e.clear(),e.addVariable(i,n)):0!==s&&e.addVariable(i,n)}i.assign(t)}}#tP(t){let e=new Set;for(let s of t)for(let t of s)e.add(t);return Array.from(e)}exec(){let t=null===this._timeLimit?Number.MAX_VALUE:Date.now()+this._timeLimit,e=0;for(let t of this._pro.variables())t.isEmpty()&&t.assign(t.domain().at(0));let s=this._pro.worstSatisfactionDegree(),r=new i.AssignmentList,n=new i.AssignmentList;for(;;){let[s,i]=this._pro.constraintsWithWorstSatisfactionDegree();if(null!==this._targetDeg&&this._targetDeg<=i)return this._debugOutput("stop: current degree is above the target"),!0;if(this._iterLimit&&this._iterLimit<e++){this._debugOutput("stop: number of iterations has reached the limit");break}if(t<Date.now()){this._debugOutput("stop: time limit has been reached");break}if(this._debugOutput("worst satisfaction degree: "+i),this.#tB<i&&(n.setProblem(this._pro),this.#tB=i,this.foundSolution(n,this.#tB)))return!0;if(this.#K(this.#tP(s),r),0<r.size()){let t=this.#$?r.random():r.at(0);t.apply(),r.clear(),this._debugOutput("	"+t)}else{for(let t of s)this.#G[t.index()]+=1;this._debugOutput("breakout")}}return!!(null===this._targetDeg&&s<this._pro.worstSatisfactionDegree())}}}),n("fPF5Z",function(e,s){t(e.exports,"FuzzyGENET",function(){return o});var i=r("3Ow8n"),n=r("5KOoE");class o extends n.Solver{static nextInt(t){return Math.floor(Math.random()*Math.floor(t))}#Z=[];#Q=[];#tX;constructor(t,e=1){super(t),this.#tX=e}name(){return"Fuzzy GENET"}#Y(t){this._debugOutput("network creation start");let e=[];for(let t of this._pro.variables()){if(0===t.domain().size())return!1;this.#Z.push(new a(t))}for(let s of this._pro.constraints())if(1===s.size()){let i=s.at(0),r=this.#Z[i.index()];for(let n=0;n<r.size();++n){let o=i.value();i.assign(r.get(n)._value),s.satisfactionDegree()<=t&&e.push(new l(s,r.get(n))),i.assign(o)}}else{let i=s.at(0),r=s.at(1),n=this.#Z[i.index()],o=this.#Z[r.index()];for(let a=0;a<n.size();++a){let h=i.value();i.assign(n.get(a)._value);for(let i=0;i<o.size();++i){let h=r.value();r.assign(o.get(i)._value),s.satisfactionDegree()<=t&&e.push(new l(s,n.get(a),o.get(i))),r.assign(h)}i.assign(h)}}for(let t of this.#Z)for(let e of t._neurons)e.lockConnections();return this.#Q=e,this._debugOutput("network creation complete"),!0}#J(t){for(let e=t.length;e>1;--e){let s=o.nextInt(e),i=t[e-1];t[e-1]=t[s],t[s]=i}return t}exec(){if(!this.#Y(this.#tX))throw Error();let t=null===this._timeLimit?Number.MAX_VALUE:Date.now()+this._timeLimit,e=0,s=new i.AssignmentList,r=[];for(let t=0;t<this.#Z.length;++t)r.push(t);let n=this._pro.worstSatisfactionDegree(),o=!1;for(;;){if(this._iterLimit&&this._iterLimit<e++){this._debugOutput("stop: number of iterations has reached the limit");break}if(t<Date.now()){this._debugOutput("stop: time limit has been reached");break}let i=!1;for(let t of this.#J(r))this.#Z[t].setActivityMaximumInput()&&(i=!0);if(i){for(let t of this.#Z)t.applyToVariable();let t=this._pro.worstSatisfactionDegree();if(n<t){if(n=t,this._debugOutput(`worst satisfaction degree: ${t}`),s.setProblem(this._pro),this.foundSolution(s,t)){o=!0;break}if(null===this._targetDeg)o=!0;else if(this._targetDeg<=n){this._debugOutput("stop: current degree is above the target"),o=!0;break}}}else{for(let t of this.#Q)t.refreshWeight();continue}}return s.apply(),o}}class a{static nextInt(t){return Math.floor(Math.random()*Math.floor(t))}#O;#h=0;#tt=[];_neurons=[];constructor(t){for(let e of(this.#O=t,t.domain()))this._neurons.push(new h(e));this.#te(a.nextInt(this._neurons.length))}#te(t){for(let t of this._neurons)t._isActive=!1;this._neurons[t]._isActive=!0,this.#h=t}applyToVariable(){this.#O.assign(this._neurons[this.#h]._value)}get(t){return this._neurons[t]}neurons(){return this._neurons}setActivityMaximumInput(){this.#tt.length=0;let t=Number.NEGATIVE_INFINITY,e=!1;for(let s=0;s<this._neurons.length;++s){let i=this._neurons[s].getInput();t<=i&&(t<i&&(t=i,this.#tt.length=0,e=!1),this.#tt.push(s),this.#h===s&&(e=!0))}return!e&&0!==this.#tt.length&&(this.#te(this.#tt[a.nextInt(this.#tt.length)]),!0)}size(){return this._neurons.length}}class l{#tH;#ts;#ti;_weight;constructor(t,e,s=null){this._weight=t.satisfactionDegree()-1,this.#tH=t,this.#ts=e,this.#ts.addConnection(this),this.#ti=s,null!==this.#ti&&this.#ti.addConnection(this)}getNeuron(t){return t===this.#ts?this.#ti:t===this.#ti?this.#ts:null}refreshWeight(){this.#ts._isActive&&(null===this.#ti||this.#ti._isActive)&&(1===this.#tH.size()?this._weight+=this.#tH.fuzzyRelation().satisfactionDegree(this.#ts._value)-1:this._weight+=this.#tH.fuzzyRelation().satisfactionDegree(this.#ts._value,this.#ti._value)-1)}}class h{#tr=[];#Q=[];_value;_isActive=!1;constructor(t){this._value=t}addConnection(t){this.#tr.push(t)}lockConnections(){this.#Q=[...this.#tr],this.#tr=null}getInput(){let t=0;for(let e of this.#Q){let s=e.getNeuron(this);t+=e._weight*(null===s||s._isActive?1:0)}return t}}}),n("7Pq8R",function(e,s){t(e.exports,"SRS3",function(){return a});var i=r("kRZEB"),n=r("3Ow8n"),o=r("5KOoE");class a extends o.Solver{static REPAIR_THRESHOLD=0;#tn=new Set;#to=new Set;#ta=[];#tl=[];#t$=new Set;#D=0;#w=0;#$=!0;constructor(t){for(let e of(super(t),this._pro.constraints()))this.#ta.push(new l(e)),this.#tl.push(null)}name(){return"SRS 3"}#th(t){let e=t.index();return null===this.#tl[e]&&(this.#tl[e]=t.neighbors()),this.#tl[e]}#tu(t){this._debugOutput("repair");let e=new n.AssignmentList,s=t.satisfactionDegree(),r=this._pro.worstSatisfactionDegree(),o=t.satisfactionDegree();for(let n of t){let l=n.value();t:for(let h of n.domain()){if(l===h)continue;n.assign(h);let u=t.satisfactionDegree();if(!(s>u)&&!(o-u>a.REPAIR_THRESHOLD)){for(let e of n){if(e===t)continue;let s=e.satisfactionDegree();if(s!==i.Constraint.UNDEFINED&&s<r)continue t}u>o&&(o=u,e.clear()),e.addVariable(n,h)}}n.assign(l)}if(e.size()>0){let t=this.#$?e.random():e.at(0);return t.apply(),this._debugOutput("	"+t),!0}return!1}#tf(t){this._debugOutput("shrink");let e=!1;for(;;){if(t=t.parent(),this.#t$.delete(t)){e=!0;break}if(!this.#tu(t.parent().getObject()))break}let s=[];for(let e of(t.getDescendants(s),s))e.clear(),this.#to.delete(e),this.#tn.delete(e);e||this.#to.add(t)}#tc(t){for(let e of(this._debugOutput("spread"),this.#tn.add(t),this.#th(t.getObject()))){let s=this.#ta[e.index()];this.#tn.has(s)||this.#to.has(s)||(t.add(s),this.#to.add(s))}}#td(){this._debugOutput("srs");let[t]=this._pro.constraintsWithWorstSatisfactionDegree();for(let e of t){let t=this.#ta[e.index()];t.setParent(null),this.#t$.add(t)}for(let t of(this.#tn.clear(),this.#to.clear(),this.#t$))this.#to.add(t);for(;this.#t$.size&&this.#to.size;){if(this._iterLimit&&this._iterLimit<this.#D++)return this._debugOutput("stop: number of iterations has reached the limit"),!1;if(this.#w<Date.now())return this._debugOutput("stop: time limit has been reached"),!1;let t=this.#to.values().next().value;if(this.#to.delete(t),this.#tu(t.getObject())){if(this.#t$.delete(t))continue;if(this.#tu(t.parent().getObject())){this.#tf(t);continue}}this.#tc(t)}return!0}exec(){if(this.#w=null===this._timeLimit?Number.MAX_VALUE:Date.now()+this._timeLimit,this.#D=0,this._targetDeg&&this._targetDeg<=this._pro.worstSatisfactionDegree())return!0;let t=new n.AssignmentList,e=!1;for(;this.#td()&&!this.#t$.size;){let s=this._pro.worstSatisfactionDegree();if(this._debugOutput(`	found a solution: ${s}	${this._targetDeg}`),t.setProblem(this._pro),this.foundSolution(t,s)){e=!0;break}if(null===this._targetDeg)e=!0;else if(this._targetDeg<=s){this._debugOutput("stop: current degree is above the target"),e=!0;break}}return e}setRandomness(t){this.#$=t}}class l{#tg=[];#tm;#tp;constructor(t){this.#tm=null,this.#tp=t}add(t){t.#tm=this,this.#tg.push(t)}clear(){for(let t of this.#tg)t.#tm=null;this.#tg.length=0}getDescendants(t){for(let e of(t.push(this),this.#tg))e.getDescendants(t)}getObject(){return this.#tp}parent(){return this.#tm}setParent(t){this.#tm=t}}}),n("47GBg",function(e,s){t(e.exports,"SRS3_PF",function(){return a});var i=r("3Ow8n"),n=r("7VBER"),o=r("7Pq8R");class a extends o.SRS3{constructor(t){super(t)}name(){return"SRS 3 + PF"}exec(){let t=0,e=0;this._debug&&(t=this._pro.worstSatisfactionDegree(),e=this._pro.emptyVariableSize());let s=new i.AssignmentList;s.setProblem(this._pro);let r=super.exec();return r&&(0,n.PostStabilization).apply(this._pro,s),this._debugOutput(`result: ${r?"success":"failure"}`),this._debugOutput(`satisfaction degree: ${t} -> ${this._pro.worstSatisfactionDegree()}`),this._debugOutput(`unassigned size: ${e} -> ${this._pro.emptyVariableSize()}`),r}}}),n("7VBER",function(e,s){t(e.exports,"PostStabilization",function(){return i});class i{static apply(t,e){let s;console.log("start post-stabilization");let i=0;do{console.log("post-stabilization: count "+i++),s=!1;let r=t.worstSatisfactionDegree(),n=t.variables();for(let i=0;i<n.length;++i){let o=n[i],a=o.value(),l=e.at(i);a!==l.value()&&(l.apply(),t.worstSatisfactionDegree()>=r?s=!0:o.assign(a))}}while(s)return console.log("finish post-stabilization"),!0}}}),n("9sqlb",function(t,e){}),n("lbFyh",function(t,e){}),n("aUUqy",function(t,e){r("2Ga1d"),r("4MQ09")}),n("iClid",function(t,e){}),n("kVxbQ",function(e,s){t(e.exports,"Model",function(){return i});class i{_debug=!0;#p=t=>console.log(t);setDebugMode(t){this._debug=t}setDebugOutput(t){this._debugOutput=t}_debugOutput(t){this._debug&&this.#p(t)}}})}();
//# sourceMappingURL=worker.28e2d56a.js.map
