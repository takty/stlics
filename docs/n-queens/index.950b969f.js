function t(t,e,s,i){Object.defineProperty(t,e,{get:s,set:i,enumerable:!0,configurable:!0})}var e="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof global?global:{},s={},i={},r=e.parcelRequire95bc;null==r&&((r=function(t){if(t in s)return s[t].exports;if(t in i){var e=i[t];delete i[t];var r={id:t,exports:{}};return s[t]=r,e.call(r.exports,r,r.exports),r.exports}var n=Error("Cannot find module '"+t+"'");throw n.code="MODULE_NOT_FOUND",n}).register=function(t,e){i[t]=e},e.parcelRequire95bc=r);var n=r.register;n("4NRei",function(e,s){t(e.exports,"SolverFactory",function(){return r("c3uSL").SolverFactory}),r("4qG0Z"),r("e7Kt8"),r("66bm1"),r("pU1Sy"),r("jQeFi"),r("b2Gif"),r("3sJHX"),r("kjEaa"),r("dldqc"),r("ebW8a"),r("94CnG"),r("AQJiv"),r("dVggH"),r("irBK2"),r("jWYxK"),r("c3uSL"),r("2TCdz"),r("kpsHE"),r("ksORy"),r("9NLdx"),r("kYz6B"),r("8e260"),r("dfK30"),r("9wYtf"),r("5pbCs"),r("9BMnn"),r("dqtH5"),r("2AvJP"),r("aDEbX"),r("b9ZRJ"),r("envE3"),r("gXtgR"),r("gIE9K"),r("6E6oA"),r("SSONT"),r("blH6y"),r("6nrDu"),r("5V057"),r("8B8kR")}),n("4qG0Z",function(e,s){t(e.exports,"Problem",function(){return c});var i=r("pU1Sy"),n=r("kjEaa"),o=r("3sJHX"),a=r("dldqc"),l=r("ebW8a"),h=r("94CnG"),u=r("AQJiv"),f=r("dVggH");class c{#t=(t,e)=>new i.Variable(t,e);#e=(t,e)=>1===e.length?new l.Constraint1(t,e[0]):2===e.length?new h.Constraint2(t,e[0],e[1]):3===e.length?new u.Constraint3(t,e[0],e[1],e[2]):new f.ConstraintN(t,...e);#s=!1;#i=[];#r=[];setVariableFactory(t){this.#t=t}setConstraintFactory(t){this.#e=t}addVariable(t){t.setIndex(this.#i.length),this.#i.push(t)}createDomain(t){return"values"in t?new o.DomainArbitrary(t.values):"min"in t&&"max"in t?new n.DomainRanged(t.min,t.max):null}createVariable(t){if("variable"in t){let e=this.#t(this,t.variable.domain());return this.addVariable(e),e.setName(e.name()),e.assign(e.value()),e}{if(void 0!==t.value&&!t.domain.contains(t.value))throw Error();let e=this.#t(this,t.domain);return this.addVariable(e),t.name&&e.setName(t.name),t.value&&e.assign(t.value),e}}createConstraint(t){for(let e of t.variables)if(e.owner()!==this)return null;let e=this.#e(t.relation,t.variables);for(let s of(e.setIndex(this.#r.length),this.#r.push(e),t.variables))s.connect(e);return e.isFuzzy()&&(this.#s=!0),"name"in t&&e.setName(t.name),e}removeConstraint(t){let e=this.#r.indexOf(t);this.#r.splice(e,1);for(let t=e;t<this.#r.length;++t)this.#r[t].setIndex(t);for(let e of t)e.disconnect(t);for(let t of(this.#s=!1,this.#r))if(t.isFuzzy()){this.#s=!0;break}}clearAllVariables(){for(let t of this.#i)t.clear()}reverseVariables(){this.#i.reverse();for(let t=0;t<this.#i.length;++t)this.#i[t].setIndex(t)}sortVariables(t){this.#i.sort(t);for(let t=0;t<this.#i.length;++t)this.#i[t].setIndex(t)}variableSize(){return this.#i.length}variableAt(t){return this.#i[t]}variableOf(t){for(let e of this.#i)if(e.name()===t)return e;return null}hasVariable(t){return this.#i.includes(t)}variables(){return this.#i}constraintSize(){return this.#r.length}constraintAt(t){return this.#r[t]}constraintOf(t){for(let e of this.#r)if(e.name()===t)return e;return null}hasConstraint(t){return this.#r.includes(t)}constraints(){return this.#r}constraintsBetween(t,e){let s=[];for(let i of t)i.has(e)&&s.push(i);return s}constraintsWithWorstSatisfactionDegree(){let t=[],e=1;for(let s of this.#r){let i=s.satisfactionDegree();i<e?(e=i,t.length=0,t.push(s)):i-e<10*Number.MIN_VALUE&&t.push(s)}return[t,e]}worstSatisfactionDegree(){let t=1;for(let e of this.#r){let s=e.satisfactionDegree();if(s===a.Constraint.UNDEFINED)return a.Constraint.UNDEFINED;s<t&&(t=s)}return t}averageSatisfactionDegree(){let t=0;for(let e of this.#r)t+=e.satisfactionDegree();return t/this.#r.length}emptyVariableSize(){let t=0;for(let e of this.#i)e.isEmpty()&&t++;return t}constraintDensity(){return this.constraintSize()/this.variableSize()}hasEmptyDomain(){for(let t of this.#i)if(0===t.domain().size())return!0;return!1}isFuzzy(){return this.#s}}}),n("pU1Sy",function(e,s){t(e.exports,"Variable",function(){return n});var i=r("66bm1");class n extends i.Element{static #n=Number.MIN_VALUE;#o;#a;#l=n.#n;#r=[];constructor(t,e){super(),this.#o=t,this.#a=e}toString(){let t=this.name(),e=t?`(${t})`:"",s=this.isEmpty()?"<empty>":""+this.value();return`x${this.index()}${e} = ${s}`}size(){return this.#r.length}at(t){return this.#r.at(t)}has(t){return this.#r.includes(t)}indexOf(t){return this.#r.indexOf(t)}neighbors(){let t=[];for(let e of this.#r)for(let s of e)s!==this&&t.push(s);return t}[Symbol.iterator](){return this.#r[Symbol.iterator]()}owner(){return this.#o}connect(t){if(this.#r.includes(t))throw RangeError();this.#r.push(t)}disconnect(t){if(!this.#r.includes(t))throw RangeError();this.#r=this.#r.filter(e=>e!==t)}domain(t){if(void 0===t)return this.#a;this.#a=t,this.clear()}assign(t){this.#l=t}clear(){this.assign(n.#n)}value(){return this.#l}isEmpty(){return this.value()===n.#n}}}),n("66bm1",function(e,s){t(e.exports,"Element",function(){return i});class i{#h=-1;#u="";userObject=null;solverObject=null;setIndex(t){this.#h=t}setName(t){this.#u=t}index(){return this.#h}name(){return this.#u}}}),n("kjEaa",function(e,s){t(e.exports,"DomainRanged",function(){return n});var i=r("b2Gif");class n extends i.Domain{#f;#c;constructor(t,e){super(),this.#f=0|t,this.#c=0|e}contains(t){return this.#f<=t&&t<=this.#c}indexOf(t){return this.#f<=t&&t<=this.#c?t-this.#f:-1}size(){return this.#c-this.#f+1}at(t){return this.#f+t}[Symbol.iterator](){let t=this.#f,e=this.#c;return{next:()=>t<=e?{value:t++,done:!1}:{value:null,done:!0}}}}}),n("b2Gif",function(e,s){t(e.exports,"Domain",function(){return i});class i{random(){return this.at(Math.floor(Math.random()*this.size()))}}}),n("3sJHX",function(e,s){t(e.exports,"DomainArbitrary",function(){return n});var i=r("b2Gif");class n extends i.Domain{#d;constructor(t){super(),this.#d=[...t]}contains(t){return this.#d.includes(t)}indexOf(t){return this.#d.indexOf(t)}size(){return this.#d.length}at(t){return this.#d[t]}[Symbol.iterator](){return this.#d[Symbol.iterator]()}}}),n("dldqc",function(e,s){t(e.exports,"Constraint",function(){return n});var i=r("66bm1");class n extends i.Element{static UNDEFINED=-1;rel;constructor(t){super(),this.rel=t}crispRelation(){return this.rel}fuzzyRelation(){return this.rel}isFuzzy(){return"satisfactionDegree"in this.rel}toString(){let t=this.name(),e=t?`(${t})`:"",s=this.satisfactionDegree(),i=s===n.UNDEFINED?"UNDEFINED":""+s;return`c${this.index()}${e} = ${i}`}}}),n("ebW8a",function(e,s){t(e.exports,"Constraint1",function(){return n});var i=r("dldqc");class n extends i.Constraint{#i=[];constructor(t,e){super(t),this.#i=[e]}size(){return 1}at(t){return this.#i.at(t)}has(t){return t===this.#i[0]}indexOf(t){return t===this.#i[0]?0:-1}neighbors(){let t=[];for(let e of this.#i[0])e!==this&&t.push(e);return t}[Symbol.iterator](){return this.#i[Symbol.iterator]()}emptyVariableSize(){return this.#i[0].isEmpty()?1:0}isDefined(){return!this.#i[0].isEmpty()}isSatisfied(){return this.#i[0].isEmpty()?i.Constraint.UNDEFINED:this.crispRelation().isSatisfied(this.#i[0].value())?1:0}satisfactionDegree(){return this.#i[0].isEmpty()?i.Constraint.UNDEFINED:this.fuzzyRelation().satisfactionDegree(this.#i[0].value())}highestConsistencyDegree(){let t=this.satisfactionDegree();if(t!==i.Constraint.UNDEFINED)return t;let e=0;for(let t of this.#i[0].domain()){let s=this.fuzzyRelation().satisfactionDegree(t);if(s>e&&(e=s),1===e)break}return e}lowestConsistencyDegree(){let t=this.satisfactionDegree();if(t!==i.Constraint.UNDEFINED)return t;let e=1;for(let t of this.#i[0].domain()){let s=this.fuzzyRelation().satisfactionDegree(t);if(s<e&&(e=s),0===e)break}return e}}}),n("94CnG",function(e,s){t(e.exports,"Constraint2",function(){return n});var i=r("dldqc");class n extends i.Constraint{#i=[];constructor(t,e,s){super(t),this.#i=[e,s]}size(){return 2}at(t){return this.#i.at(t)}has(t){return this.#i[0]===t||this.#i[1]===t}indexOf(t){return t===this.#i[0]?0:t===this.#i[1]?1:-1}neighbors(){let t=[];for(let e of this.#i[0])e!==this&&t.push(e);for(let e of this.#i[1])e!==this&&t.push(e);return t}[Symbol.iterator](){return this.#i[Symbol.iterator]()}emptyVariableSize(){let t=0;return this.#i[0].isEmpty()&&++t,this.#i[1].isEmpty()&&++t,t}isDefined(){return!this.#i[0].isEmpty()&&!this.#i[1].isEmpty()}isSatisfied(){return this.#i[0].isEmpty()||this.#i[1].isEmpty()?i.Constraint.UNDEFINED:this.crispRelation().isSatisfied(this.#i[0].value(),this.#i[1].value())?1:0}satisfactionDegree(){return this.#i[0].isEmpty()||this.#i[1].isEmpty()?i.Constraint.UNDEFINED:this.fuzzyRelation().satisfactionDegree(this.#i[0].value(),this.#i[1].value())}highestConsistencyDegree(){let t=this.satisfactionDegree();if(t!==i.Constraint.UNDEFINED)return t;let e=0,s=this.#i[0].value(),r=this.#i[1].value(),n=this.#i[0].domain(),o=this.#i[1].domain();if(this.#i[0].isEmpty()&&!this.#i[1].isEmpty())for(let t of n){let s=this.fuzzyRelation().satisfactionDegree(t,r);if(s>e&&(e=s),1===e)break}else if(!this.#i[0].isEmpty()&&this.#i[1].isEmpty())for(let t of o){let i=this.fuzzyRelation().satisfactionDegree(s,t);if(i>e&&(e=i),1===e)break}else for(let t of n)for(let s of o){let i=this.fuzzyRelation().satisfactionDegree(t,s);if(i>e&&(e=i),1===e)break}return e}lowestConsistencyDegree(){let t=this.satisfactionDegree();if(t!==i.Constraint.UNDEFINED)return t;let e=1,s=this.#i[0].value(),r=this.#i[1].value(),n=this.#i[0].domain(),o=this.#i[1].domain();if(this.#i[0].isEmpty()&&!this.#i[1].isEmpty())for(let t of n){let s=this.fuzzyRelation().satisfactionDegree(t,r);if(s<e&&(e=s),0===e)break}else if(!this.#i[0].isEmpty()&&this.#i[1].isEmpty())for(let t of o){let i=this.fuzzyRelation().satisfactionDegree(s,t);if(i<e&&(e=i),0===e)break}else for(let t of n)for(let s of o){let i=this.fuzzyRelation().satisfactionDegree(t,s);if(i<e&&(e=i),0===e)break}return e}}}),n("AQJiv",function(e,s){t(e.exports,"Constraint3",function(){return n});var i=r("dldqc");class n extends i.Constraint{#i=[];constructor(t,e,s,i){super(t),this.#i=[e,s,i]}size(){return 3}at(t){return this.#i.at(t)}has(t){return this.#i[0]===t||this.#i[1]===t||this.#i[2]===t}indexOf(t){return t===this.#i[0]?0:t===this.#i[1]?1:t===this.#i[2]?2:-1}neighbors(){let t=[];for(let e of this.#i[0])e!==this&&t.push(e);for(let e of this.#i[1])e!==this&&t.push(e);for(let e of this.#i[2])e!==this&&t.push(e);return t}[Symbol.iterator](){return this.#i[Symbol.iterator]()}emptyVariableSize(){let t=0;return this.#i[0].isEmpty()&&++t,this.#i[1].isEmpty()&&++t,this.#i[2].isEmpty()&&++t,t}isDefined(){return!this.#i[0].isEmpty()&&!this.#i[1].isEmpty()&&!this.#i[2].isEmpty()}isSatisfied(){return this.#i[0].isEmpty()||this.#i[1].isEmpty()||this.#i[2].isEmpty()?i.Constraint.UNDEFINED:this.crispRelation().isSatisfied(this.#i[0].value(),this.#i[1].value(),this.#i[2].value())?1:0}satisfactionDegree(){return this.#i[0].isEmpty()||this.#i[1].isEmpty()||this.#i[2].isEmpty()?i.Constraint.UNDEFINED:this.fuzzyRelation().satisfactionDegree(this.#i[0].value(),this.#i[1].value(),this.#i[2].value())}highestConsistencyDegree(){let t=this.satisfactionDegree();if(t!==i.Constraint.UNDEFINED)return t;let e=1,s=this.#i[0].value(),r=this.#i[1].value(),n=this.#i[2].value(),o=this.#i[0].domain(),a=this.#i[1].domain(),l=this.#i[2].domain();if(!this.#i[0].isEmpty()||this.#i[1].isEmpty()||this.#i[2].isEmpty()){if(!this.#i[0].isEmpty()&&this.#i[1].isEmpty()&&!this.#i[2].isEmpty())for(let t of a){let i=this.fuzzyRelation().satisfactionDegree(s,t,n);if(i>e&&(e=i),1===e)break}else if(!this.#i[0].isEmpty()&&!this.#i[1].isEmpty()&&this.#i[2].isEmpty())for(let t of l){let i=this.fuzzyRelation().satisfactionDegree(s,r,t);if(i>e&&(e=i),1===e)break}else if(this.#i[0].isEmpty()&&this.#i[1].isEmpty()&&!this.#i[2].isEmpty())for(let t of o)for(let s of a){let i=this.fuzzyRelation().satisfactionDegree(t,s,n);if(i>e&&(e=i),1===e)break}else if(this.#i[0].isEmpty()&&!this.#i[1].isEmpty()&&this.#i[2].isEmpty())for(let t of o)for(let s of l){let i=this.fuzzyRelation().satisfactionDegree(t,r,s);if(i>e&&(e=i),1===e)break}else if(!this.#i[0].isEmpty()&&this.#i[1].isEmpty()&&this.#i[2].isEmpty())for(let t of a)for(let i of l){let r=this.fuzzyRelation().satisfactionDegree(s,t,i);if(r>e&&(e=r),1===e)break}else for(let t of o)for(let s of a)for(let i of l){let r=this.fuzzyRelation().satisfactionDegree(t,s,i);if(r>e&&(e=r),1===e)break}}else for(let t of o){let s=this.fuzzyRelation().satisfactionDegree(t,r,n);if(s>e&&(e=s),1===e)break}return e}lowestConsistencyDegree(){let t=this.satisfactionDegree();if(t!==i.Constraint.UNDEFINED)return t;let e=1,s=this.#i[0].value(),r=this.#i[1].value(),n=this.#i[2].value(),o=this.#i[0].domain(),a=this.#i[1].domain(),l=this.#i[2].domain();if(!this.#i[0].isEmpty()||this.#i[1].isEmpty()||this.#i[2].isEmpty()){if(!this.#i[0].isEmpty()&&this.#i[1].isEmpty()&&!this.#i[2].isEmpty())for(let t of a){let i=this.fuzzyRelation().satisfactionDegree(s,t,n);if(i<e&&(e=i),0===e)break}else if(!this.#i[0].isEmpty()&&!this.#i[1].isEmpty()&&this.#i[2].isEmpty())for(let t of l){let i=this.fuzzyRelation().satisfactionDegree(s,r,t);if(i<e&&(e=i),0===e)break}else if(this.#i[0].isEmpty()&&this.#i[1].isEmpty()&&!this.#i[2].isEmpty())for(let t of o)for(let s of a){let i=this.fuzzyRelation().satisfactionDegree(t,s,n);if(i<e&&(e=i),0===e)break}else if(this.#i[0].isEmpty()&&!this.#i[1].isEmpty()&&this.#i[2].isEmpty())for(let t of o)for(let s of l){let i=this.fuzzyRelation().satisfactionDegree(t,r,s);if(i<e&&(e=i),0===e)break}else if(!this.#i[0].isEmpty()&&this.#i[1].isEmpty()&&this.#i[2].isEmpty())for(let t of a)for(let i of l){let r=this.fuzzyRelation().satisfactionDegree(s,t,i);if(r<e&&(e=r),0===e)break}else for(let t of o)for(let s of a)for(let i of l){let r=this.fuzzyRelation().satisfactionDegree(t,s,i);if(r<e&&(e=r),0===e)break}}else for(let t of o){let s=this.fuzzyRelation().satisfactionDegree(t,r,n);if(s<e&&(e=s),0===e)break}return e}}}),n("dVggH",function(e,s){t(e.exports,"ConstraintN",function(){return n});var i=r("dldqc");class n extends i.Constraint{#i;#d;constructor(t,...e){super(t),this.#i=[...e],this.#d=Array(this.#i.length)}size(){return this.#i.length}at(t){return this.#i.at(t)}has(t){return this.#i.includes(t)}indexOf(t){return this.#i.indexOf(t)}neighbors(){let t=[];for(let e of this.#i)for(let s of e)s!==this&&t.push(s);return t}[Symbol.iterator](){return this.#i[Symbol.iterator]()}emptyVariableSize(){let t=0;for(let e of this.#i)e.isEmpty()&&++t;return t}isDefined(){for(let t of this.#i)if(t.isEmpty())return!1;return!0}isSatisfied(){for(let t=0;t<this.#i.length;++t){let e=this.#i[t];if(e.isEmpty())return -1;this.#d[t]=e.value()}return this.crispRelation().isSatisfied(...this.#d)?1:0}satisfactionDegree(){for(let t=0;t<this.#i.length;++t){let e=this.#i[t];if(e.isEmpty())return i.Constraint.UNDEFINED;this.#d[t]=e.value()}return this.fuzzyRelation().satisfactionDegree(...this.#d)}highestConsistencyDegree(){let t=this.satisfactionDegree();if(t!==i.Constraint.UNDEFINED)return t;let e=Array(this.emptyVariableSize()),s=0;for(let t=0;t<this.#i.length;++t){let i=this.#i[t];i.isEmpty()?e[s++]=t:this.#d[t]=i.value()}return this.checkHCD(e,0,0)}lowestConsistencyDegree(){let t=this.satisfactionDegree();if(t!==i.Constraint.UNDEFINED)return t;let e=Array(this.emptyVariableSize()),s=0;for(let t=0;t<this.#i.length;++t){let i=this.#i[t];i.isEmpty()?e[s++]=t:this.#d[t]=i.value()}return this.checkLCD(e,0,1)}checkHCD(t,e,s){let i=t[e],r=this.#i[i].domain();if(e===t.length-1)for(let t of r){this.#d[i]=t;let e=this.fuzzyRelation().satisfactionDegree(...this.#d);if(e>s&&(s=e),1===s)break}else for(let n of r)this.#d[i]=n,s=this.checkLCD(t,e+1,s);return s}checkLCD(t,e,s){let i=t[e],r=this.#i[i].domain();if(e===t.length-1)for(let t of r){this.#d[i]=t;let e=this.fuzzyRelation().satisfactionDegree(...this.#d);if(e<s&&(s=e),0===s)break}else for(let n of r)this.#d[i]=n,s=this.checkLCD(t,e+1,s);return s}}}),n("e7Kt8",function(e,s){t(e.exports,"CrispProblem",function(){return n});var i=r("4qG0Z");class n extends i.Problem{createConstraint(t){if("satisfactionDegree"in t.relation)throw Error();return super.createConstraint(t)}isFuzzy(){return!1}satisfiedConstraintRate(){return this.satisfiedConstraintSize()/this.constraintSize()}satisfiedConstraintSize(){let t=0;for(let e of this.constraints())1===e.isSatisfied()&&++t;return t}violatingConstraints(){let t=[];for(let e of this.constraints())0===e.isSatisfied()&&t.push(e);return t}violatingConstraintSize(){let t=0;for(let e of this.constraints())0===e.isSatisfied()&&++t;return t}}}),n("jQeFi",function(e,s){t(e.exports,"ImaginaryVariable",function(){return n});var i=r("pU1Sy");class n extends i.Variable{#g;constructor(t){super(t.owner(),t.domain()),this.#g=t,this.setName(t.name()),this.assign(t.value())}assign(t){this.#g.assign(t)}domain(t){if(void 0===t)return this.#g.domain();this.#g.domain(t)}value(){return this.#g.value()}}}),n("irBK2",function(t,e){}),n("jWYxK",function(e,s){t(e.exports,"Solver",function(){return i});class i{_debug=!0;#m=t=>console.log(t);_pro;_iterLimit=null;_timeLimit=null;_targetDeg=.8;#p=[];constructor(t){this._pro=t}name(){return""}exec(){return!1}setIterationLimit(t=null){this._iterLimit=t}setTimeLimit(t=null){this._timeLimit=t}setTargetRate(t=null){this._targetDeg=t}solve(){return this.exec()}addListener(t){this.#p.push(t)}removeListener(t){this.#p.splice(this.#p.indexOf(t),1)}foundSolution(t,e){let s=!1;for(let i of this.#p)i.foundSolution(t,e)&&(s=!0);return s}setDebugMode(t){this._debug=t}setDebugOutput(t){this.#m=t}_debugOutput(t){this._debug&&this.#m(t)}}}),n("c3uSL",function(e,s){t(e.exports,"SolverFactory",function(){return _});var i=r("dqtH5"),n=r("envE3"),o=r("aDEbX"),a=r("b9ZRJ"),l=r("5pbCs"),h=r("2AvJP"),u=r("9BMnn"),f=r("9NLdx"),c=r("kYz6B"),d=r("2TCdz"),g=r("kpsHE"),m=r("ksORy"),p=r("8e260"),b=r("dfK30"),x=r("9wYtf");class _{static crispSolverNames(){return["Forward Checking","Max Forward Checking","Local Changes","Local Changes Ex","Breakout","GENET","Crisp SRS 3"]}static fuzzySolverNames(){return["Fuzzy Forward Checking","Fuzzy Forward Checking Bc","Flexible Local Changes","Flexible Local Changes Ex","Fuzzy Breakout","Fuzzy GENET","SRS 3","SRS 3 PF"]}static async createSolver(t,e){let s=await _.createCrispSolver(t,e);return s?s:await _.createFuzzySolver(t,e)||null}static async createCrispSolver(t,e){switch(t.replaceAll(" ","")){case"ForwardChecking":case"forward-checking":return new i.ForwardChecking(e);case"MaxForwardChecking":case"max-forward-checking":return new n.MaxForwardChecking(e);case"LocalChanges":case"local-changes":return new o.LocalChanges(e);case"LocalChangesEx":case"local-changes-ex":return new a.LocalChangesEx(e);case"Breakout":case"breakout":return new l.Breakout(e);case"GENET":case"genet":return new h.GENET(e);case"CrispSRS3":case"crisp-srs3":return new u.CrispSRS3(e)}return null}static async createFuzzySolver(t,e){switch(t.replaceAll(" ","")){case"FuzzyForwardChecking":case"fuzzy-forward-checking":return new f.FuzzyForwardChecking(e);case"FuzzyForwardCheckingBc":case"fuzzy-forward-checking-bc":return new c.FuzzyForwardCheckingBc(e);case"FlexibleLocalChanges":case"flexible-local-changes":return new d.FlexibleLocalChanges(e);case"FlexibleLocalChangesEx":case"flexible-local-changes-ex":return new g.FlexibleLocalChangesEx(e);case"FuzzyBreakout":case"fuzzy-breakout":return new m.FuzzyBreakout(e);case"FuzzyGENET":case"fuzzy-genet":return new p.FuzzyGENET(e);case"SRS3":case"srs3":return new b.SRS3(e);case"SRS3PF":case"SRS3_PF":case"srs3-pf":return new x.SRS3_PF(e)}return null}}}),n("dqtH5",function(e,s){t(e.exports,"ForwardChecking",function(){return a});var i=r("6nrDu"),n=r("5V057"),o=r("jWYxK");class a extends o.Solver{#i;#b=new i.AssignmentList;#x=[];#_=!1;#D=0;#v=0;constructor(t){for(let e of(super(t),this.#i=[...this._pro.variables()],this.#i))e.solverObject=new n.DomainPruner(e.domain().size());this.#y()}name(){return"Forward Checking"}setTargetRate(){}setUsingMinimumRemainingValuesHeuristics(t){this.#_=t}#y(){this.#x=[];for(let t=0;t<this.#i.length;++t){this.#x.push(Array(this.#i.length));for(let e=0;e<this.#i.length;++e)e<t&&(this.#x[t][e]=this._pro.constraintsBetween(this.#i[e],this.#i[t]))}}#w(t,e){return t<e?this.#x[e][t]:this.#x[t][e]}#E(t,e){for(let s of this.#i){if(!s.isEmpty())continue;let i=s.domain(),r=s.solverObject;for(let n of this.#w(e,s.index()))if(1===n.emptyVariableSize()){for(let e=0,o=i.size();e<o;++e)r.isValueHidden(e)||(s.assign(i.at(e)),0===n.isSatisfied()&&r.hide(e,t));if(s.clear(),r.isEmpty())return!1}}return!0}#C(){let t=0,e=Number.MAX_VALUE;for(let s=0;s<this.#i.length;++s){let i=this.#i[s];if(!i.isEmpty())continue;let r=i.domain().size()-i.solverObject.hiddenSize();r<e&&(e=r,t=s)}return t}#z(t){if(this._iterLimit&&this._iterLimit<this.#D++||this.#v<Date.now())return!1;if(t===this._pro.variableSize())return this.#b.setProblem(this._pro),!0;let e=this.#_?this.#C():t,s=this.#i[e],i=s.domain(),r=s.solverObject;for(let n=0,o=i.size();n<o;++n)if(!r.isValueHidden(n)){if(s.assign(i.at(n)),this.#E(t,e)&&this.#z(t+1))return!0;for(let e of this.#i)e.solverObject.reveal(t)}return s.clear(),!1}exec(){this.#v=null===this._timeLimit?Number.MAX_VALUE:Date.now()+this._timeLimit,this.#D=0,this._pro.clearAllVariables();let t=this.#z(0);for(let e of(t||(this._iterLimit&&this._iterLimit<this.#D&&this._debugOutput("stop: number of iterations has reached the limit"),this.#v<Date.now()&&this._debugOutput("stop: time limit has been reached")),this.#b))e.apply(),e.variable().solverObject.revealAll();return t}}}),n("6nrDu",function(e,s){t(e.exports,"AssignmentList",function(){return n});var i=r("blH6y");class n{static fromVariables(t){let e=new n;return e.setVariables(t),e}#S=[];constructor(){}setProblem(t){for(let e of(this.#S.length=0,t.variables()))this.#S.push(new i.Assignment({variable:e,value:e.value()}))}setAssignmentList(t){for(let e of(this.#S.length=0,t))this.#S.push(new i.Assignment({variable:e.variable(),value:e.value()}))}setVariables(t){for(let e of(this.#S.length=0,t))this.#S.push(new i.Assignment({variable:e,value:e.value()}))}addVariable(t,e=null){this.#S.push(new i.Assignment({variable:t,value:e}))}apply(){for(let t of this.#S)t.apply()}clear(){this.#S.length=0}isEmpty(){return 0===this.#S.length}size(){return this.#S.length}differenceSize(){let t=0;for(let e of this.#S)e.variable().value()!==e.value()&&++t;return t}at(t){return this.#S[t]}[Symbol.iterator](){return this.#S[Symbol.iterator]()}random(){return this.#S[Math.floor(Math.random()*this.#S.length)]}}}),n("blH6y",function(e,s){t(e.exports,"Assignment",function(){return i});class i{#L;#l;constructor(t){if("assignment"in t)this.#L=t.assignment.variable(),this.#l=t.assignment.value();else if("variable"in t)this.#L=t.variable,this.#l=t.value??t.variable.value();else throw RangeError()}apply(){this.#L.assign(this.#l)}toString(){return`v${this.#L.index()} <- ${this.#l}`}value(){return this.#l}variable(){return this.#L}}}),n("5V057",function(e,s){t(e.exports,"DomainPruner",function(){return i});class i{static #V=-1;#N;#R=0;constructor(t){this.#N=Array(t),this.#N.fill(i.#V)}hiddenSize(){return this.#R}hide(t,e){this.#N[t]===i.#V&&++this.#R,this.#N[t]=e}isEmpty(){return this.#N.length===this.#R}isValueHidden(t){return this.#N[t]!==i.#V}reveal(t){for(let e=0;e<this.#N.length;++e)this.#N[e]===t&&(this.#N[e]=i.#V,--this.#R)}revealAll(){this.#N.fill(i.#V),this.#R=0}}}),n("envE3",function(e,s){t(e.exports,"MaxForwardChecking",function(){return a});var i=r("6nrDu"),n=r("5V057"),o=r("jWYxK");class a extends o.Solver{#i;#b=new i.AssignmentList;#k;#O=0;#A=new Set;#r=[];#D=0;#v=0;constructor(t){for(let e of(super(t),this.#i=[...this._pro.variables()],this.#i))e.solverObject=new n.DomainPruner(e.domain().size());this.#k=this._pro.constraintSize()}name(){return"Forward Checking for Max CSPs"}#z(t,e){if(this._iterLimit&&this._iterLimit<this.#D++||this.#v<Date.now())return!1;let s=this._pro;if(t===s.variableSize()){let t=s.violatingConstraintSize();return!!(t<this.#k&&(this.#k=t,this.#b.setProblem(this._pro),this._debugOutput(`   refreshed ${this.#k}`),(this._targetDeg??1)<=s.satisfiedConstraintRate()))}let i=this.#i[t],r=i.domain(),n=i.solverObject;for(let s=0,o=r.size();s<o;++s)if(!n.isValueHidden(s)&&(i.assign(r.at(s)),this.#O=e+this.#F(t,i),!(this.#O>this.#k))){if(this.#E(t)&&this.#z(t+1,this.#O))return!0;for(let e of this.#i)e.solverObject.reveal(t)}return i.clear(),!1}#E(t){let e=this.#i[t];for(let s=t+1;s<this.#i.length;++s){let i=this.#i[s];for(let s of(this.#r=this._pro.constraintsBetween(e,i),this.#r))if(1===s.emptyVariableSize()&&this.#I(i,s,t)&&i.solverObject.isEmpty())return!1}return!0}#F(t,e){let s=0;this.#A.clear();for(let i=0;i<t;++i)for(let t of(this.#r=this._pro.constraintsBetween(e,this.#i[i]),this.#r))this.#A.has(t)||(0===t.isSatisfied()&&++s,this.#A.add(t));return s}#I(t,e,s){let i=!1,r=t.domain(),n=t.solverObject;for(let o=0,a=r.size();o<a;++o)!n.isValueHidden(o)&&(t.assign(r.at(o)),0===e.isSatisfied()&&this.#O+1>this.#k&&(n.hide(o,s),i=!0));return i}exec(){this.#v=null===this._timeLimit?Number.MAX_VALUE:Date.now()+this._timeLimit,this.#D=0,this._pro.clearAllVariables();let t=this.#z(0,0);for(let e of(t?this._debugOutput("stop: current degree is above the target"):(this._iterLimit&&this._iterLimit<this.#D&&this._debugOutput("stop: number of iterations has reached the limit"),this.#v<Date.now()&&this._debugOutput("stop: time limit has been reached")),this.#b))e.apply(),e.variable().solverObject.revealAll();return t}}}),n("aDEbX",function(e,s){t(e.exports,"LocalChanges",function(){return o});var i=r("6nrDu"),n=r("jWYxK");class o extends n.Solver{static #T(t,e){return new Set(t).add(e)}static #M(t,e){let s=new Set(t);return s.delete(e),s}#D=0;#v=0;#j=!1;constructor(t,e=!1){super(t),e&&this._pro.clearAllVariables()}name(){return"Local Changes"}#W(t,e,s){let i=new Set,r=new Set;for(let s of t)for(let t of this._pro.constraintsBetween(e,s))r.add(t);let n=e.value();for(let t of(e.assign(s),r))if(0===t.isSatisfied())for(let e of t)i.add(e);return e.assign(n),i.delete(e),i}#U(t,e,s){let i=new Set;for(let s of t)for(let t of this._pro.constraintsBetween(e,s))i.add(t);let r=e.value();for(let t of(e.assign(s),i))if(0===t.isSatisfied())return e.assign(r),!1;return e.assign(r),!0}#H(t,e,s,i){if(!this.#U(t,s,i))return!1;let r=t.union(e);if(this.#U(r,s,i))return!0;let n=this.#W(r,s,i),a=r.difference(n);for(let t of(this.#U(a,s,i)||this._debugOutput("bug"),n))t.clear();return t=o.#T(t,s),e=e.difference(n),this.#B(t,e,n)}#P(t,e,s,r){if(0===r.size)return!1;let n=r.values().next().value,a=(0,i.AssignmentList).fromVariables(e);s.assign(n);let l=this.#H(t,e,s,n);return l||this.#j?l:(s.clear(),a.apply(),this.#P(t,e,s,o.#M(r,n)))}#B(t,e,s){if(this._debugOutput(`X1 ${t.size}, X2' ${e.size}, X3' ${s.size}`),(this._targetDeg??1)<=this._pro.satisfiedConstraintRate())return this._debugOutput("stop: current degree is above the target"),this.#j=!0,!0;if(this._iterLimit&&this._iterLimit<this.#D++)return this._debugOutput("stop: number of iterations has reached the limit"),this.#j=!0,!1;if(this.#v<Date.now())return this._debugOutput("stop: time limit has been reached"),this.#j=!0,!1;if(0===s.size)return!0;let i=s.values().next().value,r=new Set;for(let t of i.domain())r.add(t);let n=this.#P(t,e,i,r);return!n||this.#j?n:(e=o.#T(e,i),s=o.#M(s,i),this.#B(t,e,s))}exec(){this.#v=null===this._timeLimit?Number.MAX_VALUE:Date.now()+this._timeLimit,this.#D=0,this.#j=!1,0===this._pro.emptyVariableSize()&&this._pro.clearAllVariables();let t=new Set,e=new Set;for(let s of this._pro.variables())(s.isEmpty()?e:t).add(s);return this.#B(new Set,t,e)}}}),n("b9ZRJ",function(e,s){t(e.exports,"LocalChangesEx",function(){return o});var i=r("6nrDu"),n=r("jWYxK");class o extends n.Solver{static #T(t,e){return new Set(t).add(e)}#D=0;#v=0;#j=!1;constructor(t,e=!1){super(t),e&&this._pro.clearAllVariables()}name(){return"Local Changes Ex"}#W(t,e,s){let i=new Set,r=new Set;for(let s of t)for(let t of this._pro.constraintsBetween(e,s))r.add(t);let n=e.value();for(let t of(e.assign(s),r))if(0===t.isSatisfied())for(let e of t)i.add(e);return e.assign(n),i.delete(e),i}#U(t,e,s){let i=new Set;for(let s of t)for(let t of this._pro.constraintsBetween(e,s))i.add(t);let r=e.value();for(let t of(e.assign(s),i))if(0===t.isSatisfied())return e.assign(r),!1;return e.assign(r),!0}#H(t,e,s){if(!this.#U(t,s,s.value()))return!1;let i=t.union(e);if(this.#U(i,s,s.value()))return!0;let r=this.#W(i,s,s.value());return t=o.#T(t,s),e=e.difference(r),this.#B(t,e,r)}#P(t,e,s){for(let r of s.domain()){let n=(0,i.AssignmentList).fromVariables(e);s.assign(r);let o=this.#H(t,e,s);if(o||this.#j)return o;s.clear(),n.apply()}return!1}#B(t,e,s){for(e=new Set(e),s=new Set(s);;){if(this._debugOutput(`X1 ${t.size}, X2' ${e.size}, X3' ${s.size}`),(this._targetDeg??1)<=this._pro.satisfiedConstraintRate())return this._debugOutput("stop: current degree is above the target"),this.#j=!0,!0;if(this._iterLimit&&this._iterLimit<this.#D++)return this._debugOutput("stop: number of iterations has reached the limit"),this.#j=!0,!1;if(this.#v<Date.now())return this._debugOutput("stop: time limit has been reached"),this.#j=!0,!1;if(0===s.size)return!0;let i=s.values().next().value,r=this.#P(t,e,i);if(!r||this.#j)return r;e.add(i),s.delete(i)}}exec(){this.#v=null===this._timeLimit?Number.MAX_VALUE:Date.now()+this._timeLimit,this.#D=0,this.#j=!1,0===this._pro.emptyVariableSize()&&this._pro.clearAllVariables();let t=new Set,e=new Set;for(let s of this._pro.variables())(s.isEmpty()?e:t).add(s);return this.#B(new Set,t,e)}}}),n("5pbCs",function(e,s){t(e.exports,"Breakout",function(){return o});var i=r("6nrDu"),n=r("jWYxK");class o extends n.Solver{#X=!0;#$;constructor(t){super(t),this.#$=Array(this._pro.constraintSize()),this.#$.fill(1)}name(){return"Breakout"}setRandomness(t){this.#X=t}#q(t,e){let s=0;for(let i of t){let t=i.value(),r=0;for(let t of i)r+=(1-t.isSatisfied())*this.#$[t.index()];t:for(let n of i.domain()){if(t===n)continue;i.assign(n);let o=r;for(let t of i)if((o-=(1-t.isSatisfied())*this.#$[t.index()])<s)continue t;o>s?(s=o,e.clear(),e.addVariable(i,n)):0!==s&&e.addVariable(i,n)}i.assign(t)}}#K(t){let e=new Set;for(let s of t)for(let t of s)e.add(t);return Array.from(e)}exec(){let t=null===this._timeLimit?Number.MAX_VALUE:Date.now()+this._timeLimit,e=0;for(let t of this._pro.variables())t.isEmpty()&&t.assign(t.domain().at(0));let s=new i.AssignmentList,r=this._pro;for(;;){let i=r.violatingConstraints();if((this._targetDeg??1)<=r.satisfiedConstraintRate())return this._debugOutput("stop: current degree is above the target"),!0;if(this._iterLimit&&this._iterLimit<e++)return this._debugOutput("stop: number of iterations has reached the limit"),!1;if(t<Date.now())return this._debugOutput("stop: time limit has been reached"),!1;if(this._debugOutput(i.length+" violations"),this.#q(this.#K(i),s),0<s.size()){let t=this.#X?s.random():s.at(0);t.apply(),s.clear(),this._debugOutput("	"+t)}else{for(let t of i)this.#$[t.index()]+=1;this._debugOutput("breakout")}}}}}),n("2AvJP",function(e,s){t(e.exports,"GENET",function(){return o});var i=r("6nrDu"),n=r("jWYxK");class o extends n.Solver{static nextInt(t){return Math.floor(Math.random()*Math.floor(t))}#Y=[];#G=[];constructor(t){super(t)}name(){return"GENET"}#J(){this._debugOutput("network creation start");let t=[];for(let t of this._pro.variables()){if(0===t.domain().size())return!1;this.#Y.push(new a(t))}for(let e of this._pro.constraints())if(1===e.size()){let s=e.at(0),i=this.#Y[s.index()];for(let r=0;r<i.size();++r){let n=s.value();s.assign(i.get(r)._value),0===e.isSatisfied()&&t.push(new l(i.get(r))),s.assign(n)}}else{let s=e.at(0),i=e.at(1),r=this.#Y[s.index()],n=this.#Y[i.index()];for(let o=0;o<r.size();++o){let a=s.value();s.assign(r.get(o)._value);for(let s=0;s<n.size();++s){let a=i.value();i.assign(n.get(s)._value),0===e.isSatisfied()&&t.push(new l(r.get(o),n.get(s))),i.assign(a)}s.assign(a)}}for(let t of this.#Y)for(let e of t._neurons)e.lockConnections();return this.#G=t,this._debugOutput("network creation complete"),!0}#Q(t){for(let e=t.length;e>1;--e){let s=o.nextInt(e),i=t[e-1];t[e-1]=t[s],t[s]=i}return t}exec(){if(!this.#J())throw Error();let t=null===this._timeLimit?Number.MAX_VALUE:Date.now()+this._timeLimit,e=0,s=new i.AssignmentList,r=[];for(let t=0;t<this.#Y.length;++t)r.push(t);let n=this._pro,o=n.satisfiedConstraintRate(),a=!1;for(;;){if(this._iterLimit&&this._iterLimit<e++){this._debugOutput("stop: number of iterations has reached the limit");break}if(t<Date.now()){this._debugOutput("stop: time limit has been reached");break}let i=!1;for(let t of this.#Q(r))this.#Y[t].setActivityMaximumInput()&&(i=!0);if(i){for(let t of this.#Y)t.applyToVariable();let t=n.satisfiedConstraintRate();if(o<t){if(o=t,this._debugOutput(`satisfied constraint rate: ${t}`),s.setProblem(this._pro),this.foundSolution(s,t)){a=!0;break}if(this._targetDeg??1<=o){this._debugOutput("stop: current degree is above the target"),a=!0;break}}}else for(let t of this.#G)t.refreshWeight()}return s.apply(),a}}class a{static nextInt(t){return Math.floor(Math.random()*Math.floor(t))}#L;#h=0;#Z=[];_neurons=[];constructor(t){for(let e of(this.#L=t,t.domain()))this._neurons.push(new h(e));this.#tt(a.nextInt(this._neurons.length))}#tt(t){for(let t of this._neurons)t._isActive=!1;this._neurons[t]._isActive=!0,this.#h=t}applyToVariable(){this.#L.assign(this._neurons[this.#h]._value)}get(t){return this._neurons[t]}neurons(){return this._neurons}setActivityMaximumInput(){this.#Z.length=0;let t=Number.NEGATIVE_INFINITY,e=!1;for(let s=0;s<this._neurons.length;++s){let i=this._neurons[s].getInput();t<=i&&(t<i&&(t=i,this.#Z.length=0,e=!1),this.#Z.push(s),this.#h===s&&(e=!0))}return!e&&0!==this.#Z.length&&(this.#tt(this.#Z[a.nextInt(this.#Z.length)]),!0)}size(){return this._neurons.length}}class l{#te;#ts;_weight;constructor(t,e=null){this._weight=-1,this.#te=t,this.#te.addConnection(this),this.#ts=e,this.#ts&&this.#ts.addConnection(this)}getNeuron(t){return t===this.#te?this.#ts:t===this.#ts?this.#te:null}refreshWeight(){this.#te._isActive&&(null===this.#ts||this.#ts._isActive)&&(this._weight+=-1)}}class h{#ti=[];#G=[];_value;_isActive=!1;constructor(t){this._value=t}addConnection(t){this.#ti.push(t)}lockConnections(){this.#G=[...this.#ti],this.#ti=null}getInput(){let t=0;for(let e of this.#G){let s=e.getNeuron(this);t+=e._weight*(null===s||s._isActive?1:0)}return t}}}),n("9BMnn",function(e,s){t(e.exports,"CrispSRS3",function(){return o});var i=r("6nrDu"),n=r("jWYxK");class o extends n.Solver{#X=!0;#tr=new Set;#tn=new Set;#to=[];#ta=[];constructor(t){for(let e of(super(t),this._pro.constraints()))this.#to.push(new a(e)),this.#ta.push(null)}name(){return"SRS 3 for Crisp CSPs"}setRandomness(t){this.#X=t}#tl(t){let e=t.index();return null===this.#ta[e]&&(this.#ta[e]=t.neighbors()),this.#ta[e]}#th(t){this._debugOutput("repair");let e=new i.AssignmentList,s=0;for(let i of t){let r=i.value(),n=0;for(let t of i)n+=1-t.isSatisfied();t:for(let o of i.domain()){if(r===o||(i.assign(o),1!==t.isSatisfied()))continue;let a=n;for(let t of i)if((a-=1-t.isSatisfied())<s)continue t;a>s?(s=a,e.clear(),e.addVariable(i,o)):0!==s&&e.addVariable(i,o)}i.assign(r)}if(e.size()>0){let t=this.#X?e.random():e.at(0);return t.apply(),this._debugOutput("	"+t),!0}return!1}#tu(t,e){let s=[],i=t;for(;;){for(let t of(i=i.parent(),s.length=0,i.getDescendants(s),i.clear(),e))this.#tn.delete(t),this.#tr.delete(t);if(e.delete(i)||(this.#tn.add(i),null!==i.parent()&&!this.#th(i.parent().getObject())))break}}#tf(t){for(let e of(this._debugOutput("spread"),this.#tr.add(t),this.#tl(t.getObject()))){let s=this.#to[e.index()];this.#tr.has(s)||this.#tn.has(s)||(s.clear(),t.add(s),this.#tn.add(s))}}#tc(t){this._debugOutput("srs");let e=null===this._timeLimit?Number.MAX_VALUE:Date.now()+this._timeLimit,s=0;for(let e of(this.#tr.clear(),this.#tn.clear(),t))this.#tn.add(e);let i=this._pro;for(;t.size&&this.#tn.size;){if((this._targetDeg??1)<=i.satisfiedConstraintRate())return this._debugOutput("stop: current degree is above the target"),!0;if(this._iterLimit&&this._iterLimit<s++){this._debugOutput("stop: number of iterations has reached the limit");break}if(e<Date.now()){this._debugOutput("stop: time limit has been reached");break}let r=this.#tn.values().next().value;this.#tn.delete(r),this.#th(r.getObject())?t.delete(r)||(null!==r.parent()&&this.#th(r.parent().getObject())?this.#tu(r,t):this.#tf(r)):this.#tf(r)}return!1}exec(){let t=this._pro.violatingConstraints(),e=new Set;for(let s of t){let t=this.#to[s.index()];e.add(t)}return!!this.#tc(e)||0===e.size}}class a{#td=[];#tg;#tm;constructor(t){this.#tg=null,this.#tm=t}add(t){t.#tg=this,this.#td.push(t)}clear(){for(let t of this.#td)t.#tg=null;this.#td.length=0}getDescendants(t){for(let e of(t.push(this),this.#td))e.getDescendants(t)}getObject(){return this.#tm}parent(){return this.#tg}}}),n("9NLdx",function(e,s){t(e.exports,"FuzzyForwardChecking",function(){return l});var i=r("dldqc"),n=r("6nrDu"),o=r("5V057"),a=r("jWYxK");class l extends a.Solver{static CONTINUE=0;static TERMINATE=1;#i;#b=new n.AssignmentList;#tp=[];#tb=0;#D=0;#v=0;#_=!1;#tx=0;#t_;#tD;#tv;#ty=!1;constructor(t,e=null){super(t),this.#i=[...this._pro.variables()],this.#t_=Array(this._pro.variableSize()),this.#y(),this.#tv=Array(this._pro.constraintSize());let s=[];for(let t of this._pro.constraints())1===t.size()&&s.push(t);this.#tD=[...s],e&&(this.#tb=e)}name(){return"Forward Checking for Fuzzy CSPs"}setUsingMinimumRemainingValuesHeuristics(t){this.#_=t}setIncrementStepOfWorstSatisfactionDegree(t){this.#tx=t}setIntensivePruning(t){this.#ty=t}setTargetRate(t=null){if(this._targetDeg=t,null===this._targetDeg)this.#tb=0;else{let t=Number.MIN_VALUE;for(this.#tb=this._targetDeg-t;this.#tb>=this._targetDeg;)t*=10,this.#tb=this._targetDeg-t}}#y(){this.#tp=[];for(let t=0;t<this.#i.length;++t){this.#tp.push(Array(this.#i.length));for(let e=0;e<this.#i.length;++e)e<t&&(this.#tp[t][e]=this._pro.constraintsBetween(this.#i[e],this.#i[t]))}}#w(t,e){return t<e?this.#tp[e][t]:this.#tp[t][e]}#tw(){for(let t of this.#tD){let e=t.at(0),s=e.value(),i=e.domain(),r=e.solverObject;for(let s=0,n=i.size();s<n;++s)e.assign(i.at(s)),t.satisfactionDegree()<=this.#tb&&r.hide(s,-1);if(e.assign(s),r.isEmpty())return!1}return!0}#tE(t,e,s){let i=e.domain(),r=e.solverObject;for(let n=0,o=i.size();n<o;++n)!r.isValueHidden(n)&&(e.assign(i.at(n)),s.satisfactionDegree()<=this.#tb&&r.hide(n,t));return e.clear(),!r.isEmpty()}#tC(t,e,s){let i=e.domain(),r=e.solverObject,n=null;for(let t of s)if(t.isEmpty()&&t!==e){n=t;break}let o=n.domain(),a=n.solverObject;e:for(let l=0,h=i.size();l<h;++l)if(!r.isValueHidden(l)){e.assign(i.at(l));for(let t=0,e=o.size();t<e;++t)if(!a.isValueHidden(t)&&(n.assign(o.at(t)),s.satisfactionDegree()>this.#tb))continue e;r.hide(l,t)}return n.clear(),e.clear(),!r.isEmpty()}#tz(t,e,s){let i=e.domain(),r=e.solverObject,n=null,o=null;for(let t of s)if(t.isEmpty()&&t!==e){if(null===n)n=t;else{o=t;break}}let a=n.domain(),l=o.domain(),h=n.solverObject,u=o.solverObject;e:for(let f=0,c=i.size();f<c;++f)if(!r.isValueHidden(f)){e.assign(i.at(f));for(let t=0,e=a.size();t<e;++t)if(!h.isValueHidden(t)){n.assign(a.at(t));for(let t=0,e=l.size();t<e;++t)if(!u.isValueHidden(t)&&(o.assign(l.at(t)),s.satisfactionDegree()>this.#tb))continue e}r.hide(f,t)}return o.clear(),n.clear(),e.clear(),!r.isEmpty()}#tS(t,e,s,i){let r=e.domain(),n=e.solverObject,o=Array(i-1),a=0;for(let t of s)t.isEmpty()&&t!==e&&(o[a++]=t);let l=Array(o.length);e:for(let i=0,a=r.size();i<a;++i)if(!n.isValueHidden(i)){e.assign(r.at(i)),l.fill(0);s:for(;;){let t=!1;for(let e=0;e<o.length;++e){let s=o[e].domain();if(o[e].solverObject.isValueHidden(l[e])){t=!0;break}o[e].assign(s.at(l[e]))}if(!t&&s.satisfactionDegree()>this.#tb)continue e;for(let t=0;t<o.length&&(l[t]+=1,!(l[t]<o[t].domain().size()));++t)if(l[t]=0,t===o.length-1)break s}n.hide(i,t)}for(let t of o)t.clear();return e.clear(),!n.isEmpty()}#E(t,e){for(let s of this.#i)if(s.isEmpty())for(let i of this.#w(e,s.index())){let e=i.emptyVariableSize();if(1===e){if(!this.#tE(t,s,i))return!1}else if(this.#ty){if(2===e){if(!this.#tC(t,s,i))return!1}else if(3===e){if(!this.#tz(t,s,i))return!1}else if(e>3&&!this.#tS(t,s,i,e))return!1}}return!0}#tL(t){this.#tv.fill(!1);for(let e=0;e<this.#i.length;++e){let s=this.#i[e];if(!(s===t||s.isEmpty()))for(let s of this.#w(t.index(),e)){if(this.#tv[s.index()])continue;let t=s.satisfactionDegree();if(t!==i.Constraint.UNDEFINED&&t<=this.#tb)return!1;this.#tv[s.index()]=!0}}return!0}#tV(){for(let t=0;t<this.#t_.length;++t){let e=this.#t_[t].index();for(let s=t+1;s<this.#t_.length;++s){let i=this.#t_[s];for(let s of this.#w(e,i.index())){let e=i.value(),r=i.domain(),n=i.solverObject;for(let e=0,o=r.size();e<o;++e)!n.isValueHidden(e)&&(i.assign(r.at(e)),s.satisfactionDegree()<=this.#tb&&n.hide(e,t));i.assign(e)}}}}#C(){let t=0,e=Number.MAX_VALUE;for(let s=0;s<this.#i.length;++s){let i=this.#i[s];if(!i.isEmpty())continue;let r=i.domain().size()-i.solverObject.hiddenSize();r<e&&(e=r,t=s)}return t}#z(t){let e=l.CONTINUE,s=this.#_?this.#C():t,i=this.#i[s],r=i.domain(),n=i.solverObject;this.#t_[t]=i;for(let o=0,a=r.size();o<a;++o){if(n.isValueHidden(o))continue;if(this._iterLimit&&this._iterLimit<this.#D++||this.#v<Date.now()){e=l.TERMINATE;break}for(let e of(i.assign(r.at(o)),this.#i))e.solverObject.reveal(t);if(!this.#tL(i)||!this.#E(t,s))continue;let a=t+1;if((e=a===this.#i.length-1?this.#tN(a):this.#z(a))===l.TERMINATE)break}if(e===l.CONTINUE)for(let e of this.#i)e.solverObject.reveal(t);return i.clear(),e}#tN(t){let e=l.CONTINUE,s=this.#i[this.#_?this.#C():t],i=s.domain(),r=s.solverObject;this.#t_[t]=s;for(let t=0,n=i.size();t<n;++t){if(r.isValueHidden(t))continue;if(this._iterLimit&&this._iterLimit<this.#D++||this.#v<Date.now()){e=l.TERMINATE;break}s.assign(i.at(t));let n=this._pro.worstSatisfactionDegree();if(n>this.#tb){if(this.#tb=n,this.#b.setProblem(this._pro),e=l.TERMINATE,null!==this._targetDeg&&this._targetDeg<=this.#tb)break;this.#tw(),this.#tV()}}return s.clear(),e}exec(){for(let t of(this.#v=null===this._timeLimit?Number.MAX_VALUE:Date.now()+this._timeLimit,this.#D=0,this.#i))t.solverObject=new o.DomainPruner(t.domain().size());if(this._pro.clearAllVariables(),!this.#tw())return!1;let t=!1;for(;;){if(this.#z(0)===l.TERMINATE){if(this._iterLimit&&this._iterLimit<this.#D++){this._debugOutput("stop: number of iterations has reached the limit");break}if(this.#v<Date.now()){this._debugOutput("stop: time limit has been reached");break}}if(this.#b.isEmpty())break;if(this._debugOutput(`	found a solution: ${this.#tb}`),this.foundSolution(this.#b,this.#tb)){t=!0;break}if(null===this._targetDeg)t=!0,this.#tb+=this.#tx;else if(this._targetDeg<=this.#tb){this._debugOutput("stop: current degree is above the target"),t=!0;break}for(let t of this.#i)t.solverObject.revealAll()}for(let t of(this.#b.apply(),this.#i))t.solverObject=null;return t}}}),n("kYz6B",function(e,s){t(e.exports,"FuzzyForwardCheckingBc",function(){return a});var i=r("6nrDu"),n=r("5V057"),o=r("jWYxK");class a extends o.Solver{static CONTINUE=0;static TERMINATE=1;#i;#b=new i.AssignmentList;#tp=[];#tb=0;#D=0;#v=0;#_=!1;#tx=0;constructor(t,e=null){super(t),this.#i=[...this._pro.variables()],this.#y(),this.#tb=Math.max(0,t.worstSatisfactionDegree()),e&&(this.#tb=e)}name(){return"Forward Checking for Fuzzy CSPs of Binary Constraints"}setUsingMinimumRemainingValuesHeuristics(t){this.#_=t}setIncrementStepOfWorstSatisfactionDegree(t){this.#tx=t}setTargetRate(t=null){if(this._targetDeg=t,null===this._targetDeg)this.#tb=0;else{let t=Number.MIN_VALUE;for(this.#tb=this._targetDeg-t;this.#tb>=this._targetDeg;)t*=10,this.#tb=this._targetDeg-t}}#y(){this.#tp=[];for(let t=0;t<this.#i.length;++t){this.#tp.push(Array(this.#i.length));for(let e=0;e<this.#i.length;++e)e<t&&(this.#tp[t][e]=this._pro.constraintsBetween(this.#i[e],this.#i[t]))}}#w(t,e){return t<e?this.#tp[e][t]:this.#tp[t][e]}#tE(t,e,s){let i=e.domain(),r=e.solverObject;for(let n=0,o=i.size();n<o;++n)!r.isValueHidden(n)&&(e.assign(i.at(n)),s.satisfactionDegree()<=this.#tb&&r.hide(n,t));return e.clear(),!r.isEmpty()}#E(t,e){for(let s of this.#i)if(s.isEmpty()){for(let i of this.#w(e,s.index()))if(2===i.size()&&!this.#tE(t,s,i))return!1}return!0}#C(){let t=0,e=Number.MAX_VALUE;for(let s=0;s<this.#i.length;++s){let i=this.#i[s];if(!i.isEmpty())continue;let r=i.domain().size()-i.solverObject.hiddenSize();r<e&&(e=r,t=s)}return t}#z(t){let e=a.CONTINUE,s=this.#_?this.#C():t,i=this.#i[s],r=i.domain(),n=i.solverObject;for(let o=0,l=r.size();o<l;++o){if(n.isValueHidden(o))continue;if(this._iterLimit&&this._iterLimit<this.#D++||this.#v<Date.now()){e=a.TERMINATE;break}for(let e of(i.assign(r.at(o)),this.#i))e.solverObject.reveal(t);if(!this.#E(t,s))continue;let l=t+1;if((e=l===this.#i.length-1?this.#tN(l):this.#z(l))===a.TERMINATE)break}if(e===a.CONTINUE)for(let e of this.#i)e.solverObject.reveal(t);return i.clear(),e}#tN(t){let e=a.CONTINUE,s=this.#i[this.#_?this.#C():t],i=s.domain(),r=s.solverObject;for(let t=0,n=i.size();t<n;++t){if(r.isValueHidden(t))continue;if(this._iterLimit&&this._iterLimit<this.#D++||this.#v<Date.now()){e=a.TERMINATE;break}s.assign(i.at(t));let n=this._pro.worstSatisfactionDegree();if(n>this.#tb&&(this.#tb=n,this.#b.setProblem(this._pro),e=a.TERMINATE,null!==this._targetDeg&&this._targetDeg<=this.#tb))break}return s.clear(),e}exec(){for(let t of(this.#v=null===this._timeLimit?Number.MAX_VALUE:Date.now()+this._timeLimit,this.#D=0,this.#i))t.solverObject=new n.DomainPruner(t.domain().size());this._pro.clearAllVariables();let t=new i.AssignmentList,e=!1;for(;;){if(this.#z(0)===a.TERMINATE){if(this._iterLimit&&this._iterLimit<this.#D++){this._debugOutput("stop: number of iterations has reached the limit");break}if(this.#v<Date.now()){this._debugOutput("stop: time limit has been reached");break}}if(this.#b.isEmpty())break;if(t.setAssignmentList(this.#b),this.#b.clear(),this._debugOutput(`	found a solution: ${this.#tb}`),this.foundSolution(t,this.#tb)){e=!0;break}if(null===this._targetDeg){if(e=!0,this.#tb+this.#tx>1)break;this.#tb+=this.#tb+this.#tx>1?0:this.#tx}else if(this._targetDeg<=this.#tb){this._debugOutput("stop: current degree is above the target"),e=!0;break}for(let t of this.#i)t.solverObject.revealAll()}for(let e of(t.apply(),this.#i))e.solverObject=null;return e}}}),n("2TCdz",function(e,s){t(e.exports,"FlexibleLocalChanges",function(){return a});var i=r("dldqc"),n=r("6nrDu"),o=r("jWYxK");class a extends o.Solver{static #T(t,e){let s=new Set(t);return s.add(e),s}static #M(t,e){let s=new Set(t);return s.delete(e),s}#tR=0;#tk=0;#D=0;#v=0;#j=0;constructor(t){super(t),this.#tO()}name(){return"Flexible Local Changes"}#tA(t,e){let s=new Map;for(let t of e)if(t.isDefined())for(let e of t)s.has(e)?s.set(e,(s.get(e)??0)+1):s.set(e,1);let i=[...t];i.sort((t,e)=>{let i=0,r=0;return(s.has(t)&&(i=s.get(t)??0),s.has(e)&&(r=s.get(e)??0),i<r)?1:i>r?-1:0});let r=new Set;for(let t of i){let s=!1;for(let t of e)if(t.isDefined()){s=!0;break}if(!s)break;t.clear(),r.add(t)}return r}#tO(){let t=1,e=0;for(let s of this._pro.variables())for(let i of s){let s=i.lowestConsistencyDegree(),r=i.highestConsistencyDegree();s<t&&(t=s),r>e&&(e=r)}this.#tk=t,this.#tR=e}#tF(t,e,s,i,r,n,o){let l=this.#tA(e,n),h=a.#T(t,s),u=e.difference(l);return this.#tI(h,u,l,i,Math.min(r,i),o)}#tT(t,e,s,i,r,o){let a=this.#tk;if(0===s.domain().size())return a;let l=(0,n.AssignmentList).fromVariables(e),h=s.domain().at(0),u=(0,n.AssignmentList).fromVariables(e);for(let f=0;f<s.domain().size()&&a<r;++f){let c=s.domain().at(f);s.assign(c);let d=Math.min(i,this.#tM(t,s,a,o));if(d>Math.max(a,o)){let i=new Set,f=Math.min(Math.min(d,r),this.#tj(t,e,s,d,r,i));if(f>a&&(a=f,h=c,l=(0,n.AssignmentList).fromVariables(e)),i.size){let f=this.#tF(t,e,s,d,r,i,Math.max(o,a));if(-1!==this.#j)return a;f>a&&(a=f,h=c,l=(0,n.AssignmentList).fromVariables(e)),u.apply()}}}return l.apply(),s.assign(h),a}#tI(t,e,s,i,r,n){if(this._debugOutput(`X1 ${t.size}, X2' ${e.size}, X3' ${s.size}`),null!==this._targetDeg&&this._targetDeg<=this._pro.worstSatisfactionDegree())return this._debugOutput("stop: current degree is above the target"),this.#j=1,r;if(this._iterLimit&&this._iterLimit<this.#D++)return this._debugOutput("stop: number of iterations has reached the limit"),this.#j=0,r;if(this.#v<Date.now())return this._debugOutput("stop: time limit has been reached"),this.#j=0,r;if(0===s.size)return r;let o=s.values().next().value,l=this.#tT(t,e,o,i,r,n);return -1!==this.#j?r:l<n?this.#tk:(e=a.#T(e,o),s=a.#M(s,o),this.#tI(t,e,s,i,l,n))}#tW(t,e){let s=new Set;for(let e of t)for(let t of e)s.add(t);let r=1;for(let t of s){let e=t.satisfactionDegree();e!==i.Constraint.UNDEFINED&&e<r&&(r=e)}for(let t of this._pro.constraints())t.lowestConsistencyDegree()<this.#tR&&e.add(t);return r}#tM(t,e,s,r){let n=1,o=new Set;for(let s of t)for(let t of this._pro.constraintsBetween(s,e))o.add(t);for(let t of o){let e=t.satisfactionDegree();if(e!==i.Constraint.UNDEFINED&&(e<n&&(n=e),n<=s||n<=r))break}return n}#tj(t,e,s,r,n,o){let a=1,l=new Set;for(let e of t)for(let t of this._pro.constraintsBetween(e,s))l.add(t);for(let t of e)for(let e of this._pro.constraintsBetween(t,s))l.add(e);for(let t of l){let e=t.satisfactionDegree();e!==i.Constraint.UNDEFINED&&e<a&&(a=e)}for(let t of l){let e=t.satisfactionDegree();e!==i.Constraint.UNDEFINED&&(e<r||e<n)&&o.add(t)}return a}exec(){let t;this.#v=null===this._timeLimit?Number.MAX_VALUE:Date.now()+this._timeLimit,this.#D=0,this.#j=-1;let e=this._pro.worstSatisfactionDegree();0===this._pro.emptyVariableSize()&&this._pro.clearAllVariables();let s=new Set,i=new Set,r=new Set;for(let t of this._pro.variables())(t.isEmpty()?r:i).add(t);let o=new Set,a=this.#tW(i,o),l=null;0===r.size?(t=a,l=(0,n.AssignmentList).fromVariables(i)):t=this.#tk;let h=this.#tA(i,o).union(r),u=i.difference(h),f=this.#tI(s,u,h,this.#tR,this.#tR,t);return f<t&&null!==l&&l.apply(),(f=this._pro.worstSatisfactionDegree())>e&&f>0&&(0!==this.#j||null===this._targetDeg)}}}),n("kpsHE",function(e,s){t(e.exports,"FlexibleLocalChangesEx",function(){return a});var i=r("dldqc"),n=r("6nrDu"),o=r("jWYxK");class a extends o.Solver{static #T(t,e){let s=new Set(t);return s.add(e),s}#tR=0;#tk=0;#D=0;#v=0;#j=0;constructor(t){super(t),this.#tO()}name(){return"Flexible Local Changes Ex"}#tA(t,e){let s=new Map;for(let t of e)if(t.isDefined())for(let e of t)s.has(e)?s.set(e,(s.get(e)??0)+1):s.set(e,1);let i=[...t];i.sort((t,e)=>{let i=0,r=0;return(s.has(t)&&(i=s.get(t)??0),s.has(e)&&(r=s.get(e)??0),i<r)?1:i>r?-1:0});let r=new Set;for(let t of i){let s=!1;for(let t of e)if(t.isDefined()){s=!0;break}if(!s)break;t.clear(),r.add(t)}return r}#tO(){let t=1,e=0;for(let s of this._pro.variables())for(let i of s){let s=i.lowestConsistencyDegree(),r=i.highestConsistencyDegree();s<t&&(t=s),r>e&&(e=r)}this.#tk=t,this.#tR=e}#tF(t,e,s,i,r,n,o){let l=this.#tA(e,n),h=a.#T(t,s),u=e.difference(l);return this.#tI(h,u,l,i,Math.min(r,i),o)}#tT(t,e,s,i,r,o){let a=this.#tk;if(0===s.domain().size())return a;let l=(0,n.AssignmentList).fromVariables(e),h=s.domain().at(0),u=(0,n.AssignmentList).fromVariables(e);for(let f=0;f<s.domain().size()&&a<r;++f){let c=s.domain().at(f);s.assign(c);let d=Math.min(i,this.#tM(t,s,a,o));if(d>Math.max(a,o)){let i=new Set,f=Math.min(Math.min(d,r),this.#tj(t,e,s,d,r,i));if(f>a&&(a=f,h=c,l=(0,n.AssignmentList).fromVariables(e)),i.size){let f=this.#tF(t,e,s,d,r,i,Math.max(o,a));if(-1!==this.#j)return a;f>a&&(a=f,h=c,l=(0,n.AssignmentList).fromVariables(e)),u.apply()}}}return l.apply(),s.assign(h),a}#tI(t,e,s,i,r,n){for(e=new Set(e),s=new Set(s);;){if(this._debugOutput(`X1 ${t.size}, X2' ${e.size}, X3' ${s.size}`),null!==this._targetDeg&&this._targetDeg<=this._pro.worstSatisfactionDegree())return this._debugOutput("stop: current degree is above the target"),this.#j=1,r;if(this._iterLimit&&this._iterLimit<this.#D++)return this._debugOutput("stop: number of iterations has reached the limit"),this.#j=0,r;if(this.#v<Date.now())return this._debugOutput("stop: time limit has been reached"),this.#j=0,r;if(0===s.size)return r;let o=s.values().next().value,a=this.#tT(t,e,o,i,r,n);if(-1!==this.#j)return r;if(a<n)return this.#tk;e.add(o),s.delete(o),r=a}}#tW(t,e){let s=new Set;for(let e of t)for(let t of e)s.add(t);let r=1;for(let t of s){let e=t.satisfactionDegree();e!==i.Constraint.UNDEFINED&&e<r&&(r=e)}for(let t of this._pro.constraints())t.lowestConsistencyDegree()<this.#tR&&e.add(t);return r}#tM(t,e,s,r){let n=1,o=new Set;for(let s of t)for(let t of this._pro.constraintsBetween(s,e))o.add(t);for(let t of o){let e=t.satisfactionDegree();if(e!==i.Constraint.UNDEFINED&&(e<n&&(n=e),n<=s||n<=r))break}return n}#tj(t,e,s,r,n,o){let a=1,l=new Set;for(let e of t)for(let t of this._pro.constraintsBetween(e,s))l.add(t);for(let t of e)for(let e of this._pro.constraintsBetween(t,s))l.add(e);for(let t of l){let e=t.satisfactionDegree();e!==i.Constraint.UNDEFINED&&e<a&&(a=e)}for(let t of l){let e=t.satisfactionDegree();e!==i.Constraint.UNDEFINED&&(e<r||e<n)&&o.add(t)}return a}exec(){let t;this.#v=null===this._timeLimit?Number.MAX_VALUE:Date.now()+this._timeLimit,this.#D=0,this.#j=-1;let e=this._pro.worstSatisfactionDegree();0===this._pro.emptyVariableSize()&&this._pro.clearAllVariables();let s=new Set,i=new Set,r=new Set;for(let t of this._pro.variables())(t.isEmpty()?r:i).add(t);let o=new Set,a=this.#tW(i,o),l=null;0===r.size?(t=a,l=(0,n.AssignmentList).fromVariables(i)):t=this.#tk;let h=this.#tA(i,o).union(r),u=i.difference(h),f=this.#tI(s,u,h,this.#tR,this.#tR,t);return f<t&&null!==l&&l.apply(),(f=this._pro.worstSatisfactionDegree())>e&&f>0&&(0!==this.#j||null===this._targetDeg)}}}),n("ksORy",function(e,s){t(e.exports,"FuzzyBreakout",function(){return o});var i=r("6nrDu"),n=r("jWYxK");class o extends n.Solver{#X=!0;#$;#tU=0;constructor(t){super(t),this.#$=Array(this._pro.constraintSize()),this.#$.fill(1)}name(){return"Fuzzy Breakout"}setRandomness(t){this.#X=t}#q(t,e){let s=0;for(let i of t){let t=i.value(),r=0;for(let t of i)r+=(1-t.satisfactionDegree())*this.#$[t.index()];t:for(let n of i.domain()){if(t===n)continue;i.assign(n);let o=r;for(let t of i)if((o-=(1-t.satisfactionDegree())*this.#$[t.index()])<s)continue t;o>s?(s=o,e.clear(),e.addVariable(i,n)):0!==s&&e.addVariable(i,n)}i.assign(t)}}#tH(t){let e=new Set;for(let s of t)for(let t of s)e.add(t);return Array.from(e)}exec(){let t=null===this._timeLimit?Number.MAX_VALUE:Date.now()+this._timeLimit,e=0;for(let t of this._pro.variables())t.isEmpty()&&t.assign(t.domain().at(0));let s=this._pro.worstSatisfactionDegree(),r=new i.AssignmentList,n=new i.AssignmentList;for(;;){let[s,i]=this._pro.constraintsWithWorstSatisfactionDegree();if(null!==this._targetDeg&&this._targetDeg<=i)return this._debugOutput("stop: current degree is above the target"),!0;if(this._iterLimit&&this._iterLimit<e++){this._debugOutput("stop: number of iterations has reached the limit");break}if(t<Date.now()){this._debugOutput("stop: time limit has been reached");break}if(this._debugOutput("worst satisfaction degree: "+i),this.#tU<i&&(n.setProblem(this._pro),this.#tU=i,this.foundSolution(n,this.#tU)))return!0;if(this.#q(this.#tH(s),r),0<r.size()){let t=this.#X?r.random():r.at(0);t.apply(),r.clear(),this._debugOutput("	"+t)}else{for(let t of s)this.#$[t.index()]+=1;this._debugOutput("breakout")}}return!!(null===this._targetDeg&&s<this._pro.worstSatisfactionDegree())}}}),n("8e260",function(e,s){t(e.exports,"FuzzyGENET",function(){return o});var i=r("6nrDu"),n=r("jWYxK");class o extends n.Solver{static nextInt(t){return Math.floor(Math.random()*Math.floor(t))}#Y=[];#G=[];#tB;constructor(t,e=1){super(t),this.#tB=e}name(){return"Fuzzy GENET"}#J(t){this._debugOutput("network creation start");let e=[];for(let t of this._pro.variables()){if(0===t.domain().size())return!1;this.#Y.push(new a(t))}for(let s of this._pro.constraints())if(1===s.size()){let i=s.at(0),r=this.#Y[i.index()];for(let n=0;n<r.size();++n){let o=i.value();i.assign(r.get(n)._value),s.satisfactionDegree()<=t&&e.push(new l(s,r.get(n))),i.assign(o)}}else{let i=s.at(0),r=s.at(1),n=this.#Y[i.index()],o=this.#Y[r.index()];for(let a=0;a<n.size();++a){let h=i.value();i.assign(n.get(a)._value);for(let i=0;i<o.size();++i){let h=r.value();r.assign(o.get(i)._value),s.satisfactionDegree()<=t&&e.push(new l(s,n.get(a),o.get(i))),r.assign(h)}i.assign(h)}}for(let t of this.#Y)for(let e of t._neurons)e.lockConnections();return this.#G=e,this._debugOutput("network creation complete"),!0}#Q(t){for(let e=t.length;e>1;--e){let s=o.nextInt(e),i=t[e-1];t[e-1]=t[s],t[s]=i}return t}exec(){if(!this.#J(this.#tB))throw Error();let t=null===this._timeLimit?Number.MAX_VALUE:Date.now()+this._timeLimit,e=0,s=new i.AssignmentList,r=[];for(let t=0;t<this.#Y.length;++t)r.push(t);let n=this._pro.worstSatisfactionDegree(),o=!1;for(;;){if(this._iterLimit&&this._iterLimit<e++){this._debugOutput("stop: number of iterations has reached the limit");break}if(t<Date.now()){this._debugOutput("stop: time limit has been reached");break}let i=!1;for(let t of this.#Q(r))this.#Y[t].setActivityMaximumInput()&&(i=!0);if(i){for(let t of this.#Y)t.applyToVariable();let t=this._pro.worstSatisfactionDegree();if(n<t){if(n=t,this._debugOutput(`worst satisfaction degree: ${t}`),s.setProblem(this._pro),this.foundSolution(s,t)){o=!0;break}if(null===this._targetDeg)o=!0;else if(this._targetDeg<=n){this._debugOutput("stop: current degree is above the target"),o=!0;break}}}else{for(let t of this.#G)t.refreshWeight();continue}}return s.apply(),o}}class a{static nextInt(t){return Math.floor(Math.random()*Math.floor(t))}#L;#h=0;#Z=[];_neurons=[];constructor(t){for(let e of(this.#L=t,t.domain()))this._neurons.push(new h(e));this.#tt(a.nextInt(this._neurons.length))}#tt(t){for(let t of this._neurons)t._isActive=!1;this._neurons[t]._isActive=!0,this.#h=t}applyToVariable(){this.#L.assign(this._neurons[this.#h]._value)}get(t){return this._neurons[t]}neurons(){return this._neurons}setActivityMaximumInput(){this.#Z.length=0;let t=Number.NEGATIVE_INFINITY,e=!1;for(let s=0;s<this._neurons.length;++s){let i=this._neurons[s].getInput();t<=i&&(t<i&&(t=i,this.#Z.length=0,e=!1),this.#Z.push(s),this.#h===s&&(e=!0))}return!e&&0!==this.#Z.length&&(this.#tt(this.#Z[a.nextInt(this.#Z.length)]),!0)}size(){return this._neurons.length}}class l{#tP;#te;#ts;_weight;constructor(t,e,s=null){this._weight=t.satisfactionDegree()-1,this.#tP=t,this.#te=e,this.#te.addConnection(this),this.#ts=s,null!==this.#ts&&this.#ts.addConnection(this)}getNeuron(t){return t===this.#te?this.#ts:t===this.#ts?this.#te:null}refreshWeight(){this.#te._isActive&&(null===this.#ts||this.#ts._isActive)&&(1===this.#tP.size()?this._weight+=this.#tP.fuzzyRelation().satisfactionDegree(this.#te._value)-1:this._weight+=this.#tP.fuzzyRelation().satisfactionDegree(this.#te._value,this.#ts._value)-1)}}class h{#ti=[];#G=[];_value;_isActive=!1;constructor(t){this._value=t}addConnection(t){this.#ti.push(t)}lockConnections(){this.#G=[...this.#ti],this.#ti=null}getInput(){let t=0;for(let e of this.#G){let s=e.getNeuron(this);t+=e._weight*(null===s||s._isActive?1:0)}return t}}}),n("dfK30",function(e,s){t(e.exports,"SRS3",function(){return a});var i=r("dldqc"),n=r("6nrDu"),o=r("jWYxK");class a extends o.Solver{static REPAIR_THRESHOLD=0;#tr=new Set;#tn=new Set;#to=[];#ta=[];#tX=new Set;#D=0;#v=0;#X=!0;constructor(t){for(let e of(super(t),this._pro.constraints()))this.#to.push(new l(e)),this.#ta.push(null)}name(){return"SRS 3"}#tl(t){let e=t.index();return null===this.#ta[e]&&(this.#ta[e]=t.neighbors()),this.#ta[e]}#th(t){this._debugOutput("repair");let e=new n.AssignmentList,s=t.satisfactionDegree(),r=this._pro.worstSatisfactionDegree(),o=t.satisfactionDegree();for(let n of t){let l=n.value();t:for(let h of n.domain()){if(l===h)continue;n.assign(h);let u=t.satisfactionDegree();if(!(s>u)&&!(o-u>a.REPAIR_THRESHOLD)){for(let e of n){if(e===t)continue;let s=e.satisfactionDegree();if(s!==i.Constraint.UNDEFINED&&s<r)continue t}u>o&&(o=u,e.clear()),e.addVariable(n,h)}}n.assign(l)}if(e.size()>0){let t=this.#X?e.random():e.at(0);return t.apply(),this._debugOutput("	"+t),!0}return!1}#tu(t){this._debugOutput("shrink");let e=!1;for(;;){if(t=t.parent(),this.#tX.delete(t)){e=!0;break}if(!this.#th(t.parent().getObject()))break}let s=[];for(let e of(t.getDescendants(s),s))e.clear(),this.#tn.delete(e),this.#tr.delete(e);e||this.#tn.add(t)}#tf(t){for(let e of(this._debugOutput("spread"),this.#tr.add(t),this.#tl(t.getObject()))){let s=this.#to[e.index()];this.#tr.has(s)||this.#tn.has(s)||(t.add(s),this.#tn.add(s))}}#tc(){this._debugOutput("srs");let[t]=this._pro.constraintsWithWorstSatisfactionDegree();for(let e of t){let t=this.#to[e.index()];t.setParent(null),this.#tX.add(t)}for(let t of(this.#tr.clear(),this.#tn.clear(),this.#tX))this.#tn.add(t);for(;this.#tX.size&&this.#tn.size;){if(this._iterLimit&&this._iterLimit<this.#D++)return this._debugOutput("stop: number of iterations has reached the limit"),!1;if(this.#v<Date.now())return this._debugOutput("stop: time limit has been reached"),!1;let t=this.#tn.values().next().value;if(this.#tn.delete(t),this.#th(t.getObject())){if(this.#tX.delete(t))continue;if(this.#th(t.parent().getObject())){this.#tu(t);continue}}this.#tf(t)}return!0}exec(){if(this.#v=null===this._timeLimit?Number.MAX_VALUE:Date.now()+this._timeLimit,this.#D=0,this._targetDeg&&this._targetDeg<=this._pro.worstSatisfactionDegree())return!0;let t=new n.AssignmentList,e=!1;for(;this.#tc()&&!this.#tX.size;){let s=this._pro.worstSatisfactionDegree();if(this._debugOutput(`	found a solution: ${s}	${this._targetDeg}`),t.setProblem(this._pro),this.foundSolution(t,s)){e=!0;break}if(null===this._targetDeg)e=!0;else if(this._targetDeg<=s){this._debugOutput("stop: current degree is above the target"),e=!0;break}}return e}setRandomness(t){this.#X=t}}class l{#td=[];#tg;#tm;constructor(t){this.#tg=null,this.#tm=t}add(t){t.#tg=this,this.#td.push(t)}clear(){for(let t of this.#td)t.#tg=null;this.#td.length=0}getDescendants(t){for(let e of(t.push(this),this.#td))e.getDescendants(t)}getObject(){return this.#tm}parent(){return this.#tg}setParent(t){this.#tg=t}}}),n("9wYtf",function(e,s){t(e.exports,"SRS3_PF",function(){return a});var i=r("6nrDu"),n=r("6E6oA"),o=r("dfK30");class a extends o.SRS3{constructor(t){super(t)}name(){return"SRS 3 + PF"}exec(){let t=0,e=0;this._debug&&(t=this._pro.worstSatisfactionDegree(),e=this._pro.emptyVariableSize());let s=new i.AssignmentList;s.setProblem(this._pro);let r=super.exec();return r&&(0,n.PostStabilization).apply(this._pro,s),this._debugOutput(`result: ${r?"success":"failure"}`),this._debugOutput(`satisfaction degree: ${t} -> ${this._pro.worstSatisfactionDegree()}`),this._debugOutput(`unassigned size: ${e} -> ${this._pro.emptyVariableSize()}`),r}}}),n("6E6oA",function(e,s){t(e.exports,"PostStabilization",function(){return i});class i{static apply(t,e){let s;console.log("start post-stabilization");let i=0;do{console.log("post-stabilization: count "+i++),s=!1;let r=t.worstSatisfactionDegree(),n=t.variables();for(let i=0;i<n.length;++i){let o=n[i],a=o.value(),l=e.at(i);a!==l.value()&&(l.apply(),t.worstSatisfactionDegree()>=r?s=!0:o.assign(a))}}while(s)return console.log("finish post-stabilization"),!0}}}),n("gXtgR",function(t,e){}),n("gIE9K",function(t,e){}),n("SSONT",function(t,e){r("e7Kt8"),r("jQeFi")}),n("8B8kR",function(t,e){}),n("iljD2",function(e,s){function i(t){return new Promise(e=>{let s=setInterval(()=>{t()&&(clearInterval(s),e(null))},100)})}function r(t="output"){let e=document.getElementById(t);return t=>{e.value+=`${t}
`,setTimeout(()=>e.scrollTo(0,e.scrollHeight),100)}}t(e.exports,"waitFor",function(){return i}),t(e.exports,"createLogOutput",function(){return r})});
//# sourceMappingURL=index.950b969f.js.map
