var b=s=>{throw TypeError(s)};var g=(s,e,t)=>e.has(s)||b("Cannot "+t);var u=(s,e,t)=>(g(s,e,"read from private field"),t?t.call(s):e.get(s)),m=(s,e,t)=>e.has(s)?b("Cannot add the same private member more than once"):e instanceof WeakSet?e.add(s):e.set(s,t),x=(s,e,t,o)=>(g(s,e,"write to private field"),o?o.call(s,t):e.set(s,t),t),p=(s,e,t)=>(g(s,e,"access private method"),t);import{S as A,A as w}from"./assignment-list-NtRAOzA7.js";var c,a,f,S,k,y;class z extends A{constructor(){super();m(this,f);m(this,c,!0);m(this,a)}setRandomness(t){x(this,c,t)}name(){return"Breakout"}preprocess(){x(this,a,new Array(this.pro.constraintSize())),u(this,a).fill(1);for(const t of this.pro.variables())t.isEmpty()&&t.assign(t.domain().at(0));this.monitor.initialize()}exec(){const t=this.pro.ratio(),o=new w;let i=t;const r=new w;let l=null;for(;;){const h=this.pro.violatingConstraints(),n=this.pro.ratio();if(this.monitor.outputDebugString(`Evaluation: ${n}`),i<n&&(o.setProblem(this.pro),i=n,this.monitor.solutionFound(o,i)))return!0;if((l=this.monitor.check(n))!==null)break;p(this,f,S).call(this,h,r)}return l===!1&&!this.monitor.isTargetAssigned()&&t<i&&(o.apply(),l=!0),l}}c=new WeakMap,a=new WeakMap,f=new WeakSet,S=function(t,o){if(p(this,f,k).call(this,p(this,f,y).call(this,t),o),0<o.size()){const i=u(this,c)?o.random():o.at(0);i.apply(),o.clear(),this.monitor.outputDebugString("	"+i)}else{for(const i of t)u(this,a)[i.index()]+=1;this.monitor.outputDebugString("Breakout")}},k=function(t,o){let i=0;for(const r of t){const l=r.value();let h=0;for(const n of r)h+=(1-n.status())*u(this,a)[n.index()];t:for(const n of r.domain()){if(l===n)continue;r.assign(n);let d=h;for(const v of r)if(d-=(1-v.status())*u(this,a)[v.index()],d<i)continue t;i<d?(i=d,o.clear(),o.addVariable(r,n)):i!==0&&o.addVariable(r,n)}r.assign(l)}},y=function(t){const o=new Set;for(const i of t)for(const r of i)o.add(r);return Array.from(o)};export{z as Breakout};
