var V=s=>{throw TypeError(s)};var w=(s,o,i)=>o.has(s)||V("Cannot "+i);var e=(s,o,i)=>(w(s,o,"read from private field"),i?i.call(s):o.get(s)),f=(s,o,i)=>o.has(s)?V("Cannot add the same private member more than once"):o instanceof WeakSet?o.add(s):o.set(s,i),p=(s,o,i,t)=>(w(s,o,"write to private field"),t?t.call(s,i):o.set(s,i),i),l=(s,o,i)=>(w(s,o,"access private method"),i);import{S as A,A as F}from"./assignment-list-FlCq_3L1.js";import{c as P,D as R,i as D}from"./problems-NShnYMbn.js";import"./worker-B4Z8Nnq-.js";var c,g,h,d,x,a,S,k,y,z,C;class L extends A{constructor(){super();f(this,a);f(this,c);f(this,g);f(this,h);f(this,d);f(this,x,!0)}setUsingMinimumRemainingValuesHeuristics(i){p(this,x,i)}name(){return"Forward Checking"}preprocess(){p(this,c,[...this.pro.variables()]),p(this,g,P(this.pro,e(this,c))),p(this,h,Array.from(e(this,c),i=>new R(i.domain().size()))),p(this,d,new F),this.pro.clearAllVariables(),this.monitor.initialize()}exec(){const i=l(this,a,S).call(this,0);return e(this,d).apply(),i===!0}}c=new WeakMap,g=new WeakMap,h=new WeakMap,d=new WeakMap,x=new WeakMap,a=new WeakSet,S=function(i){if(i===this.pro.variableSize()){const n=this.pro.ratio();return e(this,d).setProblem(this.pro),this.monitor.outputDebugString(`	Evaluation ${n}`),this.monitor.solutionFound(e(this,d),n),!0}let t=null;if((t=this.monitor.check())!==null)return t;const r=e(this,c)[e(this,x)?D(e(this,c),e(this,h)):i],u=r.domain(),b=e(this,h)[r.index()];for(let n=0,m=u.size();n<m;++n)if(!(b.isPruned(n)||(r.assign(u.at(n)),l(this,a,C).call(this,r)))){if(l(this,a,k).call(this,i,r)&&(t=l(this,a,S).call(this,i+1),t!==null))break;for(const v of e(this,h))v.recover(i)}if(t===null){for(const n of e(this,h))n.recover(i);r.clear()}return t},k=function(i,t){for(const r of e(this,c)){if(!r.isEmpty())continue;const u=l(this,a,y).call(this,t.index(),r.index()),b=e(this,h)[r.index()],n=r.domain();for(const m of u)if(m.emptyVariableSize()===1&&!l(this,a,z).call(this,i,r,n,b,m))return!1}return!0},y=function(i,t){return i<t?e(this,g)[t][i]:e(this,g)[i][t]},z=function(i,t,r,u,b){for(let n=0,m=r.size();n<m;++n)u.isPruned(n)||(t.assign(r.at(n)),b.isSatisfied()===0&&u.prune(n,i));return t.clear(),!u.isEmpty()},C=function(i){let t=0;for(const r of i)r.isSatisfied()===0&&++t;return t};export{L as ForwardChecking};
