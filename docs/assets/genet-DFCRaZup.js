var F=Object.defineProperty;var M=e=>{throw TypeError(e)};var W=(e,t,s)=>t in e?F(e,t,{enumerable:!0,configurable:!0,writable:!0,value:s}):e[t]=s;var x=(e,t,s)=>W(e,typeof t!="symbol"?t+"":t,s),y=(e,t,s)=>t.has(e)||M("Cannot "+s);var n=(e,t,s)=>(y(e,t,"read from private field"),s?s.call(e):t.get(e)),r=(e,t,s)=>t.has(e)?M("Cannot add the same private member more than once"):t instanceof WeakSet?t.add(e):t.set(e,s),f=(e,t,s,i)=>(y(e,t,"write to private field"),i?i.call(e,s):t.set(e,s),s),m=(e,t,s)=>(y(e,t,"access private method"),s);import{S as j,A as L}from"./assignment-list-18Vwhrrg.js";import"./worker-DxrqhyTU.js";var u,v,p,V,C,G;class q extends j{constructor(){super();r(this,p);r(this,u);r(this,v)}name(){return"GENET"}preprocess(){if(f(this,u,[]),f(this,v,[]),!m(this,p,V).call(this))throw new Error;this.monitor.initialize()}exec(){const s=[...Array(n(this,u).length).keys()],i=this.pro.ratio(),o=new L;let h=i,c=null;for(;;){const _=this.pro.ratio();if(this.monitor.outputDebugString(`Evaluation: ${_}`),h<_&&(o.setProblem(this.pro),h=_,this.monitor.solutionFound(o,h)))return!0;if((c=this.monitor.check(_))!==null)break;m(this,p,C).call(this,s)}return c===!1&&!this.monitor.isTargetAssigned()&&i<h&&(o.apply(),c=!0),c}}u=new WeakMap,v=new WeakMap,p=new WeakSet,V=function(){this.monitor.outputDebugString("Start of Network Generation");const s=[];for(const i of this.pro.variables()){if(i.domain().size()===0)return!1;n(this,u).push(new O(i))}for(const i of this.pro.constraints())if(i.size()===1){const o=i.at(0),h=n(this,u)[o.index()];for(const c of h){const _=o.value();o.assign(c._value),i.status()!==1&&s.push(new T(i,c)),o.assign(_)}}else{const o=i.at(0),h=i.at(1),c=n(this,u)[o.index()],_=n(this,u)[h.index()];for(const I of c){const z=o.value();o.assign(I._value);for(const S of _){const D=h.value();h.assign(S._value),i.status()!==1&&s.push(new T(i,I,S)),h.assign(D)}o.assign(z)}}return f(this,v,s),this.monitor.outputDebugString("End of Network Generation"),!0},C=function(s){let i=!1;for(const o of m(this,p,G).call(this,s))n(this,u)[o].setActivityMaximumInput()&&(i=!0);if(i)for(const o of n(this,u))o.applyToVariable();else{for(const o of n(this,v))o.refreshWeight();this.monitor.outputDebugString("	Refresh weights")}},G=function(s){for(let i=s.length-1;0<i;--i){const o=Math.floor(Math.random()*(i+1));[s[i],s[o]]=[s[o],s[i]]}return s};var A,d,g,N,E;class O{constructor(t){r(this,N);r(this,A);r(this,d,0);r(this,g,[]);x(this,"_ns",[]);f(this,A,t);for(const s of t.domain())this._ns.push(new P(s));m(this,N,E).call(this,k(this._ns.length))}applyToVariable(){n(this,A).assign(this._ns[n(this,d)]._value)}setActivityMaximumInput(){n(this,g).length=0;let t=Number.NEGATIVE_INFINITY,s=!1;for(let i=0;i<this._ns.length;++i){const o=this._ns[i].getInput();t<=o&&(t<o&&(t=o,n(this,g).length=0,s=!1),n(this,g).push(i),n(this,d)===i&&(s=!0))}return s||n(this,g).length===0?!1:(m(this,N,E).call(this,n(this,g)[k(n(this,g).length)]),!0)}[Symbol.iterator](){return this._ns[Symbol.iterator]()}}A=new WeakMap,d=new WeakMap,g=new WeakMap,N=new WeakSet,E=function(t){for(const s of this._ns)s._isActive=!1;this._ns[t]._isActive=!0,f(this,d,t)};var w,l,a;class T{constructor(t,s,i=null){r(this,w);r(this,l);r(this,a);x(this,"_w");f(this,w,t),f(this,l,s),f(this,a,i),this._w=t.status()-1,n(this,l).addConnection(this),n(this,a)&&n(this,a).addConnection(this)}getNeuron(t){return t===n(this,l)?n(this,a):t===n(this,a)?n(this,l):null}refreshWeight(){if(!n(this,l)._isActive||n(this,a)!==null&&!n(this,a)._isActive)return;const t=n(this,w).relation();n(this,w).size()===1?this._w+=t(n(this,l)._value)-1:this._w+=t(n(this,l)._value,n(this,a)._value)-1}}w=new WeakMap,l=new WeakMap,a=new WeakMap;var b;class P{constructor(t){r(this,b,[]);x(this,"_value");x(this,"_isActive",!1);this._value=t}addConnection(t){n(this,b).push(t)}getInput(){let t=0;for(const s of n(this,b)){const i=s.getNeuron(this);t+=s._w*(i===null||i._isActive?1:0)}return t}}b=new WeakMap;function k(e){return Math.floor(Math.random()*Math.floor(e))}export{q as GENET};
