var b=o=>{throw TypeError(o)};var g=(o,s,t)=>s.has(o)||b("Cannot "+t);var u=(o,s,t)=>(g(o,s,"read from private field"),t?t.call(o):s.get(o)),m=(o,s,t)=>s.has(o)?b("Cannot add the same private member more than once"):s instanceof WeakSet?s.add(o):s.set(o,t),x=(o,s,t,e)=>(g(o,s,"write to private field"),e?e.call(o,t):s.set(o,t),t),p=(o,s,t)=>(g(o,s,"access private method"),t);import{S as k,A as w}from"./assignment-list-BbFZ540P.js";import"./worker-ZPKUM24c.js";var c,a,f,y,z,S;class B extends k{constructor(){super();m(this,f);m(this,c,!0);m(this,a)}setRandomness(t){x(this,c,t)}name(){return"Fuzzy Breakout"}preprocess(){x(this,a,new Array(this.pro.constraintSize())),u(this,a).fill(1);for(const t of this.pro.variables())t.isEmpty()&&t.assign(t.domain().at(0));this.monitor.initialize()}exec(){const t=this.pro.degree(),e=new w;let i=t;const r=new w;let l=null;for(;;){const[d,n]=this.pro.constraintsWithDegree();if(this.monitor.outputDebugString(`Evaluation: ${n}`),i<n&&(e.setProblem(this.pro),i=n,this.monitor.solutionFound(e,i)))return!0;if((l=this.monitor.check(n))!==null)break;p(this,f,y).call(this,d,r)}return l===!1&&!this.monitor.isTargetAssigned()&&t<i&&(e.apply(),l=!0),l}}c=new WeakMap,a=new WeakMap,f=new WeakSet,y=function(t,e){if(p(this,f,z).call(this,p(this,f,S).call(this,t),e),0<e.size()){const i=u(this,c)?e.random():e.at(0);i.apply(),e.clear(),this.monitor.outputDebugString("	"+i)}else{for(const i of t)u(this,a)[i.index()]+=1;this.monitor.outputDebugString("Breakout")}},z=function(t,e){let i=0;for(const r of t){const l=r.value();let d=0;for(const n of r)d+=(1-n.degree())*u(this,a)[n.index()];t:for(const n of r.domain()){if(l===n)continue;r.assign(n);let h=d;for(const v of r)if(h-=(1-v.degree())*u(this,a)[v.index()],h<i)continue t;i<h?(i=h,e.clear(),e.addVariable(r,n)):i!==0&&e.addVariable(r,n)}r.assign(l)}},S=function(t){const e=new Set;for(const i of t)for(const r of i)e.add(r);return Array.from(e)};export{B as FuzzyBreakout};
