var st=Object.defineProperty;var d=(a,e)=>()=>(a&&(e=a(a=0)),e);var x=(a,e)=>{for(var t in e)st(a,t,{get:e[t],enumerable:!0})};var P,F=d(()=>{"use strict";P=class{#e=-1;#r="";userObject=null;setIndex(e){this.#e=e}setName(e){this.#r=e}index(){return this.#e}name(){return this.#r}}});var w,k=d(()=>{"use strict";F();w=class a extends P{static#e=Number.MIN_VALUE;d;es=[];v=a.#e;constructor(e){super(),this.d=e}toString(){let e=this.name(),t=e?`(${e})`:"",r=this.isEmpty()?"<empty>":""+this.value();return`x${this.index()}${t} = ${r}`}size(){return this.es.length}at(e){return this.es.at(e)}has(e){return this.es.includes(e)}indexOf(e){return this.es.indexOf(e)}neighbors(){let e=[];for(let t of this.es)for(let r of t)r!==this&&e.push(r);return e}[Symbol.iterator](){return this.es[Symbol.iterator]()}connect(e){if(this.es.includes(e))throw new RangeError;this.es.push(e)}disconnect(e){if(!this.es.includes(e))throw new RangeError;this.es=this.es.filter(t=>t!==e)}domain(e){if(e===void 0)return this.d;this.d=e,this.clear()}assign(e){this.v=e}clear(){this.assign(a.#e)}value(){return this.v}isEmpty(){return this.value()===a.#e}}});var C,G,W,j=d(()=>{"use strict";C=class{static create(e,t=null){if(Array.isArray(e))return new G(e);if(t!==null)return new W(e,t);throw new RangeError}},G=class extends C{#e;constructor(e){super(),this.#e=[...e]}contains(e){return this.#e.includes(e)}indexOf(e){return this.#e.indexOf(e)}size(){return this.#e.length}at(e){return this.#e[e]}[Symbol.iterator](){return this.#e[Symbol.iterator]()}},W=class extends C{#e;#r;constructor(e,t){super(),this.#e=e|0,this.#r=t|0}contains(e){return this.#e<=e&&e<=this.#r}indexOf(e){return this.#e<=e&&e<=this.#r?e-this.#e:-1}size(){return this.#r-this.#e+1}at(e){return this.#e+e}[Symbol.iterator](){let e=this.#e,t=this.#r;return{next(){return e<=t?{value:e++,done:!1}:{value:null,done:!0}}}}}});var D,H,Y,q,J,K=d(()=>{"use strict";F();D=class extends P{static create(e,t){return t.length===1?new H(e,t[0]):t.length===2?new Y(e,t[0],t[1]):t.length===3?new q(e,t[0],t[1],t[2]):new J(e,...t)}r;es=[];constructor(e){super(),this.r=e}toString(){let e=this.name(),t=e?`(${e})`:"",r=this.degree(),n=r<0?"UNDEFINED":""+r;return`c${this.index()}${t} = ${n}`}size(){return this.es.length}at(e){return this.es.at(e)}has(e){return this.es.includes(e)}indexOf(e){return this.es.indexOf(e)}neighbors(){let e=[];for(let t of this.es)for(let r of t)r!==this&&e.push(r);return e}[Symbol.iterator](){return this.es[Symbol.iterator]()}relation(){return this.r}},H=class extends D{constructor(e,t){super(e),this.es=[t]}emptySize(){return this.es[0].isEmpty()?1:0}isDefined(){return!this.es[0].isEmpty()}status(){return this.es[0].isEmpty()?-1:this.r(this.es[0].value())===1?1:0}degree(){return this.es[0].isEmpty()?-1:this.r(this.es[0].value())}},Y=class extends D{constructor(e,t,r){super(e),this.es=[t,r]}emptySize(){let e=0;return this.es[0].isEmpty()&&++e,this.es[1].isEmpty()&&++e,e}isDefined(){return!this.es[0].isEmpty()&&!this.es[1].isEmpty()}status(){return this.es[0].isEmpty()||this.es[1].isEmpty()?-1:this.r(this.es[0].value(),this.es[1].value())===1?1:0}degree(){return this.es[0].isEmpty()||this.es[1].isEmpty()?-1:this.r(this.es[0].value(),this.es[1].value())}},q=class extends D{constructor(e,t,r,n){super(e),this.es=[t,r,n]}emptySize(){let e=0;return this.es[0].isEmpty()&&++e,this.es[1].isEmpty()&&++e,this.es[2].isEmpty()&&++e,e}isDefined(){return!this.es[0].isEmpty()&&!this.es[1].isEmpty()&&!this.es[2].isEmpty()}status(){return this.es[0].isEmpty()||this.es[1].isEmpty()||this.es[2].isEmpty()?-1:this.r(this.es[0].value(),this.es[1].value(),this.es[2].value())===1?1:0}degree(){return this.es[0].isEmpty()||this.es[1].isEmpty()||this.es[2].isEmpty()?-1:this.r(this.es[0].value(),this.es[1].value(),this.es[2].value())}},J=class extends D{#e;constructor(e,...t){super(e),this.es=[...t],this.#e=new Array(this.es.length)}emptySize(){let e=0;for(let t of this.es)e+=t.isEmpty()?1:0;return e}isDefined(){for(let e of this.es)if(e.isEmpty())return!1;return!0}status(){for(let e=0;e<this.es.length;++e){let t=this.es[e];if(t.isEmpty())return-1;this.#e[e]=t.value()}return this.r(...this.#e)===1?1:0}degree(){for(let e=0;e<this.es.length;++e){let t=this.es[e];if(t.isEmpty())return-1;this.#e[e]=t.value()}return this.r(...this.#e)}}});var I,Q=d(()=>{"use strict";k();j();K();I=class{#e=e=>new w(e);#r=(e,t)=>D.create(e,t);#t=[];#n=[];setVariableFactory(e){this.#e=e}setConstraintFactory(e){this.#r=e}addVariable(e){e.setIndex(this.#t.length),this.#t.push(e)}createDomain(e,t=null){if(Array.isArray(e))return C.create(e);if(t!==null)return C.create(e,t);throw new RangeError}createVariable(e,t=null,r){if(e instanceof w){let n=this.#e(e.domain());return this.addVariable(n),n.setName(n.name()),n.assign(n.value()),n}else if(e instanceof C){if(t!==null&&!e.contains(t))throw new Error;let n=this.#e(e);return this.addVariable(n),t!==null&&n.assign(t),r&&n.setName(r),n}throw new RangeError}createConstraint(e,t,r){let n=this.#r(e,t);n.setIndex(this.#n.length),this.#n.push(n);for(let s of t)s.connect(n);return r&&n.setName(r),n}removeConstraint(e){let t=this.#n.indexOf(e);this.#n.splice(t,1);for(let r=t;r<this.#n.length;++r)this.#n[r].setIndex(r);for(let r of e)r.disconnect(e)}clearAllVariables(){for(let e of this.#t)e.clear()}reverseVariables(){this.#t.reverse();for(let e=0;e<this.#t.length;++e)this.#t[e].setIndex(e)}sortVariables(e){this.#t.sort(e);for(let t=0;t<this.#t.length;++t)this.#t[t].setIndex(t)}variables(){return this.#t}variableSize(){return this.#t.length}variableAt(e){return this.#t[e]}variableOf(e){for(let t of this.#t)if(t.name()===e)return t;return null}hasVariable(e){return this.#t.includes(e)}constraints(){return this.#n}constraintSize(){return this.#n.length}constraintAt(e){return this.#n[e]}constraintOf(e){for(let t of this.#n)if(t.name()===e)return t;return null}hasConstraint(e){return this.#n.includes(e)}constraintsBetween(e,t){let r=[];for(let n of e)n.has(t)&&r.push(n);return r}constraintDensity(){return this.#n.length/this.#t.length}emptySize(){let e=0;for(let t of this.#t)e+=t.isEmpty()?1:0;return e}hasEmptyDomain(){for(let e of this.#t)if(e.domain().size()===0)return!0;return!1}degree(){let e=1;for(let t of this.#n){let r=t.degree();if(r<0)return r;r<e&&(e=r)}return e}constraintsWithDegree(){let e=[],t=1;for(let r of this.#n){let n=r.degree();n<t?(t=n,e.length=0,e.push(r)):n-t<Number.MIN_VALUE*10&&e.push(r)}return[e,t]}averageDegree(){let e=0;for(let t of this.#n)e+=t.degree();return e/this.#n.length}ratio(){return this.satisfiedConstraintSize()/this.#n.length}satisfiedConstraintSize(){let e=0;for(let t of this.#n)e+=t.status()===1?1:0;return e}violatingConstraintSize(){return this.#n.length-this.satisfiedConstraintSize()}satisfiedConstraints(){let e=[];for(let t of this.#n)t.status()===1&&e.push(t);return e}violatingConstraints(){let e=[];for(let t of this.#n)t.status()===0&&e.push(t);return e}}});var M,Z=d(()=>{"use strict";M=class{#e=!0;#r=e=>console.log(e);#t=()=>!1;#n=Number.MAX_SAFE_INTEGER;#i=null;#s=.8;#o=null;#a=0;#u=0;#l=-1;#m=0;initialize(){this.#a=this.#i===null?Number.MAX_VALUE:Date.now()+this.#i,this.#u=0}check(e=null){if(e!==null&&this.#s!==null&&this.#s<=e)return this.outputDebugString("Stop: Current evaluation value is above the target"),!0;if(this.#n<this.#u++)return this.outputDebugString("Stop: Number of iterations has reached the limit"),!1;if(this.#a<Date.now())return this.outputDebugString("Stop: Time limit has been reached"),!1;if(e!==null&&this.#o!==null)if(e!==-1&&this.#l===e){if(this.#o<this.#m++)return this.outputDebugString("Stop: Evaluation value has not changed for a certain number of times"),!1}else this.#l=e,this.#m=0;return null}solutionFound(e,t){return this.#t(e,t)}outputDebugString(e){this.#e&&this.#r(e)}isDebugMode(){return this.#e}isTargetAssigned(){return this.#s!==null}getTarget(){return this.#s}setIterationLimit(e=null){this.#n=e===null?Number.MAX_SAFE_INTEGER:e}setTimeLimit(e=null){this.#i=e}setTarget(e=null){this.#s=e}setSameEvaluationLimit(e=null){this.#o=e}setListener(e){this.#t=e}setDebugMode(e){this.#e=e}setDebugOutput(e){this.#r=e}}});var f,g=d(()=>{"use strict";Z();f=class{pro;monitor;constructor(){}name(){return""}solve(e,t=new M){this.pro=e,this.monitor=t,this.preprocess();let r=this.exec();return this.postprocess(),r}preprocess(){}exec(){return!1}postprocess(){}}});var N,X=d(()=>{"use strict";k();N=class a{#e;#r;constructor(e,t=null){if(e instanceof a)this.#e=e.variable(),this.#r=e.value();else if(e instanceof w)this.#e=e,this.#r=t??e.value();else throw new RangeError}apply(){this.#e.assign(this.#r)}toString(){return`v${this.#e.index()} <- ${this.#r}`}value(){return this.#r}variable(){return this.#e}}});function Ft(a=Math.random()*997){$=ot(a)}function It(){return $()}function V(a){return console.log($===Math.random),Math.floor($()*a)}function ot(a){let e=a;return()=>(e=e^e<<13,e=e^e>>17,e=e^e<<15,(e+2147483648)/4294967295)}var $,T=d(()=>{"use strict";$=Math.random});var c,v=d(()=>{"use strict";X();T();c=class a{static fromVariables(e){let t=new a;return t.setVariables(e),t}#e=[];constructor(){}setProblem(e){this.#e.length=0;for(let t of e.variables())this.#e.push(new N(t))}setAssignmentList(e){this.#e.length=0;for(let t of e)this.#e.push(new N(t))}setVariables(e){this.#e.length=0;for(let t of e)this.#e.push(new N(t))}addVariable(e,t=null){this.#e.push(new N(e,t))}apply(){for(let e of this.#e)e.apply()}clear(){this.#e.length=0}isEmpty(){return this.#e.length===0}size(){return this.#e.length}differenceSize(){let e=0;for(let t of this.#e)t.variable().value()!==t.value()&&++e;return e}at(e){return this.#e[e]}[Symbol.iterator](){return this.#e[Symbol.iterator]()}random(){return this.#e[V(this.#e.length)]}}});function Ie(a){let e=1,t=0;for(let r of a.constraints()){let n=ee(r),s=at(r);n<e&&(e=n),t<s&&(t=s)}return[e,t]}function at(a){let e=a.size();return e===1?ut(a):e===2?mt(a):e===3?ht(a):ft(a)}function ee(a){let e=a.size();return e===1?lt(a):e===2?ct(a):e===3?bt(a):dt(a)}function ut(a){let e=a.degree();if(0<=e)return e;let t=a.at(0),r=0;for(let n of t.domain()){let s=a.relation()(n);if(r<s&&(r=s),r===1)return 1}return r}function lt(a){let e=a.degree();if(0<=e)return e;let t=a.at(0),r=1;for(let n of t.domain()){let s=a.relation()(n);if(s<r&&(r=s),r===0)return 0}return r}function mt(a){let e=a.degree();if(0<=e)return e;let t=a.at(0),r=a.at(1),n=t.isEmpty()?t.domain():[t.value()],s=r.isEmpty()?r.domain():[r.value()],i=0;for(let o of n)for(let u of s){let l=a.relation()(o,u);if(i<l&&(i=l),i===1)return 1}return i}function ct(a){let e=a.degree();if(0<=e)return e;let t=a.at(0),r=a.at(1),n=t.isEmpty()?t.domain():[t.value()],s=r.isEmpty()?r.domain():[r.value()],i=1;for(let o of n)for(let u of s){let l=a.relation()(o,u);if(l<i&&(i=l),i===0)return 0}return i}function ht(a){let e=a.degree();if(0<=e)return e;let t=a.at(0),r=a.at(1),n=a.at(2),s=t.isEmpty()?t.domain():[t.value()],i=r.isEmpty()?r.domain():[r.value()],o=n.isEmpty()?n.domain():[n.value()],u=0;for(let l of s)for(let m of i)for(let h of o){let b=a.relation()(l,m,h);if(u<b&&(u=b),u===1)return 1}return u}function bt(a){let e=a.degree();if(0<=e)return e;let t=a.at(0),r=a.at(1),n=a.at(2),s=t.isEmpty()?t.domain():[t.value()],i=r.isEmpty()?r.domain():[r.value()],o=n.isEmpty()?n.domain():[n.value()],u=1;for(let l of s)for(let m of i)for(let h of o){let b=a.relation()(l,m,h);if(b<u&&(u=b),u===0)return 0}return u}function ft(a){let e=a.degree();if(0<=e)return e;let t=new Array(a.emptySize()),r=0,n=new Array(a.size());for(let s=0,i=a.size();s<i;++s){let o=a.at(s);o.isEmpty()?t[r++]=s:n[s]=o.value()}return Me(a,n,t,0,0)}function dt(a){let e=a.degree();if(0<=e)return e;let t=new Array(a.emptySize()),r=0,n=new Array(a.size());for(let s=0,i=a.size();s<i;++s){let o=a.at(s);o.isEmpty()?t[r++]=s:n[s]=o.value()}return $e(a,n,t,0,1)}function Me(a,e,t,r,n){let s=t[r],i=a.at(s).domain();if(r===t.length-1)for(let o of i){e[s]=o;let u=a.relation()(...e);if(n<u&&(n=u),n===1)return 1}else for(let o of i)e[s]=o,n=Me(a,e,t,r+1,n);return n}function $e(a,e,t,r,n){let s=t[r],i=a.at(s).domain();if(r===t.length-1)for(let o of i){e[s]=o;let u=a.relation()(...e);if(u<n&&(n=u),n===0)return 0}else for(let o of i)e[s]=o,n=$e(a,e,t,r+1,n);return n}var te=d(()=>{"use strict"});var Oe={};x(Oe,{FlexibleLocalChanges:()=>re});function pt(a,e){return new Set(a).add(e)}var re,ne=d(()=>{"use strict";v();te();g();re=class extends f{#e;#r;#t;#n;constructor(){super()}name(){return"Flexible Local Changes"}preprocess(){[this.#r,this.#e]=Ie(this.pro),this.#t=this.pro.degree(),this.pro.emptySize()===0&&this.pro.clearAllVariables(),this.#n=-1,this.monitor.initialize()}exec(){let e=new Set,t=new Set,r=new Set;for(let h of this.pro.variables())(h.isEmpty()?r:t).add(h);let n=new Set,s=this.#u(t,n),i,o=null;r.size===0?(i=s,o=c.fromVariables(t)):i=this.#r;let u=this.#i(t,n).union(r),l=t.difference(u),m=this.#s(e,l,u,this.#e,this.#e,i);return m<i&&o!==null&&o.apply(),m=this.pro.degree(),this.#t<m&&0<m&&(this.#n!==0||this.monitor.getTarget()===null)}#i(e,t){let r=new Map;for(let i of t)if(i.isDefined())for(let o of i)r.has(o)?r.set(o,(r.get(o)??0)+1):r.set(o,1);let n=[...e];n.sort((i,o)=>{let u=0,l=0;return r.has(i)&&(u=r.get(i)??0),r.has(o)&&(l=r.get(o)??0),u<l?1:l<u?-1:0});let s=new Set;for(let i of n){let o=!1;for(let u of t)if(u.isDefined()){o=!0;break}if(!o)break;i.clear(),s.add(i)}return s}#s(e,t,r,n,s,i){for(t=new Set(t),r=new Set(r);;){this.monitor.outputDebugString(`X1 ${e.size}, X2' ${t.size}, X3' ${r.size}`);let o=this.monitor.check(this.pro.degree());if(o!==null)return this.#n=o?1:0,s;if(r.size===0)return s;let u=r.values().next().value,l=this.#o(e,t,u,n,s,i);if(this.#n!==-1)return s;if(l<i)return this.#r;t.add(u),r.delete(u),s=l}}#o(e,t,r,n,s,i){let o=this.#r;if(r.domain().size()===0)return o;let u=c.fromVariables(t),l=r.domain().at(0),m=c.fromVariables(t);for(let h=0;h<r.domain().size()&&o<s;++h){let b=r.domain().at(h);r.assign(b);let p=Math.min(n,this.#l(e,r,o,i));if(Math.max(o,i)<p){let S=new Set,R=Math.min(Math.min(p,s),this.#m(e,t,r,p,s,S));if(o<R&&(o=R,l=b,u=c.fromVariables(t)),S.size){let A=this.#a(e,t,r,p,s,S,Math.max(i,o));if(this.#n!==-1)return o;o<A&&(o=A,l=b,u=c.fromVariables(t)),m.apply()}}}return u.apply(),r.assign(l),o}#a(e,t,r,n,s,i,o){let u=this.#i(t,i),l=pt(e,r),m=t.difference(u);return this.#s(l,m,u,n,Math.min(s,n),o)}#u(e,t){let r=new Set;for(let s of e)for(let i of s)r.add(i);let n=1;for(let s of r){let i=s.degree();i<0||i<n&&(n=i)}for(let s of this.pro.constraints())ee(s)<this.#e&&t.add(s);return n}#l(e,t,r,n){let s=1,i=new Set;for(let o of e){let u=this.pro.constraintsBetween(o,t);for(let l of u)i.add(l)}for(let o of i){let u=o.degree();if(!(u<0)&&(u<s&&(s=u),s<=r||s<=n))return s}return s}#m(e,t,r,n,s,i){let o=1,u=new Set;for(let l of e){let m=this.pro.constraintsBetween(l,r);for(let h of m)u.add(h)}for(let l of t){let m=this.pro.constraintsBetween(l,r);for(let h of m)u.add(h)}for(let l of u){let m=l.degree();m<0||m<o&&(o=m)}for(let l of u){let m=l.degree();m<0||(m<n||m<s)&&i.add(l)}return o}}});function E(a,e){let t=0,r=Number.MAX_VALUE;for(let n=0;n<a.length;++n){let s=a[n];if(!s.isEmpty())continue;let o=s.domain().size()-e[s.index()].prunedSize();o<r&&(r=o,t=n)}return t}var y,L=d(()=>{"use strict";y=class a{static#e=Number.MIN_SAFE_INTEGER;#r;#t=0;constructor(e){this.#r=new Array(e),this.#r.fill(a.#e)}prunedSize(){return this.#t}prune(e,t){if(this.#r[e]===a.#e)++this.#t;else throw new Error;this.#r[e]=t}isEmpty(){return this.#r.length===this.#t}isPruned(e){return this.#r[e]!==a.#e}recover(e){for(let t=0;t<this.#r.length;++t)this.#r[t]===e&&(this.#r[t]=a.#e,--this.#t)}recoverAll(){this.#r.fill(a.#e),this.#t=0}}});var Ue,O,ie=d(()=>{"use strict";k();Ue=class extends w{#e;constructor(e,t){super(e),this.#e=t}assign(e){super.assign(e),this.#e&&this.#e(this,e)}},O=class extends w{#e;constructor(e){super(e.domain()),this.#e=e,this.setName(e.name()),this.assign(e.value())}assign(e){this.#e.assign(e)}domain(e){if(e===void 0)return this.#e.domain();this.#e.domain(e)}value(){return this.#e.value()}}});function Jt(a,e){let t=[...a],r=[...e],n=new Array(e.length),s=1;for(let i=n.length-1;i>=0;--i)n[i]=s,s*=r[i].size();return(...i)=>{if(n.length!==i.length)throw new RangeError;let o=0;for(let u=0;u<n.length;++u)o+=n[u]*r[u].indexOf(i[u]);return t[o]}}function Kt(a,e){let t=[...a],r=[...e],n=new Array(e.length),s=1;for(let i=n.length-1;i>=0;--i)n[i]=s,s*=r[i].size();return(...i)=>{if(n.length!==i.length)throw new RangeError;let o=0;for(let u=0;u<n.length;++u)o+=n[u]*r[u].indexOf(i[u]);return t[o]}}function Be(a,e){return(...t)=>{let r=a(...t);return 0<r&&r<e?0:r}}var se=d(()=>{"use strict"});function z(a,e){let t=[];for(let r=0;r<e.length;++r){t.push(new Array(e.length));for(let n=0;n<e.length;++n)n<r&&(t[r][n]=a.constraintsBetween(e[n],e[r]))}return t}function rr(a){let e=new Array(a.variableSize());for(let t of a.variables())e[t.index()]=gt(a,t);return e}function gt(a,e){let t=new Array(a.variableSize());t.fill(Number.MAX_VALUE);let r=new Set;r.add(e),t[e.index()]=0,Ge(a,e,t,0,r);let n=0,s=0;for(let i=0;i<t.length;++i)t[i]!==Number.MAX_VALUE&&i!==e.index()&&(++n,s+=t[i]);return n===0?0:s/n}function Ge(a,e,t,r,n){let s=[];for(let i of e)for(let o of i)t[o.index()]===Number.MAX_VALUE&&(s.push(o),t[o.index()]=r+1);for(let i of s)n.add(i);for(let i of s)Ge(a,i,t,r+1,n)}function nr(a){let e=[];for(let t of a.variables())e.push(t.domain());return e}function ir(a,e){for(let t=0;t<e.length;++t)a.variableAt(t).domain(e[t])}function sr(a,e){for(let t of a.constraints()){if(t.size()!==1)continue;let r=t.at(0),n=r.value();for(let s of r.domain())r.assign(s),e.push(t.degree());r.assign(n)}return e}function or(a,e){let t=new oe;for(let r of a.variables())t.createVariable(r);for(let r of a.constraints()){let n=[];for(let s of r)n.push(t.variableAt(s.index()));t.createConstraint(Be(r.relation(),e),n)}return t}var oe,_=d(()=>{"use strict";Q();k();ie();se();oe=class extends I{createVariable(e,t=null,r=""){if(e instanceof w){let n=new O(e);return this.addVariable(n),n}throw new RangeError}}});var We={};x(We,{FullChecking:()=>ae});var ae,ue=d(()=>{"use strict";v();L();_();g();ae=class extends f{#e;#r;#t;#n;#i;#s;#o;#a;#u=!0;#l=0;#m=!1;constructor(){super()}setUsingMinimumRemainingValuesHeuristics(e){this.#u=e}setPrePruningDegree(e){this.#l=e}setIntensivePruning(e){this.#m=e}name(){return"Full Checking"}preprocess(){this.#e=[...this.pro.variables()],this.#r=z(this.pro,this.#e),this.#t=Array.from(this.#e,e=>new y(e.domain().size())),this.#n=new c,this.#i=new Set,this.#s=new Array(this.pro.variableSize()),this.#o=this.#l,this.monitor.initialize()}exec(){let e=null;for(;e===null;){if(this.#a=!1,this.pro.clearAllVariables(),!this.#h()){e=!1;break}e=this.#c(0),this.#n.apply()}return e===!0}#h(){for(let e of this.pro.constraints()){if(e.size()!==1)continue;let t=e.at(0),r=t.domain(),n=this.#t[t.index()],s=e.relation();for(let i=0,o=r.size();i<o;++i)n.isPruned(i)||s(r.at(i))<=this.#o&&n.prune(i,-1);if(n.isEmpty())return!1}return!0}#c(e,t=1){if(e===this.pro.variableSize()){let o=this.pro.degree();return this.#n.setProblem(this.pro),this.monitor.outputDebugString(`	Evaluation ${o}`),this.#o<o&&(this.#o=o,this.#a=!0,this.monitor.solutionFound(this.#n,o))?!0:this.monitor.check(o)}let r=null;if((r=this.monitor.check())!==null)return r;let n=this.#e[this.#u?E(this.#e,this.#t):e],s=n.domain(),i=this.#t[n.index()];this.#s[e]=n;for(let o=0,u=s.size();o<u;++o){if(i.isPruned(o))continue;n.assign(s.at(o));let l=Math.min(t,this.#V(n));if(!(l<=this.#o)){if(this.#b(e,n)&&(r=this.#c(e+1,l),r!==null||this.#a))break;for(let m of this.#t)m.recover(e)}}if(r===null){for(let o of this.#t)o.recover(e);n.clear()}return r}#b(e,t){for(let r of this.#e){if(!r.isEmpty())continue;let n=this.#f(t.index(),r.index()),s=this.#t[r.index()],i=r.domain();for(let o of n){let u=o.emptySize();if(u===1){if(!this.#d(e,r,i,s,o))return!1}else if(this.#m){if(u===2){if(!this.#p(e,r,i,s,o))return!1}else if(u===3){if(!this.#g(e,r,i,s,o))return!1}else if(3<u&&!this.#v(e,r,i,s,o,u))return!1}}}return!0}#f(e,t){return e<t?this.#r[t][e]:this.#r[e][t]}#d(e,t,r,n,s){for(let i=0,o=r.size();i<o;++i)n.isPruned(i)||(t.assign(r.at(i)),s.degree()<=this.#o&&n.prune(i,e));return t.clear(),!n.isEmpty()}#p(e,t,r,n,s){let i=null;for(let l of s)if(l.isEmpty()&&l!==t){i=l;break}let o=i.domain(),u=this.#t[i.index()];e:for(let l=0,m=r.size();l<m;++l)if(!n.isPruned(l)){t.assign(r.at(l));for(let h=0,b=o.size();h<b;++h)if(!u.isPruned(h)&&(i.assign(o.at(h)),this.#o<s.degree()))continue e;n.prune(l,e)}return i.clear(),t.clear(),!n.isEmpty()}#g(e,t,r,n,s){let i=null,o=null;for(let b of s)if(b.isEmpty()&&b!==t)if(i===null)i=b;else{o=b;break}let u=i.domain(),l=o.domain(),m=this.#t[i.index()],h=this.#t[o.index()];e:for(let b=0,p=r.size();b<p;++b)if(!n.isPruned(b)){t.assign(r.at(b));for(let S=0,R=u.size();S<R;++S)if(!m.isPruned(S)){i.assign(u.at(S));for(let A=0,it=l.size();A<it;++A)if(!h.isPruned(A)&&(o.assign(l.at(A)),this.#o<s.degree()))continue e}n.prune(b,e)}return o.clear(),i.clear(),t.clear(),!n.isEmpty()}#v(e,t,r,n,s,i){let o=new Array(i-1),u=0;for(let m of s)m.isEmpty()&&m!==t&&(o[u++]=m);let l=new Array(o.length);e:for(let m=0,h=r.size();m<h;++m)if(!n.isPruned(m)){t.assign(r.at(m)),l.fill(0);t:for(;;){let b=!1;for(let p=0;p<o.length;++p){let S=o[p].domain();if(this.#t[o[p].index()].isPruned(l[p])){b=!0;break}o[p].assign(S.at(l[p]))}if(!b&&this.#o<s.degree())continue e;for(let p=0;p<o.length&&(l[p]+=1,!(l[p]<o[p].domain().size()));++p)if(l[p]=0,p===o.length-1)break t}n.prune(m,e)}for(let m of o)m.clear();return t.clear(),!n.isEmpty()}#V(e){let t=Number.MAX_VALUE;this.#i.clear();for(let r of this.#e){if(r===e||r.isEmpty())continue;let n=this.#f(e.index(),r.index());for(let s of n)if(!this.#i.has(s)){let i=s.degree();0<=i&&i<t&&(t=i),this.#i.add(s)}}return t}}});var je={};x(je,{FuzzyBreakout:()=>le});var le,me=d(()=>{"use strict";v();g();le=class extends f{#e=!0;#r;constructor(){super()}setRandomness(e){this.#e=e}name(){return"Fuzzy Breakout"}preprocess(){this.#r=new Array(this.pro.constraintSize()),this.#r.fill(1);for(let e of this.pro.variables())e.isEmpty()&&e.assign(e.domain().at(0));this.monitor.initialize()}exec(){let e=this.pro.degree(),t=new c,r=e,n=new c,s=null;for(;;){let[i,o]=this.pro.constraintsWithDegree();if(this.monitor.outputDebugString(`Evaluation: ${o}`),r<o&&(t.setProblem(this.pro),r=o,this.monitor.solutionFound(t,r)))return!0;if((s=this.monitor.check(o))!==null)break;this.#t(i,n)}return s===!1&&!this.monitor.isTargetAssigned()&&e<r&&(t.apply(),s=!0),s}#t(e,t){if(this.#n(this.#i(e),t),0<t.size()){let r=this.#e?t.random():t.at(0);r.apply(),t.clear(),this.monitor.outputDebugString("	"+r)}else{for(let r of e)this.#r[r.index()]+=1;this.monitor.outputDebugString("Breakout")}}#n(e,t){let r=0;for(let n of e){let s=n.value(),i=0;for(let o of n)i+=(1-o.degree())*this.#r[o.index()];e:for(let o of n.domain()){if(s===o)continue;n.assign(o);let u=i;for(let l of n)if(u-=(1-l.degree())*this.#r[l.index()],u<r)continue e;r<u?(r=u,t.clear(),t.addVariable(n,o)):r!==0&&t.addVariable(n,o)}n.assign(s)}}#i(e){let t=new Set;for(let r of e)for(let n of r)t.add(n);return Array.from(t)}}});var He={};x(He,{FuzzyForwardChecking:()=>ce});var ce,he=d(()=>{"use strict";v();L();_();g();ce=class extends f{#e;#r;#t;#n;#i;#s;#o=!0;#a=0;constructor(){super()}setUsingMinimumRemainingValuesHeuristics(e){this.#o=e}setPrePruningDegree(e){this.#a=e}name(){return"Fuzzy Forward Checking"}preprocess(){this.#e=[...this.pro.variables()],this.#r=z(this.pro,this.#e),this.#t=Array.from(this.#e,e=>new y(e.domain().size())),this.#n=new c,this.#i=this.#a,this.monitor.initialize()}exec(){let e=null;for(;e===null;){if(this.#s=!1,this.pro.clearAllVariables(),!this.#u()){e=!1;break}e=this.#l(0),this.#n.apply()}return e===!0}#u(){for(let e of this.pro.constraints()){if(e.size()!==1)continue;let t=e.at(0),r=t.domain(),n=this.#t[t.index()],s=e.relation();for(let i=0,o=r.size();i<o;++i)n.isPruned(i)||s(r.at(i))<=this.#i&&n.prune(i,-1);if(n.isEmpty())return!1}return!0}#l(e,t=1){if(e===this.pro.variableSize()){let o=this.pro.degree();return this.#n.setProblem(this.pro),this.monitor.outputDebugString(`	Evaluation ${o}`),this.#i<o&&(this.#i=o,this.#s=!0,this.monitor.solutionFound(this.#n,o))?!0:this.monitor.check(o)}let r=null;if((r=this.monitor.check())!==null)return r;let n=this.#e[this.#o?E(this.#e,this.#t):e],s=n.domain(),i=this.#t[n.index()];for(let o=0,u=s.size();o<u;++o){if(i.isPruned(o))continue;n.assign(s.at(o));let l=Math.min(t,this.#b(n));if(!(l<=this.#i)){if(this.#m(e,n)&&(r=this.#l(e+1,l),r!==null||this.#s))break;for(let m of this.#t)m.recover(e)}}if(r===null){for(let o of this.#t)o.recover(e);n.clear()}return r}#m(e,t){for(let r of this.#e){if(!r.isEmpty())continue;let n=this.#h(t.index(),r.index()),s=this.#t[r.index()],i=r.domain();for(let o of n)if(o.emptySize()===1&&!this.#c(e,r,i,s,o))return!1}return!0}#h(e,t){return e<t?this.#r[t][e]:this.#r[e][t]}#c(e,t,r,n,s){for(let i=0,o=r.size();i<o;++i)n.isPruned(i)||(t.assign(r.at(i)),s.degree()<=this.#i&&n.prune(i,e));return t.clear(),!n.isEmpty()}#b(e){let t=Number.MAX_VALUE;for(let r of e){let n=r.degree();0<=n&&n<t&&(t=n)}return t}}});var Ye={};x(Ye,{FuzzyGENET:()=>be});var be,fe,U,de,pe=d(()=>{"use strict";v();T();g();be=class extends f{#e;#r;#t;constructor(){super()}setThreshold(e){this.#t=e}name(){return"Fuzzy GENET"}preprocess(){if(this.#e=[],this.#r=[],this.#t=1,!this.#n())throw new Error;this.monitor.initialize()}exec(){let e=[...Array(this.#e.length).keys()],t=this.pro.degree(),r=new c,n=t,s=null;for(;;){let i=this.pro.degree();if(this.monitor.outputDebugString(`Evaluation: ${i}`),n<i&&(r.setProblem(this.pro),n=i,this.monitor.solutionFound(r,n)))return!0;if((s=this.monitor.check(i))!==null)break;this.#i(e)}return s===!1&&!this.monitor.isTargetAssigned()&&t<n&&(r.apply(),s=!0),s}#n(){this.monitor.outputDebugString("Start of Network Generation");let e=[];for(let t of this.pro.variables()){if(t.domain().size()===0)return!1;this.#e.push(new fe(t))}for(let t of this.pro.constraints())if(t.size()===1){let r=t.at(0),n=this.#e[r.index()];for(let s of n){let i=r.value();r.assign(s._value),t.degree()<=this.#t&&e.push(new U(t,s)),r.assign(i)}}else{let r=t.at(0),n=t.at(1),s=this.#e[r.index()],i=this.#e[n.index()];for(let o of s){let u=r.value();r.assign(o._value);for(let l of i){let m=n.value();n.assign(l._value),t.degree()<=this.#t&&e.push(new U(t,o,l)),n.assign(m)}r.assign(u)}}return this.#r=e,this.monitor.outputDebugString("End of Network Generation"),!0}#i(e){let t=!1;for(let r of this.#s(e))this.#e[r].setActivityMaximumInput()&&(t=!0);if(t)for(let r of this.#e)r.applyToVariable();else{for(let r of this.#r)r.refreshWeight();this.monitor.outputDebugString("	Refresh weights")}}#s(e){for(let t=e.length-1;0<t;--t){let r=V(t+1);[e[t],e[r]]=[e[r],e[t]]}return e}},fe=class{#e;#r=0;#t=[];_ns=[];constructor(e){this.#e=e;for(let t of e.domain())this._ns.push(new de(t));this.#n(V(this._ns.length))}#n(e){for(let t of this._ns)t._isActive=!1;this._ns[e]._isActive=!0,this.#r=e}applyToVariable(){this.#e.assign(this._ns[this.#r]._value)}setActivityMaximumInput(){this.#t.length=0;let e=Number.NEGATIVE_INFINITY,t=!1;for(let r=0;r<this._ns.length;++r){let n=this._ns[r].getInput();e<=n&&(e<n&&(e=n,this.#t.length=0,t=!1),this.#t.push(r),this.#r===r&&(t=!0))}return t||this.#t.length===0?!1:(this.#n(this.#t[V(this.#t.length)]),!0)}[Symbol.iterator](){return this._ns[Symbol.iterator]()}},U=class{#e;#r;#t;_w;constructor(e,t,r=null){this.#e=e,this.#r=t,this.#t=r,this._w=e.degree()-1,this.#r.addConnection(this),this.#t&&this.#t.addConnection(this)}getNeuron(e){return e===this.#r?this.#t:e===this.#t?this.#r:null}refreshWeight(){if(!this.#r._isActive||this.#t!==null&&!this.#t._isActive)return;let e=this.#e.relation();this.#e.size()===1?this._w+=e(this.#r._value)-1:this._w+=e(this.#r._value,this.#t._value)-1}},de=class{#e=[];_value;_isActive=!1;constructor(e){this._value=e}addConnection(e){this.#e.push(e)}getInput(){let e=0;for(let t of this.#e){let r=t.getNeuron(this);e+=t._w*(r===null||r._isActive?1:0)}return e}}});var qe={};x(qe,{SRS3:()=>ge});var ge,ve,Ve=d(()=>{"use strict";v();T();g();ge=class extends f{#e;#r;#t;#n;#i;#s=!0;constructor(){super()}setRandomness(e){this.#s=e}name(){return"SRS3"}preprocess(){this.#e=new Array(this.pro.constraintSize()),this.#e.fill(1),this.#r=new Set,this.#t=new Set,this.#n=[],this.#i=[];for(let e of this.pro.constraints())this.#n.push(new ve(e)),this.#i.push(null);for(let e of this.pro.variables())e.isEmpty()&&e.assign(e.domain().at(0));this.monitor.initialize()}exec(){let e=this.pro.degree(),t=new c,r=e,n=null;for(;;){let[s,i]=this.pro.constraintsWithDegree();if(this.monitor.outputDebugString(`Evaluation: ${i}`),r<i&&(t.setProblem(this.pro),r=i,this.monitor.solutionFound(t,r)))return!0;if((n=this.monitor.check(i))!==null)break;for(let u of this.#n)u.clear();let o=new Set;for(let u of s){let l=this.#n[u.index()];o.add(l)}this.#o(o)}return n===!1&&!this.monitor.isTargetAssigned()&&e<r&&(t.apply(),n=!0),n}#o(e){this.monitor.outputDebugString("SRS"),this.#r.clear(),this.#t.clear();for(let t of e)this.#t.add(t);for(;e.size&&this.#t.size;){let t=this.#h(this.#t);this.#t.delete(t),this.#u(t)?e.delete(t)||(t.parent()&&this.#u(t.parent())?this.#l(t,e):this.#a(t)):this.#a(t)}return e.size===0}#a(e){this.monitor.outputDebugString("Spread"),this.#r.add(e);for(let t of this.#m(e))!this.#r.has(t)&&!this.#t.has(t)&&(t.clear(),e.append(t),this.#t.add(t))}#u(e){this.monitor.outputDebugString("Repair");let t=e.constraint(),r=e;do this.#e[r.constraint().index()]+=1;while(r=r.parent());let n=t.degree(),s=new c,i=0;for(let o of t){let u=o.value(),l=0;for(let m of o)l+=(1-m.degree())*this.#e[m.index()];e:for(let m of o.domain()){if(u===m||(o.assign(m),t.degree()<=n))continue;let h=l;for(let b of o)if(h-=(1-b.degree())*this.#e[b.index()],h<i)continue e;i<h?(i=h,s.clear(),s.addVariable(o,m)):i!==0&&s.addVariable(o,m)}o.assign(u)}if(0<s.size()){let o=this.#s?s.random():s.at(0);return o.apply(),this.monitor.outputDebugString("	"+o),!0}return!1}#l(e,t){this.monitor.outputDebugString("Shrink");let r=e,n=!1;for(;;){if(r=r.parent(),t.delete(r)){n=!0;break}if(!r.parent()||!this.#u(r.parent()))break}let s=[];r.getDescendants(s),r.clear();for(let i of s)this.#t.delete(i),this.#r.delete(i);n||this.#t.add(r)}#m(e){let t=e.constraint(),r=t.index();if(this.#i[r]===null){let n=[];for(let s of t.neighbors())n.push(this.#n[s.index()]);this.#i[r]=n}return this.#i[r]}#h(e){let t=this.#c(this.#b(e));return this.#s?t[V(t.length)]:t[0]}#c(e){let t=Number.MAX_VALUE,r=[];for(let n of e){let s=this.#e[n.constraint().index()];s<t?(t=s,r.length=0,r.push(n)):s===t&&r.push(n)}return r}#b(e){let t=Number.MAX_VALUE,r=[];for(let n of e){let s=n.depth();s<t?(t=s,r.length=0,r.push(n)):s===t&&r.push(n)}return r}},ve=class{#e;#r=0;#t=null;#n=[];constructor(e){this.#e=e}append(e){e.#t=this,e.#r=this.#r+1,this.#n.push(e)}clear(){this.#t=null,this.#r=0;for(let e of this.#n)e.clear();this.#n.length=0}constraint(){return this.#e}depth(){return this.#r}parent(){return this.#t}getDescendants(e){e.push(this);for(let t of this.#n)t.getDescendants(e)}}});var Je={};x(Je,{Breakout:()=>xe});var xe,we=d(()=>{"use strict";v();g();xe=class extends f{#e=!0;#r;constructor(){super()}setRandomness(e){this.#e=e}name(){return"Breakout"}preprocess(){this.#r=new Array(this.pro.constraintSize()),this.#r.fill(1);for(let e of this.pro.variables())e.isEmpty()&&e.assign(e.domain().at(0));this.monitor.initialize()}exec(){let e=this.pro.ratio(),t=new c,r=e,n=new c,s=null;for(;;){let i=this.pro.violatingConstraints(),o=this.pro.ratio();if(this.monitor.outputDebugString(`Evaluation: ${o}`),r<o&&(t.setProblem(this.pro),r=o,this.monitor.solutionFound(t,r)))return!0;if((s=this.monitor.check(o))!==null)break;this.#t(i,n)}return s===!1&&!this.monitor.isTargetAssigned()&&e<r&&(t.apply(),s=!0),s}#t(e,t){if(this.#n(this.#i(e),t),0<t.size()){let r=this.#e?t.random():t.at(0);r.apply(),t.clear(),this.monitor.outputDebugString("	"+r)}else{for(let r of e)this.#r[r.index()]+=1;this.monitor.outputDebugString("Breakout")}}#n(e,t){let r=0;for(let n of e){let s=n.value(),i=0;for(let o of n)i+=(1-o.status())*this.#r[o.index()];e:for(let o of n.domain()){if(s===o)continue;n.assign(o);let u=i;for(let l of n)if(u-=(1-l.status())*this.#r[l.index()],u<r)continue e;r<u?(r=u,t.clear(),t.addVariable(n,o)):r!==0&&t.addVariable(n,o)}n.assign(s)}}#i(e){let t=new Set;for(let r of e)for(let n of r)t.add(n);return Array.from(t)}}});var Ke={};x(Ke,{CrispSRS3:()=>Se});var Se,ye,Ce=d(()=>{"use strict";v();T();g();Se=class extends f{#e;#r;#t;#n;#i;#s=!0;constructor(){super()}setRandomness(e){this.#s=e}name(){return"Crisp SRS3"}preprocess(){this.#e=new Array(this.pro.constraintSize()),this.#e.fill(1),this.#r=new Set,this.#t=new Set,this.#n=[],this.#i=[];for(let e of this.pro.constraints())this.#n.push(new ye(e)),this.#i.push(null);for(let e of this.pro.variables())e.isEmpty()&&e.assign(e.domain().at(0));this.monitor.initialize()}exec(){let e=this.pro.degree(),t=new c,r=e,n=null;for(;;){let s=this.pro.violatingConstraints(),i=this.pro.ratio();if(this.monitor.outputDebugString(`Evaluation: ${i}`),r<i&&(t.setProblem(this.pro),r=i,this.monitor.solutionFound(t,r)))return!0;if((n=this.monitor.check(i))!==null)break;for(let u of this.#n)u.clear();let o=new Set;for(let u of s){let l=this.#n[u.index()];o.add(l)}this.#o(o)}return n===!1&&!this.monitor.isTargetAssigned()&&e<r&&(t.apply(),n=!0),n}#o(e){this.monitor.outputDebugString("SRS"),this.#r.clear(),this.#t.clear();for(let t of e)this.#t.add(t);for(;e.size&&this.#t.size;){let t=this.#h(this.#t);this.#t.delete(t),this.#u(t)?e.delete(t)||(t.parent()&&this.#u(t.parent())?this.#l(t,e):this.#a(t)):this.#a(t)}return e.size===0}#a(e){this.monitor.outputDebugString("Spread"),this.#r.add(e);for(let t of this.#m(e))!this.#r.has(t)&&!this.#t.has(t)&&(t.clear(),e.append(t),this.#t.add(t))}#u(e){this.monitor.outputDebugString("Repair");let t=e.constraint(),r=e;do this.#e[r.constraint().index()]+=1;while(r=r.parent());let n=new c,s=0;for(let i of t){let o=i.value(),u=0;for(let l of i)u+=(1-l.status())*this.#e[l.index()];e:for(let l of i.domain()){if(o===l||(i.assign(l),t.status()!==1))continue;let m=u;for(let h of i)if(m-=(1-h.status())*this.#e[h.index()],m<s)continue e;s<m?(s=m,n.clear(),n.addVariable(i,l)):s!==0&&n.addVariable(i,l)}i.assign(o)}if(0<n.size()){let i=this.#s?n.random():n.at(0);return i.apply(),this.monitor.outputDebugString("	"+i),!0}return!1}#l(e,t){this.monitor.outputDebugString("Shrink");let r=e,n=!1;for(;;){if(r=r.parent(),t.delete(r)){n=!0;break}if(!r.parent()||!this.#u(r.parent()))break}let s=[];r.getDescendants(s),r.clear();for(let i of s)this.#t.delete(i),this.#r.delete(i);n||this.#t.add(r)}#m(e){let t=e.constraint(),r=t.index();if(this.#i[r]===null){let n=[];for(let s of t.neighbors())n.push(this.#n[s.index()]);this.#i[r]=n}return this.#i[r]}#h(e){let t=this.#c(this.#b(e));return this.#s?t[V(t.length)]:t[0]}#c(e){let t=Number.MAX_VALUE,r=[];for(let n of e){let s=this.#e[n.constraint().index()];s<t?(t=s,r.length=0,r.push(n)):s===t&&r.push(n)}return r}#b(e){let t=Number.MAX_VALUE,r=[];for(let n of e){let s=n.depth();s<t?(t=s,r.length=0,r.push(n)):s===t&&r.push(n)}return r}},ye=class{#e;#r=0;#t=null;#n=[];constructor(e){this.#e=e}append(e){e.#t=this,e.#r=this.#r+1,this.#n.push(e)}clear(){this.#t=null,this.#r=0;for(let e of this.#n)e.clear();this.#n.length=0}constraint(){return this.#e}depth(){return this.#r}parent(){return this.#t}getDescendants(e){e.push(this);for(let t of this.#n)t.getDescendants(e)}}});var Qe={};x(Qe,{ForwardChecking:()=>De});var De,Ee=d(()=>{"use strict";v();L();_();g();De=class extends f{#e;#r;#t;#n;#i=!0;constructor(){super()}setUsingMinimumRemainingValuesHeuristics(e){this.#i=e}name(){return"Forward Checking"}preprocess(){this.#e=[...this.pro.variables()],this.#r=z(this.pro,this.#e),this.#t=Array.from(this.#e,e=>new y(e.domain().size())),this.#n=new c,this.pro.clearAllVariables(),this.monitor.initialize()}exec(){let e=this.#s(0);return this.#n.apply(),e===!0}#s(e){if(e===this.pro.variableSize()){let i=this.pro.ratio();return this.#n.setProblem(this.pro),this.monitor.outputDebugString(`	Evaluation ${i}`),this.monitor.solutionFound(this.#n,i),!0}let t=null;if((t=this.monitor.check())!==null)return t;let r=this.#e[this.#i?E(this.#e,this.#t):e],n=r.domain(),s=this.#t[r.index()];for(let i=0,o=n.size();i<o;++i)if(!(s.isPruned(i)||(r.assign(n.at(i)),this.#l(r)))){if(this.#o(e,r)&&(t=this.#s(e+1),t!==null))break;for(let l of this.#t)l.recover(e)}if(t===null){for(let i of this.#t)i.recover(e);r.clear()}return t}#o(e,t){for(let r of this.#e){if(!r.isEmpty())continue;let n=this.#a(t.index(),r.index()),s=this.#t[r.index()],i=r.domain();for(let o of n)if(o.emptySize()===1&&!this.#u(e,r,i,s,o))return!1}return!0}#a(e,t){return e<t?this.#r[t][e]:this.#r[e][t]}#u(e,t,r,n,s){for(let i=0,o=r.size();i<o;++i)n.isPruned(i)||(t.assign(r.at(i)),s.status()===0&&n.prune(i,e));return t.clear(),!n.isEmpty()}#l(e){let t=0;for(let r of e)r.status()===0&&++t;return t}}});var Ze={};x(Ze,{GENET:()=>ze});var ze,Ae,B,Ne,Te=d(()=>{"use strict";v();T();g();ze=class extends f{#e;#r;constructor(){super()}name(){return"GENET"}preprocess(){if(this.#e=[],this.#r=[],!this.#t())throw new Error;this.monitor.initialize()}exec(){let e=[...Array(this.#e.length).keys()],t=this.pro.ratio(),r=new c,n=t,s=null;for(;;){let i=this.pro.ratio();if(this.monitor.outputDebugString(`Evaluation: ${i}`),n<i&&(r.setProblem(this.pro),n=i,this.monitor.solutionFound(r,n)))return!0;if((s=this.monitor.check(i))!==null)break;this.#n(e)}return s===!1&&!this.monitor.isTargetAssigned()&&t<n&&(r.apply(),s=!0),s}#t(){this.monitor.outputDebugString("Start of Network Generation");let e=[];for(let t of this.pro.variables()){if(t.domain().size()===0)return!1;this.#e.push(new Ae(t))}for(let t of this.pro.constraints())if(t.size()===1){let r=t.at(0),n=this.#e[r.index()];for(let s of n){let i=r.value();r.assign(s._value),t.status()!==1&&e.push(new B(t,s)),r.assign(i)}}else{let r=t.at(0),n=t.at(1),s=this.#e[r.index()],i=this.#e[n.index()];for(let o of s){let u=r.value();r.assign(o._value);for(let l of i){let m=n.value();n.assign(l._value),t.status()!==1&&e.push(new B(t,o,l)),n.assign(m)}r.assign(u)}}return this.#r=e,this.monitor.outputDebugString("End of Network Generation"),!0}#n(e){let t=!1;for(let r of this.#i(e))this.#e[r].setActivityMaximumInput()&&(t=!0);if(t)for(let r of this.#e)r.applyToVariable();else{for(let r of this.#r)r.refreshWeight();this.monitor.outputDebugString("	Refresh weights")}}#i(e){for(let t=e.length-1;0<t;--t){let r=V(t+1);[e[t],e[r]]=[e[r],e[t]]}return e}},Ae=class{#e;#r=0;#t=[];_ns=[];constructor(e){this.#e=e;for(let t of e.domain())this._ns.push(new Ne(t));this.#n(V(this._ns.length))}#n(e){for(let t of this._ns)t._isActive=!1;this._ns[e]._isActive=!0,this.#r=e}applyToVariable(){this.#e.assign(this._ns[this.#r]._value)}setActivityMaximumInput(){this.#t.length=0;let e=Number.NEGATIVE_INFINITY,t=!1;for(let r=0;r<this._ns.length;++r){let n=this._ns[r].getInput();e<=n&&(e<n&&(e=n,this.#t.length=0,t=!1),this.#t.push(r),this.#r===r&&(t=!0))}return t||this.#t.length===0?!1:(this.#n(this.#t[V(this.#t.length)]),!0)}[Symbol.iterator](){return this._ns[Symbol.iterator]()}},B=class{#e;#r;#t;_w;constructor(e,t,r=null){this.#e=e,this.#r=t,this.#t=r,this._w=e.status()-1,this.#r.addConnection(this),this.#t&&this.#t.addConnection(this)}getNeuron(e){return e===this.#r?this.#t:e===this.#t?this.#r:null}refreshWeight(){if(!this.#r._isActive||this.#t!==null&&!this.#t._isActive)return;let e=this.#e.relation();this.#e.size()===1?this._w+=e(this.#r._value)-1:this._w+=e(this.#r._value,this.#t._value)-1}},Ne=class{#e=[];_value;_isActive=!1;constructor(e){this._value=e}addConnection(e){this.#e.push(e)}getInput(){let e=0;for(let t of this.#e){let r=t.getNeuron(this);e+=t._w*(r===null||r._isActive?1:0)}return e}}});var Xe={};x(Xe,{LocalChanges:()=>Pe});function vt(a,e){return new Set(a).add(e)}var Pe,ke=d(()=>{"use strict";v();g();Pe=class extends f{#e;constructor(){super()}name(){return"Local Changes"}preprocess(){this.pro.emptySize()===0&&this.pro.clearAllVariables(),this.#e=!1,this.monitor.initialize()}exec(){let e=new Set,t=new Set;for(let i of this.pro.variables())(i.isEmpty()?t:e).add(i);let r=new c,n=this.#r(new Set,e,t),s=this.pro.ratio();return this.monitor.outputDebugString(`Evaluation: ${s}`),n&&(r.setProblem(this.pro),this.monitor.solutionFound(r,s))?!0:n}#r(e,t,r){for(t=new Set(t),r=new Set(r);;){this.monitor.outputDebugString(`X1 ${e.size}, X2' ${t.size}, X3' ${r.size}`);let n=this.monitor.check(this.pro.degree());if(n!==null)return this.#e=!0,n;if(r.size===0)return!0;let s=r.values().next().value,i=this.#t(e,t,s);if(!i||this.#e)return i;t.add(s),r.delete(s)}}#t(e,t,r){for(let n of r.domain()){let s=c.fromVariables(t);r.assign(n);let i=this.#n(e,t,r);if(i||this.#e)return i;r.clear(),s.apply()}return!1}#n(e,t,r){if(!this.#i(e,r,r.value()))return!1;let n=e.union(t);if(this.#i(n,r,r.value()))return!0;let s=this.#s(n,r,r.value());return e=vt(e,r),t=t.difference(s),this.#r(e,t,s)}#i(e,t,r){let n=new Set;for(let i of e){let o=this.pro.constraintsBetween(t,i);for(let u of o)n.add(u)}let s=t.value();t.assign(r);for(let i of n)if(i.status()!==1)return t.assign(s),!1;return t.assign(s),!0}#s(e,t,r){let n=new Set,s=new Set;for(let o of e)for(let u of this.pro.constraintsBetween(t,o))s.add(u);let i=t.value();t.assign(r);for(let o of s)if(o.status()!==1)for(let u of o)n.add(u);return t.assign(i),n.delete(t),n}}});var et={};x(et,{MaxForwardChecking:()=>Le});var Le,_e=d(()=>{"use strict";v();L();_();g();Le=class extends f{#e;#r;#t;#n;#i;#s=!0;constructor(){super()}setUsingMinimumRemainingValuesHeuristics(e){this.#s=e}name(){return"Max Forward Checking"}preprocess(){this.#e=[...this.pro.variables()],this.#r=z(this.pro,this.#e),this.#t=Array.from(this.#e,e=>new y(e.domain().size())),this.#n=new c,this.#i=this.pro.constraintSize(),this.pro.clearAllVariables(),this.monitor.initialize()}exec(){let e=this.#o(0);return this.#n.apply(),e===!0}#o(e,t=0){if(e===this.pro.variableSize()){let o=this.pro.ratio();return this.#n.setProblem(this.pro),this.monitor.outputDebugString(`	Evaluation ${o}`),t<this.#i&&(this.#i=t,this.monitor.solutionFound(this.#n,o))?!0:this.monitor.check(o)}let r=null;if((r=this.monitor.check())!==null)return r;let n=this.#e[this.#s?E(this.#e,this.#t):e],s=n.domain(),i=this.#t[n.index()];for(let o=0,u=s.size();o<u;++o){if(i.isPruned(o))continue;n.assign(s.at(o));let l=t+this.#m(n);if(!(this.#i<=l)){if((t+1<this.#i||this.#a(e,n))&&(r=this.#o(e+1,l),r!==null))break;for(let m of this.#t)m.recover(e)}}if(r===null){for(let o of this.#t)o.recover(e);n.clear()}return r}#a(e,t){for(let r of this.#e){if(!r.isEmpty())continue;let n=this.#u(t.index(),r.index()),s=this.#t[r.index()],i=r.domain();for(let o of n)if(o.emptySize()===1&&!this.#l(e,r,i,s,o))return!1}return!0}#u(e,t){return e<t?this.#r[t][e]:this.#r[e][t]}#l(e,t,r,n,s){for(let i=0,o=r.size();i<o;++i)n.isPruned(i)||(t.assign(r.at(i)),s.status()===0&&n.prune(i,e));return t.clear(),!n.isEmpty()}#m(e){let t=0;for(let r of e)r.status()===0&&++t;return t}}});Q();F();k();j();K();g();Z();ne();ue();me();he();pe();Ve();we();Ce();Ee();Te();ke();_e();var tt=class a{static#e(e,t){for(let r of t.domain())if(t.assign(r),e.status()===1)return!0;return!1}static#r(e,t,r){let n=t.value(),s=r.value(),i=t.domain(),o=[],u=e.constraintsBetween(t,r);e:for(let l of i){t.assign(l);for(let m of u)if(m.size()===2&&!a.#e(m,r))continue e;o.push(l)}if(t.assign(n),r.assign(s),o.length!==i.size()){let l=e.createDomain(o);return t.domain(l),console.log(i.size()+" -> "+l.size()),!0}return!1}static apply(e){let t=[];for(let r of e.constraints())r.size()===2&&t.push(r);for(;t.length;){let r=t.pop(),n=r.at(0),s=r.at(1);if(a.#r(e,n,s))for(let i of e.constraints())i.size()===2&&i.at(1)===n&&i.at(0)!==s&&t.unshift(i)}}};function Gr(a,e){for(let t of a.variables()){let r=t.domain(),n=t.value(),s=[];for(let i of t)if(i.size()===1){for(let o of r)t.assign(o),e<=i.degree()&&s.push(o);a.removeConstraint(i)}if(t.assign(n),s.length===0)return!1;t.domain(a.createDomain(s))}return!0}function Wr(a){for(let e of a.variables()){let t=e.domain(),r=e.value(),n=[];for(let s of e)if(s.size()===1){for(let i of t)e.assign(i),s.status()===1&&n.push(i);a.removeConstraint(s)}if(e.assign(r),n.length===0)return!1;e.domain(a.createDomain(n))}return!0}v();g();function Vt(a,e,t=r=>console.log(r)){t("Start Post-Stabilization");let r,n=0;do{t("	Post-Stabilization: count "+n++),r=!1;let s=a.degree(),i=a.variables();for(let o=0;o<i.length;++o){let u=i[o],l=u.value(),m=e.at(o);l!==m.value()&&(m.apply(),s<=a.degree()?r=!0:u.assign(l))}}while(r);return t("Finish Post-Stabilization"),r}function qr(a){return new Fe(a)}var Fe=class extends f{#e;#r;constructor(e,t=Re.DEGREE){super(),this.#e=e,this.#r=t}name(){return this.#e.name()+" + PF"}exec(){let e=0,t=0;this.monitor.isDebugMode()&&(e=Re.DEGREE===this.#r?this.pro.degree():this.pro.ratio(),t=this.pro.emptySize());let r=new c;r.setProblem(this.pro);let n=this.#e.solve(this.pro,this.monitor);return n&&Vt(this.pro,r,this.monitor.outputDebugString.bind(this.monitor)),this.monitor.outputDebugString(`Solver result: ${n?"Success":"Failure"}`),this.monitor.outputDebugString(`Evaluation: ${e} -> ${Re.DEGREE===this.#r?this.pro.degree():this.pro.ratio()}`),this.monitor.outputDebugString(`Empty variable size: ${t} -> ${this.pro.emptySize()}`),n}},Re={DEGREE:"degree",RATIO:"ratio"};X();v();te();L();T();var rt=class{#e;#r;#t=[];#n=[];#i=0;constructor(e=30,t=3){this.#e=e,this.#r=t,this.#a()}#s(e,t){this.#t[this.#i]=e,this.#n[this.#i]=t,--this.#i===-1&&(this.#i=this.#t.length-1)}#o(){let e=new Array(this.#e),t=new Array(this.#e);e:for(let r=1;r<=this.#e;++r){let n=this.#i+1;for(let i=0;i<r;++i)i+n===this.#t.length&&(n-=this.#t.length),e[i]=this.#t[i+n],t[i]=this.#n[i+n];let s=r;for(let i=0;i<this.#r-1;++i){n=this.#i+1;for(let o=0;o<r;++o)if(s+o+n>=this.#t.length&&(n-=this.#t.length),this.#t[s+o+n]!==e[o]||this.#n[s+o+n]!==t[o])continue e;s+=r}return r}return 0}#a(){this.#t=new Array(this.#e*this.#r),this.#n=new Array(this.#e*this.#r),this.#t.fill(-1),this.#n.fill(-1),this.#i=this.#t.length-1}checkLoop(e,t){return this.#s(e,t),this.#o()}clear(){this.#t.fill(-1),this.#n.fill(-1)}iterationCount(){return this.#r}loopLength(){return this.#e}values(){return this.#n.slice()}variableIndices(){return this.#t.slice()}};_();ie();se();var nt=class a{static crispSolverNames(){return["Forward Checking","Max Forward Checking","Local Changes","Breakout","GENET","Crisp SRS3"]}static fuzzySolverNames(){return["Full Checking","Fuzzy Forward Checking","Flexible Local Changes","Fuzzy Breakout","Fuzzy GENET","SRS3"]}static async createSolver(e){let t=await a.createCrispSolver(e);if(t)return t;let r=await a.createFuzzySolver(e);return r||null}static async createCrispSolver(e){switch(e.replaceAll(" ","")){case"ForwardChecking":case"forward-checking":let{ForwardChecking:t}=await Promise.resolve().then(()=>(Ee(),Qe));return new t;case"MaxForwardChecking":case"max-forward-checking":let{MaxForwardChecking:r}=await Promise.resolve().then(()=>(_e(),et));return new r;case"LocalChanges":case"local-changes":let{LocalChanges:n}=await Promise.resolve().then(()=>(ke(),Xe));return new n;case"Breakout":case"breakout":let{Breakout:s}=await Promise.resolve().then(()=>(we(),Je));return new s;case"GENET":case"genet":let{GENET:i}=await Promise.resolve().then(()=>(Te(),Ze));return new i;case"CrispSRS3":case"crisp-srs3":let{CrispSRS3:o}=await Promise.resolve().then(()=>(Ce(),Ke));return new o}return null}static async createFuzzySolver(e){switch(e.replaceAll(" ","")){case"FullChecking":case"full-checking":let{FullChecking:t}=await Promise.resolve().then(()=>(ue(),We));return new t;case"FuzzyForwardChecking":case"fuzzy-forward-checking":let{FuzzyForwardChecking:r}=await Promise.resolve().then(()=>(he(),He));return new r;case"FlexibleLocalChanges":case"flexible-local-changes":let{FlexibleLocalChanges:n}=await Promise.resolve().then(()=>(ne(),Oe));return new n;case"FuzzyBreakout":case"fuzzy-breakout":let{FuzzyBreakout:s}=await Promise.resolve().then(()=>(me(),je));return new s;case"FuzzyGENET":case"fuzzy-genet":let{FuzzyGENET:i}=await Promise.resolve().then(()=>(pe(),Ye));return new i;case"SRS3":case"srs3":let{SRS3:o}=await Promise.resolve().then(()=>(Ve(),qe));return new o}return null}};export{tt as AC3,N as Assignment,c as AssignmentList,xe as Breakout,D as Constraint,Se as CrispSRS3,C as Domain,y as DomainPruner,P as Element,re as FlexibleLocalChanges,De as ForwardChecking,ae as FullChecking,le as FuzzyBreakout,ce as FuzzyForwardChecking,be as FuzzyGENET,ze as GENET,O as ImaginaryVariable,Pe as LocalChanges,rt as LoopDetector,Le as MaxForwardChecking,M as Monitor,Ue as ObservableVariable,Fe as PostStabilizerWrapper,I as Problem,ge as SRS3,f as Solver,nt as SolverFactory,w as Variable,Wr as applyNodeConsistencyToCrispProblem,Gr as applyNodeConsistencyToProblem,Vt as applyPostStabilization,gt as averagePathLength,rr as averagePathLengths,Ie as consistencyDegreeOfProblem,Be as createCrispFuzzyRelation,Jt as createCrispTabledRelation,Kt as createFuzzyTabledRelation,z as createRelatedConstraintTable,nr as domains,at as highestConsistencyDegree,E as indexOfVariableWithMRV,ee as lowestConsistencyDegree,sr as possibleDegreesOfUnaryConstraints,V as rand,It as random,ir as setDomains,Ft as setSeed,or as toViewAsCrispProblem,qr as wrapWithPostStabilizer};
//# sourceMappingURL=stlics.min.js.map
